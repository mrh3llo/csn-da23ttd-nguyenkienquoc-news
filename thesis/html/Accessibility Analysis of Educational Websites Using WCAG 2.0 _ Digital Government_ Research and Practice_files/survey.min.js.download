!function(){"use strict";var e={744:function(e){var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,n){return e.concat(t).map(function(e){return o(e,n)})}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function i(e,t){try{return t in e}catch(e){return!1}}function s(e,t,n){var r={};return n.isMergeableObject(e)&&a(e).forEach(function(t){r[t]=o(e[t],n)}),a(t).forEach(function(a){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(i(e,a)&&n.isMergeableObject(t[a])?r[a]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l}(a,n)(e[a],t[a],n):r[a]=o(t[a],n))}),r}function l(e,n,a){(a=a||{}).arrayMerge=a.arrayMerge||r,a.isMergeableObject=a.isMergeableObject||t,a.cloneUnlessOtherwiseSpecified=o;var i=Array.isArray(n);return i===Array.isArray(e)?i?a.arrayMerge(e,n,a):s(e,n,a):o(n,a)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return l(e,n,t)},{})};var c=l;e.exports=c}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.d({},{A:function(){return ui},g:function(){return si}});var o,a,i,s,l,c,u,p,d,m,f,h,y={},_=[],b=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function v(e,t){for(var n in t)e[n]=t[n];return e}function k(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function w(e,t,n){var r,a,i,s={};for(i in t)"key"==i?r=t[i]:"ref"==i?a=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?o.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return x(e,s,r,a,null)}function x(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++i:r,__i:-1,__u:0};return null==r&&null!=a.vnode&&a.vnode(s),s}function N(e){return e.children}function O(e,t){this.props=e,this.context=t}function S(e,t){if(null==t)return e.__?S(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?S(e):null}function $(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return $(e)}}function E(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!C.__r++||l!=a.debounceRendering)&&((l=a.debounceRendering)||c)(C)}function C(){for(var e,t,n,o,r,i,l,c=1;s.length;)s.length>c&&s.sort(u),e=s.shift(),c=s.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,i=[],l=[],t.__P&&((n=v({},o)).__v=o.__v+1,a.vnode&&a.vnode(n),M(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,i,null==r?S(o):r,!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,K(i,n,l),o.__e=o.__=null,n.__e!=r&&$(n)));C.__r=0}function T(e,t,n,o,r,a,i,s,l,c,u){var p,d,m,f,h,b,g,v=o&&o.__k||_,k=t.length;for(l=P(n,t,v,l,k),p=0;p<k;p++)null!=(m=n.__k[p])&&(d=-1==m.__i?y:v[m.__i]||y,m.__i=p,b=M(e,m,d,r,a,i,s,l,c,u),f=m.__e,m.ref&&d.ref!=m.ref&&(d.ref&&H(d.ref,null,m),u.push(m.ref,m.__c||f,m)),null==h&&null!=f&&(h=f),(g=!!(4&m.__u))||d.__k===m.__k?l=I(m,l,e,g):"function"==typeof m.type&&void 0!==b?l=b:f&&(l=f.nextSibling),m.__u&=-7);return n.__e=h,l}function P(e,t,n,o,r){var a,i,s,l,c,u=n.length,p=u,d=0;for(e.__k=new Array(r),a=0;a<r;a++)null!=(i=t[a])&&"boolean"!=typeof i&&"function"!=typeof i?(l=a+d,(i=e.__k[a]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?x(null,i,null,null,null):g(i)?x(N,{children:i},null,null,null):null==i.constructor&&i.__b>0?x(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,s=null,-1!=(c=i.__i=L(i,n,l,p))&&(p--,(s=n[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(r>u?d--:r<u&&d++),"function"!=typeof i.type&&(i.__u|=4)):c!=l&&(c==l-1?d--:c==l+1?d++:(c>l?d--:d++,i.__u|=4))):e.__k[a]=null;if(p)for(a=0;a<u;a++)null!=(s=n[a])&&!(2&s.__u)&&(s.__e==o&&(o=S(s)),F(s,s));return o}function I(e,t,n,o){var r,a;if("function"==typeof e.type){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=I(r[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=S(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function j(e,t){return t=t||[],null==e||"boolean"==typeof e||(g(e)?e.some(function(e){j(e,t)}):t.push(e)),t}function L(e,t,n,o){var r,a,i,s=e.key,l=e.type,c=t[n],u=null!=c&&!(2&c.__u);if(null===c&&null==e.key||u&&s==c.key&&l==c.type)return n;if(o>(u?1:0))for(r=n-1,a=n+1;r>=0||a<t.length;)if(null!=(c=t[i=r>=0?r--:a++])&&!(2&c.__u)&&s==c.key&&l==c.type)return i;return-1}function D(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||b.test(t)?n:n+"px"}function A(e,t,n,o,r){var a,i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||D(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||D(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(p,"$1")),i=t.toLowerCase(),t=i in e||"onFocusOut"==t||"onFocusIn"==t?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=d,e.addEventListener(t,a?f:m,a)):e.removeEventListener(t,a?f:m,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function V(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=d++;else if(t.t<n.u)return;return n(a.event?a.event(t):t)}}}function M(e,t,n,o,r,i,s,l,c,u){var p,d,m,f,h,y,_,b,w,x,S,$,E,C,P,I,j,L=t.type;if(null!=t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[l=t.__e=n.__e]),(p=a.__b)&&p(t);e:if("function"==typeof L)try{if(b=t.props,w="prototype"in L&&L.prototype.render,x=(p=L.contextType)&&o[p.__c],S=p?x?x.props.value:p.__:o,n.__c?_=(d=t.__c=n.__c).__=d.__E:(w?t.__c=d=new L(b,S):(t.__c=d=new O(b,S),d.constructor=L,d.render=z),x&&x.sub(d),d.props=b,d.state||(d.state={}),d.context=S,d.__n=o,m=d.__d=!0,d.__h=[],d._sb=[]),w&&null==d.__s&&(d.__s=d.state),w&&null!=L.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=v({},d.__s)),v(d.__s,L.getDerivedStateFromProps(b,d.__s))),f=d.props,h=d.state,d.__v=t,m)w&&null==L.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),w&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(w&&null==L.getDerivedStateFromProps&&b!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,S)||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),$=0;$<d._sb.length;$++)d.__h.push(d._sb[$]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,S),w&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(f,h,y)})}if(d.context=S,d.props=b,d.__P=e,d.__e=!1,E=a.__r,C=0,w){for(d.state=d.__s,d.__d=!1,E&&E(t),p=d.render(d.props,d.state,d.context),P=0;P<d._sb.length;P++)d.__h.push(d._sb[P]);d._sb=[]}else do{d.__d=!1,E&&E(t),p=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++C<25);d.state=d.__s,null!=d.getChildContext&&(o=v(v({},o),d.getChildContext())),w&&!m&&null!=d.getSnapshotBeforeUpdate&&(y=d.getSnapshotBeforeUpdate(f,h)),I=p,null!=p&&p.type===N&&null==p.key&&(I=B(p.props.children)),l=T(e,g(I)?I:[I],t,n,o,r,i,s,l,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),_&&(d.__E=d.__=null)}catch(e){if(t.__v=null,c||null!=i)if(e.then){for(t.__u|=c?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;i[i.indexOf(l)]=null,t.__e=l}else{for(j=i.length;j--;)k(i[j]);R(t)}else t.__e=n.__e,t.__k=n.__k,e.then||R(t);a.__e(e,t,n)}else null==i&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=q(n.__e,t,n,o,r,i,s,c,u);return(p=a.diffed)&&p(t),128&t.__u?void 0:l}function R(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(R)}function K(e,t,n){for(var o=0;o<n.length;o++)H(n[o],n[++o],n[++o]);a.__c&&a.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){a.__e(e,t.__v)}})}function B(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:g(e)?e.map(B):v({},e)}function q(e,t,n,r,i,s,l,c,u){var p,d,m,f,h,_,b,v=n.props,w=t.props,x=t.type;if("svg"==x?i="http://www.w3.org/2000/svg":"math"==x?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=s)for(p=0;p<s.length;p++)if((h=s[p])&&"setAttribute"in h==!!x&&(x?h.localName==x:3==h.nodeType)){e=h,s[p]=null;break}if(null==e){if(null==x)return document.createTextNode(w);e=document.createElementNS(i,x,w.is&&w),c&&(a.__m&&a.__m(t,s),c=!1),s=null}if(null==x)v===w||c&&e.data==w||(e.data=w);else{if(s=s&&o.call(e.childNodes),v=n.props||y,!c&&null!=s)for(v={},p=0;p<e.attributes.length;p++)v[(h=e.attributes[p]).name]=h.value;for(p in v)if(h=v[p],"children"==p);else if("dangerouslySetInnerHTML"==p)m=h;else if(!(p in w)){if("value"==p&&"defaultValue"in w||"checked"==p&&"defaultChecked"in w)continue;A(e,p,null,h,i)}for(p in w)h=w[p],"children"==p?f=h:"dangerouslySetInnerHTML"==p?d=h:"value"==p?_=h:"checked"==p?b=h:c&&"function"!=typeof h||v[p]===h||A(e,p,h,v[p],i);if(d)c||m&&(d.__html==m.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(m&&(e.innerHTML=""),T("template"==t.type?e.content:e,g(f)?f:[f],t,n,r,"foreignObject"==x?"http://www.w3.org/1999/xhtml":i,s,l,s?s[0]:n.__k&&S(n,0),c,u),null!=s)for(p=s.length;p--;)k(s[p]);c||(p="value","progress"==x&&null==_?e.removeAttribute("value"):null!=_&&(_!==e[p]||"progress"==x&&!_||"option"==x&&_!=v[p])&&A(e,p,_,v[p],i),p="checked",null!=b&&b!=e[p]&&A(e,p,b,v[p],i))}return e}function H(e,t,n){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==t||(e.__u=e(t))}else e.current=t}catch(e){a.__e(e,n)}}function F(e,t,n){var o,r;if(a.unmount&&a.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||H(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){a.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&F(o[r],t,n||"function"!=typeof e.type);n||k(e.__e),e.__c=e.__=e.__e=void 0}function z(e,t,n){return this.constructor(e,n)}function U(e,t,n){var r,i,s,l;t==document&&(t=document.documentElement),a.__&&a.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,s=[],l=[],M(t,e=(!r&&n||t).__k=w(N,null,[e]),i||y,y,t.namespaceURI,!r&&n?[n]:i?null:t.firstChild?o.call(t.childNodes):null,s,!r&&n?n:i?i.__e:t.firstChild,r,l),K(s,e,l)}function W(e){function t(e){var n,o;return this.getChildContext||(n=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!=e.value&&n.forEach(function(e){e.__e=!0,E(e)})},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}return t.__c="__cC"+h++,t.__=e,t.Provider=t.__l=(t.Consumer=function(e,t){return e.children(t)}).contextType=t,t}o=_.slice,a={__e:function(e,t,n,o){for(var r,a,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),i=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(t){e=t}throw e}},i=0,O.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=v({},this.state),"function"==typeof e&&(e=e(v({},n),this.props)),e&&v(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),E(this))},O.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),E(this))},O.prototype.render=N,s=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},C.__r=0,p=/(PointerCapture)$|Capture$/i,d=0,m=V(!1),f=V(!0),h=0;var G,Y,Q,X,Z=n(744),J=n.n(Z),ee=0,te=[],ne=a,oe=ne.__b,re=ne.__r,ae=ne.diffed,ie=ne.__c,se=ne.unmount,le=ne.__;function ce(e,t){ne.__h&&ne.__h(Y,e,ee||t),ee=0;var n=Y.__H||(Y.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ue(e){return ee=1,pe(Ne,e)}function pe(e,t,n){var o=ce(G++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):Ne(void 0,t),function(e){var t=o.__N?o.__N[0]:o.__[0],n=o.t(t,e);t!==n&&(o.__N=[n,o.__[1]],o.__c.setState({}))}],o.__c=Y,!Y.__f)){var r=function(e,t,n){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!a||a.call(this,e,t,n);var i=o.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}}),a&&a.call(this,e,t,n)||i};Y.__f=!0;var a=Y.shouldComponentUpdate,i=Y.componentWillUpdate;Y.componentWillUpdate=function(e,t,n){if(this.__e){var o=a;a=void 0,r(e,t,n),a=o}i&&i.call(this,e,t,n)},Y.shouldComponentUpdate=r}return o.__N||o.__}function de(e,t){var n=ce(G++,3);!ne.__s&&xe(n.__H,t)&&(n.__=e,n.u=t,Y.__H.__h.push(n))}function me(e,t){var n=ce(G++,4);!ne.__s&&xe(n.__H,t)&&(n.__=e,n.u=t,Y.__h.push(n))}function fe(e){return ee=5,he(function(){return{current:e}},[])}function he(e,t){var n=ce(G++,7);return xe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ye(e,t){return ee=8,he(function(){return e},t)}function _e(e){var t=Y.context[e.__c],n=ce(G++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Y)),t.props.value):e.__}function be(){for(var e;e=te.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ke),e.__H.__h.forEach(we),e.__H.__h=[]}catch(t){e.__H.__h=[],ne.__e(t,e.__v)}}ne.__b=function(e){Y=null,oe&&oe(e)},ne.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),le&&le(e,t)},ne.__r=function(e){re&&re(e),G=0;var t=(Y=e.__c).__H;t&&(Q===Y?(t.__h=[],Y.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(ke),t.__h.forEach(we),t.__h=[],G=0)),Q=Y},ne.diffed=function(e){ae&&ae(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==te.push(t)&&X===ne.requestAnimationFrame||((X=ne.requestAnimationFrame)||ve)(be)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),Q=Y=null},ne.__c=function(e,t){t.some(function(e){try{e.__h.forEach(ke),e.__h=e.__h.filter(function(e){return!e.__||we(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],ne.__e(n,e.__v)}}),ie&&ie(e,t)},ne.unmount=function(e){se&&se(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{ke(e)}catch(e){t=e}}),n.__H=void 0,t&&ne.__e(t,n.__v))};var ge="function"==typeof requestAnimationFrame;function ve(e){var t,n=function(){clearTimeout(o),ge&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);ge&&(t=requestAnimationFrame(n))}function ke(e){var t=Y,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Y=t}function we(e){var t=Y;e.__c=e.__(),Y=t}function xe(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function Ne(e,t){return"function"==typeof t?t(e):t}function Oe(e,t){for(var n in t)e[n]=t[n];return e}function Se(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var o in t)if("__source"!==o&&e[o]!==t[o])return!0;return!1}function $e(e,t){this.props=e,this.context=t}function Ee(e,t){function n(e){var n=this.props.ref,o=n==e.ref;return!o&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!o:Se(this.props,e)}function o(t){return this.shouldComponentUpdate=n,w(e,t)}return o.displayName="Memo("+(e.displayName||e.name)+")",o.prototype.isReactComponent=!0,o.__f=!0,o.type=e,o}($e.prototype=new O).isPureReactComponent=!0,$e.prototype.shouldComponentUpdate=function(e,t){return Se(this.props,e)||Se(this.state,t)};var Ce=a.__b;a.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ce&&Ce(e)};var Te="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Pe(e){function t(t){var n=Oe({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=Te,t.render=e,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ie=a.__e;a.__e=function(e,t,n,o){if(e.then)for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);Ie(e,t,n,o)};var je=a.unmount;function Le(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),null!=(e=Oe({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return Le(e,t,n)})),e}function De(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return De(e,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Ae(){this.__u=0,this.o=null,this.__b=null}function Ve(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Me(){this.i=null,this.l=null}a.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),je&&je(e)},(Ae.prototype=new O).__c=function(e,t){var n=t.__c,o=this;null==o.o&&(o.o=[]),o.o.push(n);var r=Ve(o.__v),a=!1,i=function(){a||(a=!0,n.__R=null,r?r(s):s())};n.__R=i;var s=function(){if(! --o.__u){if(o.state.__a){var e=o.state.__a;o.__v.__k[0]=De(e,e.__c.__P,e.__c.__O)}var t;for(o.setState({__a:o.__b=null});t=o.o.pop();)t.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(i,i)},Ae.prototype.componentWillUnmount=function(){this.o=[]},Ae.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=Le(this.__b,n,o.__O=o.__P)}this.__b=null}var r=t.__a&&w(N,null,e.fallback);return r&&(r.__u&=-33),[w(N,null,t.__a?null:e.children),r]};var Re=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function Ke(e){return this.getChildContext=function(){return e.context},e.children}function Be(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){U(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var o=t.__v;null!==o&&!o.__m&&null!==o.__;)o=o.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(e,n){this.childNodes.push(e),t.h.insertBefore(e,n)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.h.removeChild(e)}}}U(w(Ke,{context:t.context},e.__v),t.v)}function qe(e,t){var n=w(Be,{__v:e,h:t});return n.containerInfo=t,n}(Me.prototype=new O).__a=function(e){var t=this,n=Ve(t.__v),o=t.l.get(e);return o[0]++,function(r){var a=function(){t.props.revealOrder?(o.push(r),Re(t,e,o)):r()};n?n(a):a()}},Me.prototype.render=function(e){this.i=null,this.l=new Map;var t=j(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Me.prototype.componentDidUpdate=Me.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Re(e,n,t)})};var He="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Fe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ze=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ue=/[A-Z0-9]/g,We="undefined"!=typeof document,Ge=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};O.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(O.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ye=a.event;function Qe(){}function Xe(){return this.cancelBubble}function Ze(){return this.defaultPrevented}a.event=function(e){return Ye&&(e=Ye(e)),e.persist=Qe,e.isPropagationStopped=Xe,e.isDefaultPrevented=Ze,e.nativeEvent=e};var Je={enumerable:!1,configurable:!0,get:function(){return this.class}},et=a.vnode;a.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,o={},r=-1===n.indexOf("-");for(var a in t){var i=t[a];if(!("value"===a&&"defaultValue"in t&&null==i||We&&"children"===a&&"noscript"===n||"class"===a||"className"===a)){var s=a.toLowerCase();"defaultValue"===a&&"value"in t&&null==t.value?a="value":"download"===a&&!0===i?i="":"translate"===s&&"no"===i?i=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?a="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||Ge(t.type)?"onfocus"===s?a="onfocusin":"onblur"===s?a="onfocusout":ze.test(a)&&(a=s):s=a="oninput":r&&Fe.test(a)?a=a.replace(Ue,"-$&").toLowerCase():null===i&&(i=void 0),"oninput"===s&&o[a=s]&&(a="oninputCapture"),o[a]=i}}"select"==n&&o.multiple&&Array.isArray(o.value)&&(o.value=j(t.children).forEach(function(e){e.props.selected=-1!=o.value.indexOf(e.props.value)})),"select"==n&&null!=o.defaultValue&&(o.value=j(t.children).forEach(function(e){e.props.selected=o.multiple?-1!=o.defaultValue.indexOf(e.props.value):o.defaultValue==e.props.value})),t.class&&!t.className?(o.class=t.class,Object.defineProperty(o,"className",Je)):(t.className&&!t.class||t.class&&t.className)&&(o.class=o.className=t.className),e.props=o}(e),e.$$typeof=He,et&&et(e)};var tt=a.__r;a.__r=function(e){tt&&tt(e),e.__c};var nt=a.diffed;a.diffed=function(e){nt&&nt(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value)};function ot({into:e,children:t}){const[n,o]=ue(!1);return de(()=>{o(!0)},[]),n?qe(t,e):null}function rt({className:e="",width:t="20px",height:n="20px",...o}){return w("svg",{className:`is-loading ${e}`,"aria-hidden":!0,height:n,width:t,viewBox:"22 22 44 44"},w("circle",{cx:"44",cy:"44",r:"20.2",fill:"none","stroke-width":"3.6"}))}function at(e=""){try{return decodeURIComponent(e)}catch(t){return e}}const it=(e="",t=window.location.search)=>{e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":at(n[1].replace(/\+/g," "))},st=(e,t)=>{e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":at(n[1].replace(/\+/g," "))},lt=e=>{for(let t of document.cookie.split("; ")){let[n,o]=t.split("=");if(e===n)return at(o)}};const ct=(e,t,n)=>{let o="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),o=`; expires=${e.toUTCString()}`}const r="https:"===document.location.protocol?"; Secure":"",a=`${e}=${t||""}${o};domain=.${function(){const e=window.location.hostname.split(".");if(e.length<=2)return window.location.hostname;const t=e.slice(-3);return["co","com"].indexOf(t[1])>-1?t.join("."):t.slice(-2).join(".")}()};path=/${r};`;document.cookie=a};function ut(e=""){return/^((http|https):\/\/)/.test(e)}function pt(e="",{onLoad:t}={}){if(!ut(e))return;if(document.querySelector(`script[src="${e}"]`))return;const n=document.createElement("script");if(n.src=e,n.type="text/javascript",n.setAttribute("data-testid","custom-script"),document.head.appendChild(n),"function"==typeof t){let e=!1;n.onload=n.onreadystatechange=()=>{if(!(e||n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState)){e=!0;try{t()}catch(e){}}}}}const dt=(e,t)=>{let n;return function(...o){n&&clearTimeout(n),n=setTimeout(()=>{e(...o),n=null},t)}},mt=(e,t)=>{for(var n=0;n<e.length;n++){var o=e[n];o.classList?o.classList.add(t):o.className+=" "+t}},ft=(e,t)=>{for(var n=0;n<e.length;n++){var o=e[n];o.classList?o.classList.remove(t):o.className=o.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},ht=(e,t)=>e.classList?e.classList.contains(t):new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className),yt=(e=[],t)=>{"string"==typeof e&&(e=[].concat(e));let n=e.filter(e=>e&&!_t(e));return n.length&&function(e){if(!ut(e))return;if(document.querySelector(`link[href="${e}"]`))return;const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.head.appendChild(t)}(`https://${t}/css?family=${n.map(e=>e.replace(/ /g,"+")).join("|")}`),n},_t=e=>{const t=document.createElement("span");t.innerHTML="giItT1WQy@!-/#",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.fontSize="300px",t.style.fontFamily="sans-serif",t.style.fontVariant="normal",t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="0",document.body.appendChild(t);const n=t.offsetWidth;t.style.fontFamily=e+", sans-serif";const o=t.offsetWidth;return t.parentNode.removeChild(t),o!==n},bt=(e,t)=>{var n,o=[];for(n in e)if(e.hasOwnProperty(n)){var r=t?t+"["+n+"]":n,a=e[n];o.push(null!==a&&"object"==typeof a?bt(a,r):encodeURIComponent(r)+"="+encodeURIComponent(a))}return o.join("&")},gt=e=>{let t=e.element||document;if("function"==typeof CustomEvent){let n=new CustomEvent("mopinion_"+e.event,{bubbles:!1,detail:e});t.dispatchEvent(n)}else{let n=document.createEvent("CustomEvent");n.initCustomEvent("mopinion_"+e.event,!1,!1,e),t.dispatchEvent(n)}},vt=e=>Array.isArray?Array.isArray(e):e instanceof Array,kt=e=>Array.prototype.slice.call(e);function wt(e){const t=e.value||e.getAttribute("value");if(t){const n=t.replace(/./g,"*");e.setAttribute("value",n),e.value=n}return e}function xt(){return Math.random().toString(36)}function Nt(e,t){return e.map((n,o)=>({sort:t&&o===e.length-1?1:Math.random(),value:n})).sort((e,t)=>e.sort-t.sort).map(e=>e.value)}function Ot(e){return`${(new Date).getTime()}${function(e=35,t=36){let n,o="";for(;o.length<e;)n=Math.random().toString(t).slice(2),o+=n.slice(0,Math.min(n.length,e-o.length));return o}(e)}`}function St(e=""){return String(e).replace(/(<([^>]+)>)/gi,"")}function $t(e){return t="data:image",e.substr(0,t.length)===t?e:`https://cacheorcheck.mopinion.com/survey/public/image?file=${e}`;var t}function Et(e){try{return function(e,t,n,o=!0){return String(t).replace(/\["|\['|\[/g,".").replace(/"]|']|]/g,"").split(".").reduce((e,t,r,a)=>{if(0===r&&"window"===t&&o)return e;try{const o=t.replace(/[()]/g,""),i="*"===o;if((i||"*LAST"===o)&&Array.isArray(e)){const t=a[r+1];return e=e.filter(e=>e?.[t]),i?e[0]??n:e.pop()??n}return(e="function"==typeof e[o]?e[o]():e[o])??n}catch(e){return n}},e)}(window,e,void 0)}catch(e){return}}function Ct(e){const t={};return Object.keys(e).forEach(n=>{e[n]&&"object"==typeof e[n]?t[n]=Ct(e[n]):null!==e[n]&&(t[n]=e[n])}),t}function Tt(e,t,n){let o;try{o=jt(e,t,n)}catch(e){}return o?"INPUT"===o.nodeName?o.value:o.textContent:""}function Pt(e,t){if("string"!=typeof e)return e;if(1===e.split("<br/>").length&&1===e.split("<br>").length)return e;var n=e.split("<br/>").length>1?"<br/>":"<br>";return t?e.split(n).map((o,r)=>r===e.split(n).length-1?w("span",null,o,w("span",{"aria-label":t,class:"required-mark"},"*"),w("br",null)):w("span",null,o,w("br",null))):e.split(n).map(e=>w("span",null,e,w("br",null)))}function It(e,t,n){let o,r=e.replace(/{{FORM_DIV}}\s/,""),a=r.split(" ");try{o=jt(e,t,n)}catch(e){}if(o){let e=a.length>1?a[1].replace(/\[|\]/gi,""):r.replace(/\[|\]/gi,"");return o.getAttribute(e)||""}return""}function jt(e,t,n){const o=e.split("{{FORM_DIV}}");if(null!==e.match("{{FORM_DIV}}")&&o.length>1){const e=o[1].trim(),[r,...a]=e.split(" "),i=t instanceof HTMLElement&&t.className.length?`.${t.className.split(" ")[0]}`:t instanceof HTMLElement&&t.id.length?`#${t.id}`:"";return a.length>0?document.querySelectorAll(i)[n].closest(r).querySelector(a.join(" ")):document.querySelectorAll(i)[n].closest(r)}return document.querySelector(e)}function Lt(){return document.location.pathname.indexOf("/survey/public/take-survey/")>-1||document.location.pathname.indexOf("/survey/public/email-survey/")>-1}function Dt(){const e=document.querySelector("#public-survey-page-querystring")?.value??"";return Lt()?`${document.location.href}${e}`:document.location.href}function At(){return Lt()?document.querySelector("#public-survey-page-querystring")?.value??"":document.location.search}function Vt(e,t,n=()=>{}){const o=()=>{try{e.focus()}catch(e){n()}};return t?setTimeout(()=>o(),t):o()}function Mt(e){if("style"===e){if(window._MOPINION_NONCE)return window._MOPINION_NONCE;if(document.querySelector("[data-style-nonce]")?.getAttribute("data-style-nonce"))return document.querySelector("[data-style-nonce]").getAttribute("data-style-nonce");if(document.querySelector("style[nonce]")?.nonce)return document.querySelector("style[nonce]").nonce}if("script"===e){if(document.querySelector("[data-script-nonce]")?.getAttribute("data-script-nonce"))return document.querySelector("[data-script-nonce]").getAttribute("data-script-nonce");if(document.querySelector("script[nonce]")?.nonce)return document.querySelector("script[nonce]").nonce}return document.querySelector("[nonce]")?.nonce}function Rt(...e){const t=e=>"mop-"+e;return e.reduce((e,n)=>("string"==typeof n&&n.length>0&&e.push(t(n)),vt(n)&&e.push(n.map(e=>t(e)).join(" ")),!1===n?.prefix&&n?.className&&e.push(n.className),e),[]).join(" ")}function Kt({type:e,value:t,divName:n,multipleIndex:o}={}){const r=(()=>{switch(e){case"data_attr":return It(t,n,o);case"css_selector":return Tt(t,n,o);case"js":const e=Et(t);if("string"!=typeof e)try{return function(e={}){const t=[];try{return JSON.stringify(e,(e,n)=>{if("object"==typeof n&&null!==n){if(-1!==t.indexOf(n))return;t.push(n)}return n})}catch(e){return""}}(e)}catch(e){}return e;case"cookie":return lt(t);case"url_parameter":const r=function(e=""){try{return e!==decodeURIComponent(e)}catch(e){return!1}}(t)?t:function(e=""){try{return encodeURIComponent(e)}catch(t){return e}}(t);return it(r,At());default:return""}})();return"string"==typeof r?r:""}function Bt(e=1,t=10,n=[]){let o=t-e+1;for(;o--;)n[o]=t--;return n}function qt(){lt("MopinionDebug")}class Ht extends O{state={error:null};static getDerivedStateFromError(e){return{error:e.message}}componentDidCatch(e){qt(e),this.setState({error:e.message})}render(){return this.state.error?null:this.props.children}}function Ft(e,t){t=t||{};const n=new XMLHttpRequest,o=new Promise((o,r)=>{const a=[],i=[],s={},l=()=>({ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:()=>Promise.resolve(n.responseText),json:()=>Promise.resolve(n.responseText).then(JSON.parse),blob:()=>Promise.resolve(new Blob([n.response])),clone:l,headers:{keys:()=>a,entries:()=>i,get:e=>s[e.toLowerCase()],has:e=>e.toLowerCase()in s}});n.open(t.method||"get",e,!0),n.onload=()=>{n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(e,t,n)=>{a.push(t=t.toLowerCase()),i.push([t,n]),s[t]=s[t]?`${s[t]},${n}`:n}),o(l())},n.onerror=r,n.withCredentials="include"==t.credentials;for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);n.send(t.body||null)});return{promise:o,abort:()=>n.abort()}}function zt(e){const{promise:t}=Ft(e,{method:"get",crossOrigin:!0});return t.then(e=>e.text()).then(e=>"string"==typeof e?JSON.parse(e):"object"==typeof e?e:{}).catch(e=>qt(e))}function Ut(e,t){const{promise:n,abort:o}=Ft(e,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:bt(t)});return n.then(e=>e.json()).then(e=>e)}var Wt=function({formKey:e,domain:t,cacheDomain:n="cacheorcheck.mopinion.com",customDomain:o,feedbackDomain:r="survey.mopinion.com",webView:a,noCache:i,refresh:s}){const l={cache:`https://${n}/survey/public`,domain:`https://${o??t}/survey/public`,send:`https://${r}/api/1/data`};function c(e,n){return"send"===e?l.send:i||n||["beta.mopinion.com","accept.mopinion.com"].indexOf(t)>-1?l.domain:l[e]}return{getConfig(n,o){return zt(`${c("cache",o)}/json-config?key=${e}&domain=${t}${a?"&webView=true":""}${n?"&withBase=true":""}${s?"&"+Date.now():""}`)},getEmoji(e){return zt(c("cache")+`/emoji?blockId=${e}&domain=${t}`)},getIcons(e){return e=vt(e)?e:[e],zt(c("cache")+`/icons?icons=${e.join(",")}&domain=${t}`)},validateReCaptcha(e){return Ut(c("domain")+"/validate-recaptcha",e)},validateBusinessEmail(e){return Ut(c("domain")+"/validate-business-email",e)}}};function Gt(e=()=>{},t=null){const n=fe(e);me(()=>{n.current=e},[e]),de(()=>{if(null==t)return;const e=setTimeout(()=>n.current(),t);return()=>clearTimeout(e)},[t])}function Yt(e){const t=fe();return de(()=>{t.current=e},[e]),t.current}var Qt=function(){const e=fe(!1);return de(()=>(e.current=!0,()=>{e.current=!1}),[]),ye(()=>e.current,[])};function Xt(e,t){const n=fe();return ye((...o)=>{clearTimeout(n.current),n.current=setTimeout(()=>{clearTimeout(n.current),e(...o)},t)},[e,t])}function Zt({url:e="",method:t="post",json:n,headers:o={},data:r={},onSuccess:a=()=>{},onError:i=()=>{},allow:s=!0,spoof:l=!1}){const[c,u]=ue({}),[p,d]=ue(null),m=fe(()=>{});return{request:Xt(c=>{!function({callback:c}={}){if(!s)return;if(l)return qt("Request was disabled, data:",r),a({code:200}),void("function"==typeof c&&c());const{promise:p,abort:f}=Ft(e,{method:t,headers:{"Content-Type":"application/"+(n?"json":"x-www-form-urlencoded; charset=UTF-8"),...o},body:n?JSON.stringify(r):bt(r)});m.current=f,p.then(e=>e.json()).then(e=>{"function"==typeof c&&c(e),u(e),a(e)}).catch(e=>{d(e),i(e)})}(c)},200),response:c,error:p,cancel:m.current}}function Jt(e,t){const[n,o]=ue(function(e){try{const t=JSON.parse(sessionStorage.getItem(en))?.[e]??{};if((new Date).getTime()>Number(t.time))return;return t.value}catch(e){return}}(e)||t);return de(()=>{!function(e,t){try{const n=JSON.parse(sessionStorage.getItem(en))??{},o={time:(new Date).getTime()+6e5,value:t};n[e]?Object.assign(n[e],o):n[e]=o,sessionStorage.setItem(en,JSON.stringify(n))}catch(e){}}(e,n)},[e,n]),[n,o]}const en="mopDeploy";const tn=["mousedown","mousemove","keydown","keypress","touchstart","touchend","click"];function nn(){const[e,t]=ue(!1);return de(()=>{const e=()=>{t(!0),n()},n=()=>{tn.forEach(t=>{document.removeEventListener(t,e)})};return tn.forEach(t=>{document.addEventListener(t,e,{once:!0})}),()=>{n()}},[]),e}const on="https://mopinion-visual-feedback.s3-eu-west-1.amazonaws.com/camera-icon.png",rn=["input","textarea","email","phone","name","firstname","lastname"],an=["input","textarea","section_break","link","multimedia","contact","checkbox"],sn=["section_break","multimedia","text","icon","img","link","website_data","ending","honeybot","recaptcha"],ln=["rating","nps","ces","gcr","thumbs","input","textarea","radio","checkbox","link","select","contact","category","screenshot","matrix","likert"],cn=["multimedia","img"],un=["website_data"],pn=["website_data","ending"],dn=["matrix","likert"],mn="hb213566",fn="special_input";function hn(e={}){let t=null;if(e.properties?.preselectScore){switch(e.typeName){case"nps":case"thumbs":t=it(e.typeName,At());break;default:if("emoji"===e.properties.type){t=it("smiley",At()),t&&e.properties.labelsAsValue&&e.properties.labelsAsValue&&(t=e.properties.emoji?.[t]?.label??"");break}t=it("score",At())}if(t)return{post:!0,logic:!0,value:t}}const n=it(`${e.typeName}_${e.id}`,At())||it(`${e.typeName}_${e.uuid}`,At());return n&&function({value:e,block:t={}}){const{type:n,scale:o=10}=t?.properties??{};switch(t.typeName){case"nps":return Number(e)>=0&&Number(e)<=10;case"rating":return["emoji","bar"].indexOf(n)>-1?Number(e)>=1&&Number(e)<=5:Number(e)>=0&&Number(e)<=o;case"ces":return Number(e)>=1&&Number(e)<=5;case"thumbs":case"gcr":return Object.keys(t.properties.elements).some(n=>(t.properties?.elements?.[n]??{}).value===e);case"category":return Object.keys(t.properties.elements).some(n=>(t.properties?.elements?.[n]??{}).label===e);default:return!1}}({value:n,block:e})?{post:!0,logic:!0,value:n}:e.properties?.value?{logic:!0,value:e.properties.value}:{value:""}}function yn(e=""){return["dom","selector"].indexOf(e)>-1||!isNaN(Number(e))}function _n({layout:e,blockState:t,blocks:n}){return e.filter(e=>{const o=t[e],r=n[e];return o.isVisible&&o.showInConvo&&-1===un.indexOf(r?.typeName)}).pop()??null}const bn=e=>"boolean"==typeof e?e:String(e).trim().length>0,gn=e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),vn=e=>e.length>9&&/^[\(\)\s\-\+\d]{10,17}$/.test(e),kn=(e,t)=>e.length<=t,wn=(e,t)=>e.length>=t;function xn({block:e={},datafieldId:t}){return Object.keys(e.properties?.elements??{}).some(n=>{const o=e.properties.elements[n];if(o.data_field===t)return o.required;if(!o.combine&&o.subelements){if(Object.keys(o.subelements).some(e=>o.subelements[e].data_field===t))return o.required}return!1})}function Nn({datafieldId:e,block:t={}}){return t.properties?.elements?.email?.data_field===e}function On(e={}){return e.properties?.elements_extra?e.properties.elements_extra[Object.keys(e.properties?.elements_extra).pop()]:null}const Sn={required:"required",requiredCheckbox:"required",requiredContact:"required",requiredMulti:"required_multi",requiredExtra:"required",email:"invalid_email",businessEmail:"invalid_business_email",phone:"invalid_phone",min:"too_short",max:"too_long",minExtra:"too_short",maxExtra:"too_long",minOptions:"min_options",maxOptions:"max_options",recaptcha:"required"};function $n({block:e={},state:t,datafieldId:n,allowedEmails:o=[]}){const r={required(){return!n&&e.properties?.required&&-1===dn.indexOf(e.typeName)?bn(t.value):"contact"!==e.typeName||!xn({block:e,datafieldId:n})||bn(t[n].value)},requiredCheckbox(){return"checkbox"!==e.typeName||!e.properties?.required||Object.keys(t).filter(e=>yn(e)).some(e=>bn(t[e].value))},requiredContact(){return"contact"!==e.typeName||!xn({block:e,datafieldId:n})||bn(t[n].value)},requiredMulti(){if(e.properties?.required&&dn.indexOf(e.typeName)>-1){return Object.keys(t).filter(e=>yn(e)).every(e=>bn(t[e].value))}return!0},requiredExtra(){const n=On(e);return!(e.properties?.required&&n&&t[n.data_field].isVisible)||bn(t[n.data_field].value)},email(){return"email"===e.typeName||"email"===e.properties?.format?!t.value||gn(t.value):"contact"!==e.typeName||!Nn({block:e,datafieldId:n})||(!t[n].value||gn(t[n].value))},businessEmail(){if(e.properties?.business_only||e.properties?.elements?.email?.business_only&&Nn({block:e,datafieldId:n})){const e=n?t[n].value:t.value;return gn(e)&&-1!==o.indexOf(e)}return!0},phone(){return"phone"===e.typeName||"tel"===e.properties?.format?!t.value||vn(t.value):"contact"!==e.typeName||!function({datafieldId:e,block:t={}}){return t.properties?.elements?.phone?.data_field===e||t.properties?.elements?.phone2===e}({block:e,datafieldId:n})||(!t[n].value||vn(t[n].value))},min(){return!(e.properties?.boundary?.limitMin&&rn.indexOf(e.typeName)>-1)||wn(t.value,Number(e.properties?.boundary?.limitMin))},max(){return!(e.properties?.boundary?.limitMax&&rn.indexOf(e.typeName)>-1)||kn(t.value,Number(e.properties?.boundary?.limitMax))},minExtra(){const n=On(e);return!(e.properties?.boundary?.limitMin&&n&&t[n.data_field].isVisible)||wn(t[n.data_field].value,Number(e.properties?.boundary?.limitMin))},maxExtra(){const n=On(e);return!(e.properties?.boundary?.limitMax&&n&&t[n.data_field].isVisible)||kn(t[n.data_field].value,Number(e.properties?.boundary?.limitMax))},minOptions(){if(e.properties?.minSelected){return Object.keys(t).filter(e=>yn(e)&&bn(t[e].value)&&"boolean"==typeof t[e].value).length>=e.properties.minSelected}return!0},maxOptions(){if(e.properties?.maxSelected){return Object.keys(t).filter(e=>yn(e)&&bn(t[e].value)&&"boolean"==typeof t[e].value).length<=e.properties.maxSelected}return!0},recaptcha(){return"recaptcha"!==t.id||bn(t.value)}};if(!t.isVisible)return{valid:!0};let a=!0,i=null;for(const e in r){if(!(0,r[e])()){a=!1,i=Sn[e];break}}return{valid:a,reason:i,block:e}}function En(e){return String(e).trim()}const Cn={"===":(e,t)=>En(e)===En(t),"!==":(e,t)=>En(e)!==En(t),"*":(e,t)=>t.indexOf(En(e))>-1,"!*":(e,t)=>!e&&t.length>0||-1===t.indexOf(En(e)),is_not_empty:e=>e.length>0},Tn={url:e=>Dt().indexOf(e)>-1,title:e=>document.title.indexOf(e)>-1,url_query:e=>it(e,At()),cookie:e=>lt(e),js:e=>Et(e),css_selector:e=>Tt(e),data_attr:e=>It(e)};function Pn(e,t={}){if(Number(e)>Object.keys(t.properties.elements??{}).length){const n=Number(e)-Object.keys(t.properties.elements??{}).length;return t.properties.elements_extra[n]&&n}return null}function In({state:e,condition:t={},block:n={},didExecuteLogic:o}={}){if(t.always&&!o)return!0;const r=Cn[t?.operator];if(!r)return!1;if("is_not_empty"===t.operator)return r(e.value);if(Array.isArray(t?.values)&&t.values?.length>0)return t.values.filter(t=>r(t,e.value)).length>0;if(t.hasOwnProperty("trigger_element"))return r(t.trigger_element,e.value);const a=t.elements?.filter(t=>{if("screenshot"===n.typeName)return r(on,e.value);if("checkbox"===n.typeName)return r(!0,e[function(e,t={}){const n=Pn(e,t);return null!==n?t.properties.elements_extra[n]?.data_field:t.properties.elements[e]?.data_field}(t,n)]?.value);const o=function(e,t={}){if(["gcr","radio","checkbox","select","thumbs","category"].indexOf(t.typeName)>-1){const n=Pn(e,t);return null!==n?t.properties.elements_extra[n]?.value??t.properties.elements_extra[n]?.label:t.properties.elements[e]?.value??t.properties.elements[e]?.label}return String(e)}(t,n);return r(o,e.value)});return"&&"!==t?.concat?a?.length>0:a?.length===t.testValue?.length}function jn({target:e="",state:t={}}){const n=String(e).split("_"),o=/^[a-z]+$/i.test(n[n.length-1])?n[n.length-2]:n[n.length-1];return"thanks-page"===n[0]?n[1]:Number(t[o]?.id)}function Ln(e={}){return Object.keys(e).reduce((t,n)=>(yn(n)&&(t[n]={...e[n]},t[n].value=""),t),{})}function Dn({state:e,block:t={},rules:n=[],layout:o}){if(!t.rules?.length)return{newState:e};let r=!1,a=!1;const i={};return function(e=[]){const t=[],n=[];for(let o=0;o<e.length;o++){const r=e[o];r?.condition?.always?n.push(r):t.push(r)}return[...t,...n]}(n).forEach(({action:n={},condition:s={}}={})=>{if("submit"!==n.action){if(["hide","show"].indexOf(n.action)>-1)n.targets.forEach(o=>{const r=jn({target:o,state:e});if(!r)return;const l=In({state:e[t.id],condition:s,block:t,didExecuteLogic:a}),c="show"===n.action,u=l?c:!c;l&&(a=!0),i[r]={isVisible:u,...!u&&{value:"",...Ln(e[r]??{})}}});else if("jump_to"===n.action){const r=jn({target:n.target,state:e});if(!r)return;if(In({state:e[t.id],condition:s,block:t,didExecuteLogic:a})){a=!0;const e=o.indexOf(r),n=o.indexOf(Number(t.id)),s=e<n;return void(s?o.slice(e,n+1):o.slice(n+1,e)).forEach((e,t)=>{i[e]={...!s&&{isVisible:!1},showInConvo:!!s&&0===t,isSkipped:!1,value:""}})}}}else r=In({state:e[t.id],condition:s,block:t})}),{updateFromLogic:i,submitFromLogic:r,newState:An(e,i)}}function An(e,t){const n={};try{Object.keys(t||{}).forEach(o=>{e[o]&&(n[o]={...e[o],...t[o]})})}catch(e){}return{...e,...n}}function Vn({state:e,layout:t,surveyRules:n={}}){const o={};return Object.keys(n).forEach(r=>{const{action:a}=n[r]??{};if(function(e={}){const t=Tn[e?.source]?.(e?.key)??null;return!!t&&(Array.isArray(e.values)&&e.values.length>0?e.values.filter(e=>t===e).length>0:"string"==typeof e.value&&e.value.length>0?t===e.value:t)}(a))if(["hide","show"].indexOf(a.action)>-1)a.targets.forEach(t=>{const n=jn({target:t,state:e});if(!n)return;const r="show"===a.action;o[n]={isVisible:r,...!r&&{value:""}}});else{if("jump_to"===a.action){const n=jn({target:a.target,state:e});if(!n)return;const r=t.indexOf(n);return void t.slice(0,r).forEach((e,t)=>{o[e]={isVisible:!1,showInConvo:!1,isSkipped:!1,value:""}})}if("prefill"===a.action){const t=function(e={}){return Tn[e?.source]?.(e?.key)??null}(a);return void a.targets.forEach(n=>{const r=jn({target:n,state:e});r&&(o[r]={...o[r]&&{...o[r]},value:t,wasPrefilled:!0})})}}}),{newState:An(e,o),updateFromLogic:o}}const Mn={js_var:(e,t)=>Et(e),url_location:(e,t)=>Object.keys(t).filter(e=>Dt().indexOf(e)>-1)[0],url_query:e=>it(e,At()),cookie:e=>lt(e)};function Rn({config:e,value:t,initialConfig:n}){const{translation:o}=e.properties;return o?.useTranslation?"default"===t?n:o[t]?J().all([{},e,Ct(o[t]),{translationSet:t}]):n:n}function Kn(e={}){const t=function({languageTest:e={},useTranslation:t,useToggle:n,...o}={}){if(t)return"cookie"===e.type&&"?"===Mn[e.type](e.param)?.charAt(0)?Object.keys(o).filter(t=>Mn[e.type](e.param).indexOf(t)>-1)[0]:Mn[e.type](e.param,o)}(e.properties?.translation??{});return t?Rn({config:e,initialConfig:e,value:t}):e}function Bn(e,t){if("set_language"===t.type){const n=Rn({config:e,value:t.payload.value,initialConfig:t.payload.initialConfig});return n?{...n,translationSet:t.payload.value}:{...e,translationSet:null}}return{...e,translationSet:null}}const qn=W({});function Hn({children:e,initialConfig:t,form:n={},multipleIndex:o,...r}){const a=function(e={},t={}){const[n,o]=pe(Bn,Kn(e)),r=ye(t=>{o({type:"set_language",payload:{value:t,initialConfig:e}})},[e]);return de(()=>{t.language&&t.language!==n.translationSet&&r(t.language)},[t.language,n.translationSet,r]),t.config?{...J()(n,t.config),actions:{setLanguage:r}}:{...n,actions:{setLanguage:r}}}(t,n.extra);return w(qn.Provider,{value:{configStore:a,formProps:{...n,multipleIndex:o}}},e)}function Fn(){return _e(qn)}function zn(){const{configStore:e}=Fn();return e}function Un(){const{formProps:e}=Fn();return e}function Wn(){return zn().properties??{}}function Gn(){return Wn().advanced??{}}const Yn=[],Qn=[];function Xn({value:e="",showError:t=!1,data_field:n}){return{value:e,showError:t,data_field:n}}function Zn(e){switch(e.block.typeName){case"screenshot":return function({block:e={}}){return Object.keys(e.properties?.elements??{}).reduce((e,t)=>(e[t]=Xn({}),e),{})}(e);case"website_data":return function({block:e,divName:t,multipleIndex:n}){return Object.keys(e.properties?.elements??{}).reduce((o,r)=>{const a=e.properties.elements[r],i=Kt({type:a.type,value:a.value,divName:t,multipleIndex:n});return o[Number(a.data_field)]=Xn({value:i,data_field:Number(a.data_field)}),o},{})}(e);case"contact":return function({block:e={}}){return Object.keys(e.properties?.elements??{}).reduce((t,n)=>{const o=e.properties.elements[n];return o.show?!o.combine&&o.subelements?(Object.keys(o.subelements).forEach(e=>{const n=o.subelements[e];t[Number(n.data_field)]=Xn({showError:o.required,data_field:Number(n.data_field)})}),t):(t[Number(o.data_field)]=Xn({showError:o.required,data_field:Number(o.data_field)}),t):t},{})}(e);case"matrix":return function({block:e}){return Object.keys(e.properties?.elements??{}).reduce((t,n)=>{const o=e.properties.elements[n];return"object"==typeof o.data_field&&Object.keys(o.data_field).forEach(e=>{const n=o.data_field[e];t[n]=Xn({data_field:n})}),t},{})}(e);default:return function({block:e}){return Object.keys(e.properties?.elements??{}).reduce((t,n)=>{const o=e.properties.elements[n];return o.data_field&&(t[Number(o.data_field)]=Xn({data_field:Number(o.data_field)})),t},{})}(e)}}function Jn({blocks:e={},properties:t={},layout:n=[],divName:o,multipleIndex:r,surveyRules:a,blockRules:i}){const s={},l={},c=[];let u=!1;Object.keys(e).forEach(t=>{const a=e[t],i=s[a.typeName]=(s[a.typeName]??0)+1,p=0===n.indexOf(Number(a.id)),d=hn(a);d.post&&(c.push(a.id),u=d.post),l[t]=function({block:e={},initialValue:t={},isFirst:n,divName:o,multipleIndex:r,numOfType:a}){const{post:i,value:s}=t;var l;return{value:s,id:Number(e.id),data_field:Number(e.data_field),showError:e.properties?.required&&!t.value||!1,focusInvalid:!1,isVisible:!e.properties.hide_on_init,showInConvo:n,typeCount:a,autopost:i,...Zn({block:e,multipleIndex:r,divName:o}),...(l=e.properties?.elements_extra??{},Object.keys(l).reduce((e,t)=>{const n=l[t];return e[n.data_field]=Xn({data_field:Number(n.data_field),isVisible:!1}),e},{}))}}({block:a,initialValue:d,isFirst:p,numOfType:i,divName:o,multipleIndex:r}),l[a.uuid]=l[t]}),Object.keys(t.thanksPage?.elements||{}).forEach(e=>{const n=t.thanksPage.elements[e];l[n.genID]={isVisible:!n.hide_on_init}}),t.advanced?.recaptcha?.siteKey&&(l.recaptcha={id:"recaptcha",value:"",isVisible:!0,showError:!0}),l[mn]={id:mn,value:"",isVisible:!0,showError:!1,honey:!0};const{newState:p,updateFromLogic:d}=Vn({state:l,layout:n,surveyRules:a});if(Object.keys(d).length>0&&c.push(...Object.keys(d)),c.length>0){const t={...p};let o=!1;return c.forEach(r=>{const{submitFromLogic:a,newState:s}=Dn({state:t,block:e[r],rules:i[r],layout:n});a&&(o=a),Object.assign(t,s)}),{...t,submitFromLogic:o,lastUpdatedBlock:c.pop(),initialPost:u}}return{...p,lastUpdatedBlock:null,initialPost:!1}}function eo({state:e,extraInputElement:t,extraQuestionElement:n,block:o}){return"checkbox"===o.typeName?Boolean(e[n.data_field].value):e.value===(t.value??t.label)}function to({state:e,value:t="",skip:n,datafieldId:o,block:r={},rules:a=[],layout:i,type:s}){const l=o?{...e[r.id],[o]:{...e[r.id][o],inputSet:!0,wasPrefilled:!1,value:t,...n&&{isSkipped:!0}}}:{...e[r.id],inputSet:!0,wasPrefilled:!1,value:t,...n&&{isSkipped:!0}},c=function(e={}){return e.properties?.elements_extra?e.properties.elements_extra[Object.keys(e.properties.elements_extra).shift()]:null}(r),u=function(e={}){return e.properties?.elements_extra?e.properties.elements_extra[Object.keys(e.properties?.elements_extra).pop()]:null}(r),p=u?{...l,[u.data_field]:{...l[u.data_field],isVisible:eo({state:l,extraInputElement:u,extraQuestionElement:c,block:r})}}:l,d=$n({state:p,datafieldId:o,block:r,allowedEmails:Yn}),m={...e,[r.id]:{...p,..."contact"!==r.typeName&&{showError:!d.valid,errorReason:d.reason},..."contact"===r.typeName&&{[o]:{...p[o],showError:!d.valid,errorReason:d.reason}}},lastUpdatedBlock:r.id},{newState:f,submitFromLogic:h}=Dn({state:m,block:r,rules:a,layout:i});return{...f,action:`${s}-${xt()}`,submitFromLogic:h}}function no({state:e,blockRules:t,blocks:n,layout:o,type:r}){const a=o.filter(e=>{const t=n[e];return-1===un.indexOf(t.typeName)}),i=_n({layout:a,blockState:e,blocks:n}),s=t[i],{newState:l}=Dn({state:e,block:n[i],rules:s,layout:a}),c=function({layout:e,blockState:t,blocks:n}){const o=_n({layout:e,blockState:t,blocks:n}),r=e.indexOf(o);return e.slice(r+1,e.length).filter(e=>{const o=t[e],r=n[e];return o.isVisible&&-1===un.indexOf(r.typeName)})[0]}({layout:a,blockState:l,blocks:n});return{...l,[c]:{...l[c],showInConvo:!0},action:`${r}-${xt()}`}}function oo(e,t){switch(t.type){case"set_value":case"set_nested_value":return to({state:e,...t.payload,type:t.type});case"set_honeybot_value":return{...e,[mn]:{...e[mn],value:t.payload.value},type:t.type};case"validate_block":const n=$n({state:e[t.payload.block.id],datafieldId:t.payload.datafieldId,block:t.payload.block,allowedEmails:Yn});return{...e,[t.payload.block.id]:{...e[t.payload.block.id],..."contact"!==t.payload.block.typeName&&{showError:!n.valid,errorReason:n.reason},..."contact"===t.payload.block.typeName&&{[t.payload.datafieldId]:{...e[t.payload.block.id][t.payload.datafieldId],showError:!n.valid,errorReason:n.reason}}}};case"set_business_email_loading":return{...e,[t.payload.block.id]:{...e[t.payload.block.id],..."contact"!==t.payload.block.typeName&&{isLoading:t.payload.loading},..."contact"===t.payload.block.typeName&&{[t.payload.datafieldId]:{...e[t.payload.block.id][t.payload.datafieldId],isLoading:t.payload.loading}}}};case"set_skip":return to({state:e,...t.payload,skip:!0,type:t.type});case"set_show_next_convo":return no({state:e,...t.payload,type:t.type});case"reset_form":return{...t.payload,action:t.type};default:return e}}const ro=dt(function({action:e,dispatch:t,domain:n,customDomain:o}){const{type:r,payload:{value:a,block:i={},datafieldId:s}={}}=e;"set_value"!==r&&"set_nested_value"!==r||(i.properties?.business_only||i.properties?.elements?.email?.business_only)&&(i.properties?.elements?.email?.business_only&&s!==i.properties?.elements?.email?.data_field||a.length<5||-1===a.indexOf("@")||Yn.indexOf(a)>-1||Qn.indexOf(a)>-1||(t({type:"set_business_email_loading",payload:{block:i,datafieldId:s,loading:!0}}),Wt({domain:n,customDomain:o}).validateBusinessEmail({email:a}).then(e=>{t({type:"set_business_email_loading",payload:{block:i,datafieldId:s,loading:!1}}),200===e.code&&(e.allowMail?Yn.push(a):Qn.push(a),t({type:"validate_block",payload:{value:a,block:i,datafieldId:s}}))})))},500);function ao({blocks:e,properties:t,layout:n,blockRules:o,surveyRules:r,...a}){const{multipleIndex:i,divName:s,formKey:l,cookieTime:c,domain:u,customDomain:p,extra:d}=Un(),m=function(e,t){return n=>{const{block:o={},value:r,datafieldId:a}=n?.payload??{};o.properties?.setScoreCookie&&("checkbox"!==o.typeName?ct(`MSanswer.${e}.${o.id}`,r,t):Object.keys(o.properties?.elements??{}).forEach(n=>{const r=o.properties?.elements[n];r.data_field===a&&ct(`MSanswer.${e}.${o.id}`,r.label,t)}))}}(l,c),f=ye((e,t,n)=>ro({action:e,dispatch:n,domain:u,customDomain:p}),[u,p]),h=ye((t,r,a)=>{if("validate_block"!==t.type)return;const{block:i}=t.payload;if(!i.properties?.business_only)return;r[i.id].showError||a({type:"set_show_next_convo",payload:{blocks:e,layout:n,blockRules:o}})},[e,n,o]),y=he(()=>Jn({blocks:e,layout:n,divName:s,multipleIndex:i,properties:t,surveyRules:r,blockRules:o}),[e,n,s,i,t,r]),[_,b]=function(e,t,{middleware:n=[],afterware:o=[]}={}){const[r,a]=pe(e,t),i=fe(),s=ye(e=>{n.forEach(t=>t(e,r,s)),i.current=e,a(e)},[n,a,r]);return de(()=>{i.current&&(o.forEach(e=>e(i.current,r,s)),i.current=null)},[o,r,s]),[r,s]}(oo,y,{middleware:[f],afterware:[h,m]});return{..._,actions:{dispatch:b,reset:()=>{b({type:"reset_form",payload:y})}}}}const io=W({});function so({children:e,initialConfig:t,...n}){const o=ao({...t});return w(io.Provider,{value:o},e)}function lo(){return _e(io)}function co({reason:e,text:t={},block:n={}}){return t.errors?.[e]?t.errors[e]:t.defaultErrors?.[e]?t.defaultErrors[e]:t.errors?.required?t.errors.required:t.defaultErrors?.required?t.defaultErrors.required:"This field is required"}function uo({id:e,typeName:t,typeOf:n=0}){const o=lo(),{blocks:r={},text:a={},blockRules:i={},layout:s}=zn(),l=fe({}),c=he(()=>{if("recaptcha"===e)return{id:"recaptcha",typeName:"recaptcha",properties:{}};if(e===mn)return{id:mn,typeName:fn,title:"What is your opinion?",properties:{}};if(e)return r[e]??{};if(t){const e=s?.filter(e=>r[e]?.typeName===t)[n];return r[e]??{}}return{}},[r,e,t,n,s]),u=he(()=>o[c.id]??{},[c?.id,o]),p=he(()=>({setValue:e=>o.actions.dispatch({type:"set_value",payload:{value:e,block:c,rules:i[c.id],layout:s}}),setNestedValue:(e,t)=>o.actions.dispatch({type:"set_nested_value",payload:{value:t,block:c,datafieldId:e,rules:i[c.id],layout:s}}),setHoneyBotValue:e=>{o.actions.dispatch({type:"set_honeybot_value",payload:{value:e}})},skipQuestion:()=>o.actions.dispatch({type:"set_skip",payload:{block:c,blocks:r,layout:s,blockRules:i}})}),[s,o.actions,i,c,r]),d=u.showError?co({reason:u.errorReason,text:a,block:c}):"",m=he(()=>"contact"!==c.typeName?l.current:Object.keys(u).reduce((e,t)=>(isNaN(Number(t))||(e[t]=co({reason:u[t].errorReason,text:a})),e),{}),[c.typeName,u,a]);return{block:c,state:u,errorMessage:d,errorMessages:m,actions:p}}function po(e){return window.innerWidth<=e}function mo(){const{trigger:e,modal:t}=Wn(),{forceType:n,forceButton:o={},forceBreakPoint:r}=Un(),a=function({forceType:e,trigger:t,modal:n}){return e||(n?t?.slider?.type||"modal":"embed")}({forceType:n,modal:t,trigger:e}),i=function({formType:e,forceBreakPoint:t,trigger:n={}}){return t||("slide"===e&&n?.slider?.breakpoint?n.slider.breakpoint:"modal"===e&&n?.button?.breakpoint?n.button.breakpoint:544)}({formType:a,forceBreakPoint:r,trigger:e}),[s,l]=ue(po(i));de(()=>{const e=dt(()=>l(po(i)),100);return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[i]);const c=o?.buttonStyleWeb||e.buttonStyleWeb||"label",u=o?.buttonStyleMobile||e.buttonStyleMobile||c,p=s?u:c,d=function({formType:e,trigger:t={},forceButton:n={},isPastBreakpoint:o}){return"slide"===e?o&&(n?.position_mobile||t?.slider?.position_mobile)?n?.position_mobile||t?.slider?.position_mobile:n?.position||t?.slider?.position||"bottom-right":"modal"===e?o&&(n?.position_mobile||t?.button?.position_mobile)?n?.position_mobile||t?.button?.position_mobile:n?.position||t?.button?.position||"right":void 0}({formType:a,isPastBreakpoint:s,trigger:e,forceButton:o});return{formType:a,breakpoint:i,position:d,isPastBreakpoint:s,buttonType:p}}function fo(e){const t=window.innerWidth;return t>1201?"slide"===e?"425px":"40%":t>992&&t<1201?"slide"===e?"400px":"45%":t<993&&t>768?"slide"===e?"360px":"60%":t<769&&t>544?"slide"===e?"360px":"70%":t<545&&t>360?"slide"===e?.8*window.innerWidth+"px":"90%":"slide"===e?window.innerWidth-24+"px":"90%"}function ho(e){let t="";return e<360&&(t="mop-view-xs"),e<400&&(t+=" mop-view-sm"),e<480&&(t+=" mop-view-md"),t+=" mop-view-lg",t}function yo({feedbackButtonRef:e,formOpen:t,formWidth:n}){const{position:o,formType:r,buttonType:a}=mo(),i={position:"fixed",zIndex:2000000001,backfaceVisibility:"hidden",transition:"opacity .3s, transform .3s, visibility .225s","backface-visibility":"hidden"};if("slide"===r){i.boxShadow=t?"0px 5px 40px rgb(0,0,0,0.16)":"none","float"===a&&(i.opacity=t?1:0);const r=function({button:e,buttonType:t,position:n,formWidth:o}){const r=e=>e>24?24:e;if(!e)return 0;const a=e?.getBoundingClientRect();if("float"!==t||(i=a,!i||0===i?.width&&0===i?.height&&0===i?.top&&0===i?.bottom&&0===i?.left&&0===i?.right&&0===i?.x&&0===i?.y))return 0;var i;switch(n){case"right":const e=window.innerWidth-a.left+r(window.innerWidth-a.right);return e+o>window.innerWidth?12:e;case"left":const t=a.right+r(a.left);return t+o>window.innerWidth?12:t;default:return window.innerHeight-a.top+r(window.innerHeight-a.bottom)}}({formWidth:n,button:e.current,buttonType:a,position:o});return{formOffset:r,wrapStyle:{...i,..._o({formOffset:r,formOpen:t,position:o})}}}return"modal"===r?{wrapStyle:{...i,top:0,left:0,right:0,bottom:0,overflowY:t?"auto":"hidden","-webkit-overflow-scrolling":"touch",backfaceVisibility:"hidden",width:"100%",minHeight:"100%",visibility:t?"visible":"hidden",pointerEvents:t?"auto":"none",zIndex:t?1999999999:-1}}:{wrapStyle:i}}function _o({formOpen:e,formOffset:t,position:n}){switch(n){case"right":return{top:"10%",top:"calc(10% + 5px)",bottom:"auto",left:"auto",right:e?t:0,transform:e?"translateX(0)":"translateX(100%)","-webkit-transform":e?"translateX(0)":"translateX(100%)"};case"bottom-right":return{top:"auto",bottom:e?t:"-5px",left:"auto",right:"12px",transform:e?"translateY(0)":"translateY(100%)","-webkit-transform":e?"translateY(0)":"translateY(100%)"};case"bottom-left":return{top:"auto",bottom:e?t:"-5px",left:"12px",right:"auto",transform:e?"translateY(0)":"translateY(100%)","-webkit-transform":e?"translateY(0)":"translateY(100%)"};case"left":return{top:"10%",top:"calc(10% + 5px)",left:e?t:0,right:"auto",transform:e?"translateX(0)":"translateX(-100%)","-webkit-transform":e?"translateX(0)":"translateX(-100%)"};default:return{}}}function bo(e){const{layout:t,blocks:n,properties:o}=zn(),r=o.advanced?.recaptcha?.siteKey;return he(()=>{const o=[[]];return t.forEach(e=>{"page_break"===n[e].typeName?o[o.length]=[]:o[o.length-1].push(e)}),r&&o[o.length-1].push("recaptcha"),e?o[e-1]:o},[t,n,e,r])}function go(e=[],t){const n=lo(),{blocks:o}=zn(),r=fe(null);return{pageValid:e.every(e=>{const a=n[e],i=o[e]??{};if(!a?.isVisible)return!0;if("contact"===i.typeName){const e=Object.keys(i.properties.elements).every(e=>{const t=i.properties.elements[e];return t.subelements?Object.keys(t.subelements).every(e=>{const n=t.subelements[e];return!a[n.data_field]?.showError}):!a[t.data_field]?.showError});return!t||e||r.current||(r.current=Number(i.id)),e}return t&&a.showError&&!a.value&&!r.current&&(r.current=Number(i.id)),!a.showError}),firstInvalid:r.current}}function vo({block:e,extra1:t,extra2:n}){return"extra"===t&&n?e.properties?.elements_extra?.[n]?.data_field:"name"!==t||e.properties?.elements?.name?.combine?"firstname"===t?e.properties?.elements?.name?.subelements?.firstname?.data_field:e.properties?.elements?.[t]?.data_field:e.properties?.elements?.name?.subelements?.lastname?.data_field}function ko(e=""){return/^UA-/i.test(e)}function wo(e=""){return/^G-/i.test(e)}function xo(e=""){return wo(e)||ko(e)}function No(){for(const e of Object.keys(window.google_tag_manager??{}))if(xo(e))return e}function Oo(){if(vt(window.dataLayer))for(const e of window.dataLayer)if("config"===e[0]&&xo(e[1]))return e[1]}function So(){return window.ga.getAll()[0].get("trackingId")}function $o(){const e=[No,Oo,So];for(const t of e)try{if(t())return t()}catch(e){}return null}function Eo(){window.gtag&&window.gtag(arguments),vt(window.dataLayer)&&window.dataLayer.push(arguments)}function Co(){return window.gtag||vt(window.dataLayer)}const To={send_page_view:!1,cookie_prefix:"mop",cookie_expires:31536e3,allow_google_signals:!1},Po={name:"mopinion",cookieExpires:31536e3,cookieName:"mop_ga"};class Io{constructor({advanced:e,disablePost:t,formKey:n,formName:o,metricsDomain:r}={}){this.disablePost=t,this.surveyKey=n,this.surveyName=o,this.metricsDomain=r,this.customGaTracker="",this.eventProps={},this.feedback=[],e?.logMetrics&&(this.metrics=!0),e?.analytics_integration?.load_analytics&&(this.gaId=e.analytics_integration.GA_TRACKING_ID,this.gaId||(this.gaId=$o()),this.gaSendFeedback=Boolean(e.analytics_integration.sendFeedback),this.gaId&&(qt(`Tracking Analytics ${this.gaId}`),this.initGa()))}setEventProps=e=>(this.eventProps=e,this);setFeedback=e=>(this.feedback=e,this);send=e=>{this.disablePost?qt("Tracking disabled",e,this.eventProps):(this.metrics&&this.sendMetrics(e,this.eventProps),this.gaId&&this.sendGa({action:e},this.eventProps))};sendFeedback=()=>{this.gaId&&this.gaSendFeedback&&this.sendFeedbackGa(this.feedback)};sendMetrics=(e,t)=>{lt("SQsession")||ct("SQsession",Ot(5),.5/24),setTimeout(()=>{const n={project_token:this.surveyKey,datetime:new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString(),session:lt("SQsession"),url:window.location.href,url_title:document.title,url_referrer:document.referrer,host:window.location.hostname,user_agent:navigator.userAgent,browser_language:navigator.language||navigator.userLanguage,viewport:`${window.innerWidth}x${window.innerHeight}`,Dextra:{eventName:e,eventProps:{...t}}};qt("Send Metrics",n);const{promise:o}=Ft(`https://${this.metricsDomain}/datapoints`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});o.then(e=>qt(e)).catch(e=>qt(e))},300)};getGaTracker=(e="")=>this.customGaTracker?`${this.customGaTracker}.${e}`:e;initGa=()=>{var e;!Co()&&wo(this.gaId)?pt(`https://www.googletagmanager.com/gtag/js?id=${e=this.gaId}`,{onLoad:()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",e,To)}}):Co()&&this.gaId!==$o()?Eo("config",this.gaId,To):window.ga&&ko(this.gaId)&&this.gaId!==$o()?(this.customGaTracker=Po.name,window.ga("create",this.gaId,Po),window.ga(this.getGaTracker("set"),"allowAdFeatures",!1)):!window.ga&&ko(this.gaId)&&(this.customGaTracker=Po.name,function(e,t,n,o,r,a,i){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,a=t.createElement(n),i=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(a,i)}(window,document,"script",0,"ga"),window.ga("create",this.gaId,Po),window.ga(this.getGaTracker("set"),"allowAdFeatures",!1))};isNonInteractionEvent=(e,t={})=>{const{trigger_method:n}=t;return["form shown"].indexOf(e.toLowerCase())>-1&&["proactive"].indexOf(n)>-1};sendGa=({action:e,label:t,categoryExtra:n,feedbackQuestion:o,feedbackValue:r},a={})=>{const i=`Mopinion Form - ${this.surveyName}`;if(qt("Send Analytics",e),Co()||wo(this.gaId))!function(e){if(Co())return void e();let t=0;const n=setInterval(()=>{Co()&&(e(),clearInterval(n)),t>10&&clearInterval(n),t++},100)}(()=>{Eo("event",e,{mop_form_name:i,send_to:this.gaId,...o&&r&&{mop_feedback_question:o,mop_feedback_value:r},...this.isNonInteractionEvent(e,a)&&{non_interaction:!0}})});else{const o=`Mopinion Form - ${this.surveyName}${n||""}`;!function(e=()=>{}){if(window.ga)return e();let t=0;const n=setInterval(()=>{window.ga&&(e(),clearInterval(n)),t>10&&clearInterval(n),t++},100)}(()=>{window.ga(this.getGaTracker("send"),{hitType:"event",eventCategory:o,eventAction:e,...t&&{eventLabel:t},...this.isNonInteractionEvent(e,a)&&{nonInteraction:!0}})})}};sendFeedbackGa=(e=[])=>{e.forEach((e,t)=>{e.title&&(Co()||wo(this.gaId)?this.sendGa({action:"Feedback data",feedbackQuestion:`Q${t+1} - ${e.title}`,feedbackValue:e.value}):this.sendGa({action:`Q${t+1} - ${e.title}`,label:e.value,categoryExtra:" - Feedback"}))})}}function jo(){const{pageMap:e,properties:t,blocks:n}=zn(),{activePage:o,formIsCompleted:r}=Wo(),a=Number(Object.keys(e).pop()),{actions:i,...s}=lo();if(r)return 100;if(t.conversational){const e=Object.keys(s).filter(e=>{const t=n[e]??{},o=s[e];return!isNaN(e)&&o.isVisible&&-1===sn.indexOf(t.typeName)}),t=Object.keys(s).filter(e=>{const t=n[e]??{},o=s[e];return!isNaN(e)&&(o.value||o.isSkipped)&&o.isVisible&&-1===sn.indexOf(t.typeName)});return Object.keys(s).filter(e=>{const t=n[e],o=s[e];return"ending"===t?.typeName&&o.isVisible&&o.showInConvo})[0]?100:Math.round(t.length/e.length*100)}return Math.round((o-1)/a*100)}function Lo({addExtraData:e,noOpenOrPIIFeedback:t,excludeScreenShotDom:n,addHoney:o}={}){const r=lo(),{webView:a,triggerMethod:i}=Un(),{blocks:s,properties:l,translationSet:c,layout:u}=zn(),{sendOptions:p}=zn(),{feedbackId:d,customerId:m}=Wo(),f=jo(),h=p.data.reduce((o,i)=>{const{field:l,type:c,label:u}=i,[p,d,m]=l.replace(/([^1-9]+)/,"").split("_"),f=s[p],h=function({block:e={},state:t={},extra1:n,extra2:o,type:r}){if("screenshot"===e.typeName&&t[r])return t[r]?.value;if("matrix"===e.typeName)return t[e.properties?.elements?.[n]?.data_field?.[o]]?.value;if(!n&&!o)return t.value;if("extra"===n&&o)return t[e.properties?.elements_extra?.[o]?.data_field]?.value;if("name"===n&&!e.properties?.elements?.name?.combine)return t[e.properties?.elements?.name?.subelements?.lastname?.data_field]?.value;if("firstname"===n)return t[e.properties?.elements?.name?.subelements?.firstname?.data_field]?.value;if("checkbox"===e.typeName)return t.isVisible?t[e.properties?.elements?.[n]?.data_field]?.value||!1:"";return t[e.properties?.elements?.[n].data_field]?.value}({block:f,state:r[p],extra1:d,extra2:m,type:c}),y={label:u,value:h,type:a?c.replace("image","mobile_image"):c,...e&&{title:f.title,id:f.id,blockType:f.typeName,field:l}};return t&&(["input","textarea","screenshot","website_data"].indexOf(f.typeName)>-1||["customer","id","url","title","firstname","lastname","phone","email"].indexOf(c)>-1||"Page title"===u)||n&&["screenshot"].indexOf(f.typeName)>-1&&["dom"].indexOf(c)>-1||o.push(y),o},[]),y=function(e=!1){const t=e?window.metaData:window.__mopinionMetaData;return Object.keys(t??{}).map(e=>({label:e,value:t[e],type:"category"}))}(a),_=function(){const e=[!0===window.navigator.webdriver&&"webdriver",(!Array.isArray(window.navigator.languages)||0===window.navigator.languages.length)&&"no languages","visible"!==document.visibilityState&&"document not visible",/HeadlessChrome|puppeteer|phantomjs|selenium|curl|python/i.test(window.navigator.userAgent||"")&&"suspicious user agent",/Microsoft Office|SafeLinks|Microsoft-WebDAV/i.test(window.navigator.userAgent||"")&&"microsoft crawler",(0===window.screen.width||0===window.innerWidth)&&"zero width"].filter(Boolean);return{isBot:e.length>0,reason:e.join(", ")}}(),b=nn(),g=r[mn]?.value||(b?"":"no_user_interaction")||_.reason;return[...h,{value:window.navigator.userAgent,type:"agent",label:"User Agent"},{value:Dt(),type:"url",label:"url"},{value:document.title,type:"category",label:"Page title"},{value:1,type:"role",label:"Role"},{value:l.name,type:"category",label:"Survey"},{value:`${window.innerWidth}x${window.innerHeight}`,type:"viewport",label:"Viewport"},{value:i,type:"category",label:"Form trigger"},{value:f,type:"form_completion",label:"Form completion percentage"},{value:d,type:"id",label:"Survey ID"},...c?[{value:c,type:"category",label:"Translation"}]:[],...y,...l.advanced.add_contentsquare?[{value:Et("CS_CONF.integrations_handler.mopinion"),type:"category",label:"Contentsquare session recording"}]:[],...l.conversational?[{value:Do(u.filter(e=>r[e]?.isVisible&&r[e]?.showInConvo&&-1===un.indexOf(s[e]?.typeName)).map(e=>s[e]).pop()),type:"category",label:"Ending element"}]:[],...!1!==p.force_customer?[{value:m,type:"customer",label:p.force_customer.label}]:[],...o&&g?[{value:"bot_detected: "+g,type:"honeybot",label:"honeybot"}]:[]]}function Do(e={}){if(!e?.typeName)return"";switch(e?.typeName){case"ending":case"link":return e.properties.description;default:return e.title}}function Ao(){const{properties:e,pageMap:t}=zn(),{activePage:n,formType:o}=Wo(),{disablePost:r,formKey:a,triggerMethod:i,domain:s,metricsDomain:l}=Un(),c=jo(),u=Lo({addExtraData:!0,noOpenOrPIIFeedback:!0,excludeScreenShotDom:!0}),p=he(()=>new Io({advanced:e?.advanced??{},disablePost:r,formKey:a,formName:e.name,metricsDomain:l}),[e?.advanced,r,a,e.name,l]);return p.setEventProps({trigger_method:i,form_completion_percentage:c,active_page:n,page_count:Object.keys(t).pop(),form_type:o,subdomain:s,organisation_id:e.organisation_id,project_id:e.project_id}).setFeedback(u),{sendEvent:p.send,sendFeedback:p.sendFeedback}}function Vo(){const{formKey:e,triggerMethod:t}=Un(),{properties:n}=zn(),o=Lo({addExtraData:!0,excludeScreenShotDom:!0}),r=ye((r,a={})=>{const i={event:r,key:e,formName:n.name,triggerMethod:t,...["feedback_sent","next","question_answered"].indexOf(r)>-1&&{feedback:o},...a};gt(i),si[r]?.forEach(e=>{try{e(i)}catch(e){}})},[e,t,n,o]);return r}function Mo(){const e=Wo(),t=lo();return ye(()=>{t.actions.reset(),e.actions.reset()},[])}function Ro(e){const t=lo(),{blocks:n}=zn(),o=bo();for(let r=e;r<=o.length;r++){const e=o[r],a=e?.some(e=>t[e]?.isVisible&&-1===un.indexOf(n[e]?.typeName));if(a)return r+1}return null}const Ko=W({});function Bo(e,t){switch(t.type){case"toggle_open":return{...e,action:`${t.type}-${xt()}`,formOpen:void 0!==t.payload?t.payload:!e.formOpen};case"start_form":return{...e,action:`${t.type}-${xt()}`,formIsOnOpenerPage:!1};case"set_completed":return{...e,action:`${t.type}-${xt()}`,formIsCompleted:!0,loading:!0};case"set_loading_done":return{...e,action:`${t.type}-${xt()}`,loading:!1};case"reset":return{...e,action:`${t.type}-${xt()}`,...t.payload};case"toggle_screenshot":return{...e,action:`${t.type}-${xt()}`,screenshotActive:e.payload??!e.screenshotActive};case"update_screenreader_helper":return{...e,action:`${t.type}-${xt()}`,screenReaderHelperText:t.payload??""};case"update_conversational_focus_state_helper":return{...e,action:`${t.type}-${xt()}`,conversationalFocusStateValue:t.payload??""};case"update_last_key_pressed":return{...e,action:`${t.type}-${xt()}`,lastKeyPressed:t.payload??null};case"set_show_errors":return{...e,action:`${t.type}-${xt()}`,showErrors:!0};case"increment_page":return{...e,action:`${t.type}-${xt()}`,showErrors:!1,activePage:t.payload?.to??e.activePage+1,direction:"next"};case"decrement_page":return{...e,action:`${t.type}-${xt()}`,showErrors:!1,activePage:t.payload?.to??e.activePage-1,direction:"prev"};case"to_page":return{...e,showErrors:!1,activePage:Number(t.payload),direction:"next"};case"handle_show_nav":return{...e,showNavAutopostPages:-1===e.showNavAutopostPages.indexOf(e.activePage)?[...e.showNavAutopostPages,e.activePage]:e.showNavAutopostPages};case"handle_autoskip":return{...e,action:`${t.type}-${xt()}`,...t.payload.pageValid&&!t.payload.isLastPage&&!t.payload.extraInputElementIsVisible&&!t.payload.lastVisibleElementIsShowButtonType&&{activePage:t.payload.nextPageWithVisibleBlocks},...!t.payload.pageValid&&{showErrors:!0},...t.payload.pageValid&&t.payload.isLastPage&&!t.payload.extraInputElementIsVisible&&!t.payload.lastVisibleElementIsShowButtonType&&{formIsCompleted:!0,loading:!0}};case"set_hide_landingspage_form":return{...e,action:`${t.type}-${xt()}`,hideLandingPageForm:!0};default:return e}}function qo(){const{isCompleted:e,webView:t}=Un(),{properties:n,pageMap:o,text:r}=zn(),{formType:a,breakpoint:i,position:s,isPastBreakpoint:l,buttonType:c}=mo(),u=Ro(0),[p,d]=pe(Bo,{action:"",activePage:u,formIsOnOpenerPage:Boolean(n?.introPage),formIsCompleted:e,formOpen:"embed"===a,screenshotActive:!1,hideLandingPageForm:!1,direction:"next",showNavAutopostPages:[],screenReaderHelperText:null,conversationalFocusStateValue:"",lastKeyPressed:null}),m=function(e){const{formKey:t,feedbackId:n,multipleIndex:o}=Un(),[r,a]=Jt(`${t}.fid.${o??0}`,()=>n?function(e){const t=e.split(".");return t[1]?t[1]:t[0]}(n):Ot(10));return de(()=>{e&&a(Ot(10))},[e]),r}(p.formIsCompleted),f=function(e){const{formKey:t,multipleIndex:n}=Un(),[o,r]=Jt(`${t}.cid.${n??0}`,Ot(10));return de(()=>{e&&r(Ot(10))},[e]),o}(p.formIsCompleted);!function(e=()=>{}){const{extra:t}=Un(),{actions:n}=lo(),{layout:o,blocks:r,blockRules:a}=zn();de(()=>{t?.values&&Object.keys(t.values??{}).forEach((e="")=>{const[i,s,l]=e.replace(/([^1-9]+)/,"").split("_");!i||s||l?i&&n.dispatch({type:"set_nested_value",payload:{block:r[i],datafieldId:vo({block:r[i],extra1:s,extra2:l}),value:t.values[e],rules:a[i],layout:o}}):n.dispatch({type:"set_value",payload:{block:r[i],value:t.values[e],rules:a[i],layout:o}})})},[t,r,a,o]),de(()=>{t?.page&&e({type:"to_page",payload:t.page})},[t])}(d);const h=fe(null),y=fe(null),_=fe(null),b=fe(null),g=fe(null),v=fe(null),k=fe(null),w=fe(null),x=fe(null),N=fe(null),O=fe(null),{formWidth:S,widthClass:$,clientWidth:E}=function({formType:e,contentDivRef:t,webView:n}){const o=n||"embed"===e,[r,a]=ue(fo(e)),[i,s]=ue(t.current?.clientWidth),l=Yt(e);return de(()=>{const n=dt(()=>{const n=fo(e);n!==r&&a(n),s(t.current?.clientWidth)},100);return window.addEventListener("resize",n),l!==e&&n(),()=>{window.removeEventListener("resize",n)}},[r,l,e,t,o]),{formWidth:r,widthClass:ho(t.current?.clientWidth||i),clientWidth:i}}({formType:a,contentDivRef:h,webView:t}),{wrapStyle:C,formOffset:T}=yo({feedbackButtonRef:y,formWidth:E,formOpen:p.formOpen});!function({formType:e,formOpen:t,isMultiple:n,multipleIndex:o}){const{formKey:r}=Un(),{actions:a,...i}=zn(),{actions:s,...l}=lo();de(()=>{try{n?(ui[r]._multiple||(ui[r]._multiple=[]),ui[r]._multiple[o]={_state:l},ui[r]._formOpen=t,ui[r]._formType=e,ui[r]._config=i):(ui[r]._formOpen=t,ui[r]._formType=e,ui[r]._config=i,ui[r]._state=l)}catch(e){}},[t,e,r,i,l,n,o])}({...p,formType:a});const P=Ro(p.activePage),I=function(e){const t=lo(),{blocks:n}=zn(),o=bo();for(let r=e-2;r>=0;r--){const e=o[r],a=e?.some(e=>t[e]?.isVisible&&-1===un.indexOf(n[e]?.typeName));if(a)return r+1}return null}(p.activePage);return{...p,feedbackId:m,customerId:f,formType:a,breakpoint:i,position:s,isPastBreakpoint:l,buttonType:c,formWidth:S,widthClass:$,wrapStyle:C,formOffset:T,contentDivRef:h,feedbackButtonRef:y,formBodyRef:_,closeButtonRef:b,shiftFocusToTopRef:k,firstFocusableBlockRef:x,brandingRef:g,actionButtonRef:v,screenshotButtonRef:w,initialVisiblePage:u,conversationalDummyFocusBlockRef:N,currentConversationalFocusRef:O,actions:{dispatch:d,toggleForm:()=>{d({type:"toggle_open"})},toggleScreenshot:e=>{d({type:"toggle_screenshot",payload:e})},updateScreenReaderHelper:e=>{d({type:"update_screenreader_helper",payload:e})},updateLastKeyPressed:e=>{d({type:"update_last_key_pressed",payload:e})},startForm:()=>{d({type:"start_form"})},nextPage:()=>{const e=Number(Object.keys(o).pop());p.activePage!==e&&P&&d({type:"increment_page",payload:{to:P}}),P||d({type:"set_completed"}),P&&setTimeout(()=>{Vt(x?.current?.querySelector("input, textarea, .ui-stars-star, .nice-select, a, .section-screenshot, .btn.btn-next, .btn.btn-submit"))},100)},prevPage:()=>{I&&(d({type:"decrement_page",payload:{to:I}}),Vt(x?.current?.querySelector("input, textarea, .ui-stars-star, .nice-select, a, .section-screenshot, .btn.btn-next, .btn.btn-submit"),100))},reset:()=>{d({type:"reset",payload:{activePage:1,formIsOnOpenerPage:Boolean(n?.introPage),formIsCompleted:!1,showErrors:!1,direction:"next",showNavAutopostPages:[]}})},postFeedback:()=>{d({type:"set_completed"})},handleWCAGkeyEvents:e=>{"Escape"===e.key&&d({type:"toggle_open"}),e.shiftKey&&["Enter","Space"].indexOf(e.code)>-1&&e.stopPropagation()},handleConversationalFocus:e=>{d({type:"update_conversational_focus_state_helper",payload:e?r?.wcag?.chatbotTypingHelperText??"The chatbot is typing":""}),setTimeout(()=>{d({type:"update_last_key_pressed",payload:null})},e?500:0),e?Vt(N.current):Vt(O?.current?.querySelector("button, a, input, textarea"),100)}}}}function Ho(e,t){const{action:n}=Wo();zo(n,e,t)}function Fo(e,t){const{action:n}=lo();zo(n,e,t)}function zo(e,t,n){const o=Yt(e),[r,a]=e?.split("-")??"",[i,s]=o?.split("-")??"";de(()=>{r&&r===t&&a!==s&&n()},[r,a,i,s,t,n])}function Uo(){const{formOpen:e,cookieTime:t,formKey:n,webView:o}=Un(),r=Mo(),a=function(){const{blocks:e,layout:t,properties:n}=zn(),{actions:o,...r}=lo(),{formIsCompleted:a}=Wo();if(!n.conversational)return!1;if(a)return!0;if(Object.keys(r).filter(t=>{const n=e[t],o=r[t];return"ending"===n?.typeName&&o.isVisible&&o.showInConvo})[0])return!0;const i=t.filter(t=>{const n=e[t],o=r[t];return-1===un.indexOf(n.typeName)&&o.isVisible}).pop(),s=e[i]??{},l=r[i]??{};return l.showInConvo&&sn.indexOf(s.typeName)>-1||l.showInConvo&&(l.value||l.isSkipped)}();!function(e,t){const{openAction:n}=Un();zo(n,e,t)}("form_open",()=>{null!==e&&setTimeout(()=>{y({type:"toggle_open",payload:e})})});const{properties:i,pageMap:s,blocks:l,layout:c,blockRules:u}=zn(),p=lo(),{request:d}=function(){const{formKey:e,domain:t,feedbackDomain:n,disablePost:o,multipleIndex:r}=Un(),{formIsCompleted:a,feedbackId:i}=Wo(),{sendOptions:s,properties:l}=zn(),c=bo(),u=Lo({addHoney:!0}),[p,d]=Jt(`${e}.pid.${r??0}`,null);return Zt({url:`https://${n}/api/1/data`,json:!0,spoof:o,data:{survey:!1,followup:p===i,token:s.token,surveyid:l.id,domain:t,pages:c?.length,data:u.map(e=>({label:e.label?String(e.label).replace('"',""):"",value:"dom"!==e.type&&"selector"!==e.type?St(e.value):e.value,type:e.type}))},onSuccess:e=>{200===e.code&&d(a?null:i)}})}(),m=function(){const{customDomain:e,formKey:t}=Un(),{properties:n}=zn(),o=Lo({addExtraData:!0,excludeScreenShotDom:!0}),[r]=function(e=""){return e.replace(/([^1-9]+)/,"").split("_")}(n.notification_email||""),{block:a,state:i}=uo({id:r}),s="contact"===a.typeName?i[a?.properties?.elements?.email?.data_field]?.value:i.value;return Zt({url:`https://${e}/survey/public/notify-user`,data:{surveyKey:t,email:s,...n.notify?.send&&{feedback:o}},allow:Boolean(s)})}(),f=Ao(),h=Vo(),{actions:{dispatch:y},..._}=Wo(),b=bo(_.activePage),g=Ro(_.activePage),{pageValid:v}=go(b),{block:k,state:w}=function(e=[]){const{blocks:t}=zn(),n=lo();return e.map(e=>({block:t[e]??{},state:n[e]??{}})).filter(({state:e,block:t})=>e.isVisible&&-1===un.indexOf(t.typeName)&&-1===sn.indexOf(t.typeName)).pop()??{block:{},state:{}}}(b),x=uo({typeName:"page_break",typeOf:_.activePage-1}),N=uo({id:p.lastUpdatedBlock}),O=nn(),S=Number(Object.keys(s).pop())===_.activePage||null===g,$=k?.properties?.elements_extra?.[Object.keys(k?.properties?.elements_extra??{}).pop()],E=w?.[$?.data_field]?.isVisible,C=an.indexOf(k?.typeName)>-1,T=-1===["textarea","input","contact","checkbox"].indexOf(k?.typeName)&&-1===_.showNavAutopostPages.indexOf(_.activePage)&&p.lastUpdatedBlock&&p.lastUpdatedBlock===k?.id&&!p.submitFromLogic&&(S&&i.advanced.lastPageAutoPost||x?.block?.properties?.autopost),P="slide"===_.formType?"mopinion-slider-active":"mopinion-modal-active",I=document.querySelector("html"),j=document.body;de(()=>{h("loaded")},[]),de(()=>{"embed"===_.formType&&(h("shown"),f.sendEvent("Form shown"))},[]),de(()=>{1!==_.initialVisiblePage&&O&&d()},[_.initialVisiblePage,O]),Ho("toggle_open",()=>{f.sendEvent("Form "+(_.formOpen?"shown":"hidden")),h(_.formOpen?"shown":"hidden"),_.formOpen&&"embed"!==_.formType?(Vt(_.contentDivRef.current,500),mt([I,j],P)):ft([I,j],P),_.formOpen&&(ct("MSopened",n,t),ct(`MSopened.${n}`,!0,t)),_.formOpen||i.conversational||!_.formIsCompleted||setTimeout(()=>r(),200)}),Ho("toggle_screenshot",()=>{"embed"!==_.formType&&(_.screenshotActive?ft([I,j],P):(mt([I,j],P),Vt(_.screenshotButtonRef.current)))});const L=()=>{try{if("embed"===_.formType&&!Lt())return;_.contentDivRef.current?.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){}};Ho("increment_page",()=>{d(),h("next"),f.sendEvent("Next page"),L()}),Ho("decrement_page",()=>{d(),h("previous"),f.sendEvent("Previous page")});const D=()=>{h("feedback_sent"),f.sendEvent("Feedback sent"),f.sendFeedback(),ct("MSFeedbackSent",n,t),ct(`MSFeedbackSent.${n}`,!0,t),i.notify?.send&&m.request(),i.timeout&&setTimeout(()=>{y({type:"toggle_open",payload:!1})},[Number(i.timeout)])};Ho("handle_autoskip",()=>{v&&d({...S&&{callback:()=>{y({type:"set_loading_done"}),_.formIsCompleted&&D()}}})}),Ho("set_completed",()=>{d({callback:()=>{y({type:"set_loading_done"}),D()}})}),Ho("set_loading_done",()=>{L()});const A=()=>{setTimeout(()=>{if(a)return void y({type:"set_completed"});const e=_n({layout:c,blockState:p,blocks:l}),t=l[e]??{},n=p[e]??{};(!t?.typeName||sn.indexOf(t.typeName)>-1&&-1===pn.indexOf(t.typeName)||!n.showError&&n.value&&!n.wasPrefilled||n.isSkipped)&&p.actions.dispatch({type:"set_show_next_convo",payload:{blocks:l,layout:c,blockRules:u}})})};return de(()=>{i.conversational&&A()},[i.conversational]),Fo("reset_form",()=>{i.conversational&&A()}),Fo("set_show_next_convo",()=>{A()}),Fo("set_skip",()=>{A()}),Fo("set_value",()=>{i.conversational&&(d(),A(),h("question_answered"),f.sendEvent("Question answered"))}),Fo("set_nested_value",()=>{i.conversational&&"website_data"!==N.block?.typeName&&(d(),A(),h("question_answered"),f.sendEvent("Question answered"))}),de(()=>{p.initialPost&&O&&(d(),v&&(T||p.submitFromLogic)&&y({type:"handle_autoskip",payload:{isLastPage:S,pageValid:v,extraInputElementIsVisible:E,lastVisibleElementIsShowButtonType:C,nextPageWithVisibleBlocks:g}}))},[O]),de(()=>{p.submitFromLogic&&y({type:"set_completed"})},[p.submitFromLogic]),Fo("set_value",()=>{(p.lastUpdatedBlock===k?.id||C)&&y({type:"handle_show_nav"})}),Fo("set_nested_value",()=>{(p.lastUpdatedBlock===k?.id||C)&&y({type:"handle_show_nav"})}),Fo("set_value",()=>{T&&(d(),v&&y({type:"handle_autoskip",payload:{isLastPage:S,pageValid:v,extraInputElementIsVisible:E,lastVisibleElementIsShowButtonType:C,nextPageWithVisibleBlocks:g}}))}),Fo("set_nested_value",()=>{T&&(d(),v&&y({type:"handle_autoskip",payload:{isLastPage:S,pageValid:v,extraInputElementIsVisible:E,lastVisibleElementIsShowButtonType:C,nextPageWithVisibleBlocks:g}}))}),null}function Wo(){return _e(Ko)}function Go({children:e}){const t=qo();return w(Ko.Provider,{value:t},w(Uo,null),e)}class Yo extends O{shouldComponentUpdate(){return!1}render(e){return w("iframe",e)}}function Qo(){const{formKey:e}=Un(),t=Gn(),{hideLandingPageForm:n,actions:o}=Wo(),r=document.querySelector("#publicSurveyBody")?"#publicSurveyBody":"body",a=st("mail_url",Dt())||st("mail_url",lt(e))||t.landingspageUrl||"",i=t.landingspageTheme??"dark";return de(()=>{a&&(mt([document.querySelector(r)],"customBackground"),mt([document.querySelector(r)],i),t.landingspageTransparency&&mt([document.querySelector(r)],"transparent"))},[t.landingspageTransparency,a,i,r]),t.enableCustomBackground&&a.match(/^(?:(?:https?):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/gi)?w(ot,{into:document.querySelector(r)},w("div",null,w(Yo,{src:a,id:"mailUrl",className:"bg__mailing_Iframe",style:n?{zIndex:1}:{}}),!n&&w("button",{type:"button",className:`close_custom_bg ${i}`,onClick:()=>{o.dispatch({type:"set_hide_landingspage_form"}),ft([document.querySelector(r)],i)}},t.landingspageClose&&w("span",{className:`close_custom_bg_lbl ${i}`},t.landingspageClose)))):null}function Xo(){const{fontsDomain:e}=Un(),{properties:t,webFonts:n}=zn(),o=t.advanced?.block_webfont_loading;return de(()=>{o||yt(n,e),Object.keys(t?.advanced?.customLibraries??{}).map(e=>t?.advanced?.customLibraries[e]??{}).forEach(e=>pt(e.url))},[]),null}function Zo({children:e,focusInvalid:t,index:n,show:o,block:r={},typeCount:a=1,_id:i}){const s=fe(null),l=`control-group question ${"rating"!==r.typeName?r.typeName:""}-group ${r.typeName}-group-${a} ${r.tooltip?"has-tooltip":""} ${"screenshot"===r.typeName&&r.properties?.bottomScreen?"section absolute":""}`,c=`${r.typeName}-${r.id}${"special_input"===r.typeName?`-${i}`:""}`,u=["select","textarea","input","special_input","contact","section_break"].indexOf(r.typeName)>-1?"div":"fieldset";return de(()=>{if(t){try{s.current.scrollIntoView({behavior:"smooth",block:"center"})}catch(e){}Vt(s.current.querySelector("input, textarea, .ui-stars-star, .nice-select"))}},[t,s]),w("section",{className:l,style:{display:o?"block":"none"},"data-index":n,key:c,id:c,ref:s,"data-testid":`${r.typeName}-group`,tabIndex:"-1"},w(u,null,e))}function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jo.apply(null,arguments)}var er=Pe(function({children:e,component:t="div",useTabIndexWhenOpen:n,...o},r){const{formType:a,formOpen:i}=Wo(),s=i||"embed"===a?0:-1;return w(t,Jo({ref:r},n||-1===s?{tabIndex:s}:{},o),e)});function tr({children:e,block:t,requiredMarkLabel:n="",...o}){const r=fe(!1),a="string"==typeof e&&1===e.split(/<br\s*\/?>/gi).length,i=["textarea","input","contact"].indexOf(t.typeName)>-1?"div":"legend";return"section_break"!==t.typeName?w(i,{class:"block-title",id:`block-title-${t.typeName}-${t.id}${"special_input"===t.typeName?`-${o._id}`:""}`,tabIndex:"-1"},"special_input"!==t.typeName&&"textarea"!==t.typeName&&"input"!==t.typeName?w("span",null,j(e).map(e=>Pt(e,!!o.required&&n))):w("label",{for:"special_input"===t.typeName?`element-${t.typeName}-${t.id}-${o._id}`:["textarea","input"].indexOf(t.typeName)>-1?`element-${t.typeName}-${t.id}`:null,onKeyDown:()=>{r.current=!t.tooltip}},j(e).map(e=>Pt(e,!!o.required&&n)),t.properties?.placeholder&&w("span",{className:Rt("input-placeholder-helper")},t.properties?.placeholder)),t.tooltip&&isNaN(t.tooltip)?w(er,{component:"div",useTabIndexWhenOpen:!0,role:"tooltip",class:"tooltip","aria-label":t.tooltip},w(oa,{icon:"question",alt:"questionmark icon"}),w("div",{"aria-label":t.tooltip},Pt(t.tooltip))):null,o.required&&a?w("span",{class:"required-mark"},"*"):null):w("h3",{class:"section-title",tabIndex:"-1"},j(e).map(e=>Pt(e)))}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},nr.apply(null,arguments)}function or({children:e,block:t,...n}){const{properties:o={}}=t,{conversational:r}=Wn(),{actions:a}=lo(),{contentDivRef:i,formIsCompleted:s,actions:l,currentConversationalFocusRef:c}=Wo(),u=Vo(),p=Ao();return w("div",{id:`link_${t.id}`,class:"link_block",ref:c},(()=>{let e,t=o.hyperlinktext&&o.hyperlinktext.match(/\/\*(.*)\*\//gi)&&o.hyperlinktext.match(/\/\*(.*)\*\//gi)[0].replace("/*","").replace("*/",""),n={};if("function"===o.linktype)n.onClick=e=>{e.preventDefault(),"next_page"===o.linktype_function?l.nextPage():"prev_page"===o.linktype_function?l.prevPage():["close_modal","close_embedded","close"].indexOf(o.linktype_function)>-1?l.toggleForm(!1):"start"===o.linktype_function&&(s||l.startForm(),(s||r)&&a.reset(),Vt(i.current))},o.show_as_buttons||"button"===o.link_style||(n.role="button",n.href="#");else if("custom_function"===o.linktype)n.onClick=e=>{Et(o.linktype_function)};else{let e=o.hyperlinkhref&&(o.hyperlinkhref.match(/((http(s?)))/gi)||"/"===o.hyperlinkhref.charAt(0))?o.hyperlinkhref:`${o.hyperlinkprotocol}${o.hyperlinkhref}`;n.href=e,n.target=o.target??"_blank",n.onClick=()=>{u("redirect",{url:e}),p.sendEvent("redirect"),o.close_on_linkclick&&l.toggleForm(!1)}}return n.class=o.show_as_panels?"panel":o.show_as_buttons||"button"===o.link_style?"btn":"",e=(o.show_as_panels||o.show_as_buttons||"button"===o.link_style)&&o.icon?w(oa,{icon:o.icon}):"",w("span",null,o.description.split(t).reduce((r,a,i)=>i?r.concat(w(er,nr({component:o.show_as_buttons&&"function"===o.linktype||"button"===o.link_style&&"function"===o.linktype?"button":"a"},n),"right"!==o.iconAlignment?[e,t]:[t,e]),a):[a],[]))})())}function rr({children:e,id:t,showErrors:n}){const[o,r]=ue("assertive");return de(()=>{let e;return n&&(e=setTimeout(()=>{r("polite")},[1e3])),()=>clearTimeout(e)},[n]),w("div",{class:"alert alert-danger",id:t,"aria-live":o},n&&e)}function ar({properties:e={}}){return"image"===e.mediatype&&["jpg","jpeg","gif","png","svg"].indexOf(e.location.split(".").pop())>-1?{textAlign:e.media_align?e.media_align:"left"}:["youtube","vimeo"].indexOf(e.mediatype)>-1&&e.location.match(/^(https\:\/\/youtube)|^(https\:\/\/www\.youtube)|^(https\:\/\/player\.vimeo)/gi)?{width:e.media_width,margin:"right"===e.media_align?"0 0 0 auto":"center"===e.media_align?"auto":"0"}:null}function ir({block:e}){const{properties:t}=e;return"img"===e.type?w("img",{src:e.url,title:e.properties?.alt??e.title??"",alt:e.properties?.alt??"",style:{height:"auto",width:"100%"}}):"image"===t.mediatype&&["jpg","jpeg","gif","png","svg"].indexOf(t.location.split(".").pop())>-1?w("img",{title:e.properties?.alt??e.title??"",alt:e.properties?.alt??"",src:$t(t.location),style:{height:"auto",width:t.media_width||"100%"}}):["youtube","vimeo"].indexOf(t.mediatype)>-1&&t.location.match(/^(https\:\/\/youtube)|^(https\:\/\/www\.youtube)|^(https\:\/\/player\.vimeo)/gi)?w("div",{style:{padding:"56.25% 0 0 0",position:"relative"}},w("iframe",{title:e.title,class:"video-frame",src:t.location,frameborder:0,allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,style:{height:"100%",width:"100%",position:"absolute",top:0,left:0}})):void 0}var sr=Ee(function({block:e}){return w("div",{id:`multimedia_${e.id}`,style:ar(e),class:"section-multimedia"},w(ir,{block:e}))},()=>!1);function lr({children:e,show:t,...n}){return w("div",{...!t&&{style:{display:"none"}},...n},e)}function cr({img:e,...t}){return w("div",{className:Rt("bubble-avatar"),style:e?{backgroundImage:`url(${e})`}:{}},e?null:w(oa,{icon:"conversational_avatar",alt:"chatbot"}))}function ur({children:e,name:t,align:n,blockType:o,prevBlockType:r,avatar:a,outerContent:i,typing:s,id:l,onAnimationEnd:c=()=>{}}){return w("div",{className:Rt("bubble-container","left"===n?"align-bubble-content-left":"align-bubble-content-right",s&&"is-typing","has-avatar")},w("div",null,"left"===n&&w(cr,{img:a}),"left"===n&&(!r||-1===sn.indexOf(r))&&w("div",{className:Rt("name-wrap")},w("h5",{className:Rt("bubble-user-name")},t)),w("div",{className:Rt("bubble",`bubble-${o}`,"left"===n?"bubble-left":"bubble-right"),onAnimationEnd:c},i,j(e).length>0&&w("div",{className:Rt("bubble-inner")},e))))}function pr({text:e,block:t}){const n=function(e=""){return 0===String(e).replace(/\p{Extended_Pictographic}/gu,"").length&&e.length>0&&e.length<7}(e),o=t?`block-title-${t.typeName}-${t.id}`:null;return w("p",{className:Rt("bubble-text",n&&"chat-icon")},w("legend",{id:o},Pt(e)))}function dr(e,t){switch(t.typeName){case"radio":case"gcr":case"category":const n=Object.keys(t.properties.elements).reduce((n,o)=>{const r=t.properties.elements[o];return r.value&&r.value==e&&(n=r.label?r.label:r.value),n},"");return n||e;case"ces":return t.properties.elements[e]?t.properties.elements[e]?.label:e;case"rating":return t.properties.showCaptions?t.properties?.elements?.[e]?.label??e:e;default:return""}}function mr({element:e,block:t,value:n,state:o,...r}){const{text:a}=zn();if(o.isSkipped)return w(pr,{text:a?.skipText??"Skip"});switch(t.typeName){case"gcr":case"radio":case"ces":case"category":return w(pr,{block:t,text:dr(n,t)});case"thumbs":const e=Object.keys(t.properties.elements).reduce((e,o)=>{const r=t.properties.elements[o];return r.value&&r.value==n&&(e={...r,key:o}),e},{});return w(hr,{block:t,checked:!0,tabIndex:"-1",role:"none",labelAtts:{class:"label_thumbs_"+(1===Number(e.key)?"positive":"negative"),title:""+(1===Number(e.key)?"positive":"negative")}},w(oa,{icon:e.icon,alt:(1===Number(e.key)?"positive":"negative")+" thumb icon"}));case"screenshot":return w(Ir,{block:t,state:o});case"rating":return"emoji"===t.properties?.type?w(Xr,{block:t,state:o,showScoreOnly:!0,role:"none",disabled:!0}):w(pr,{block:t,text:dr(n,t)});default:return w(pr,{block:t,text:n})}}function fr(){return fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},fr.apply(null,arguments)}var hr=Pe(function({children:e,block:t,...n},o){const{conversational:r}=Wn(),{multipleIndex:a,isMultiple:i}=Un(),s=["radio","checkbox"].indexOf(t.typeName)>-1?t.typeName:"radio",l=["radio","checkbox","gcr","thumbs","category"].indexOf(t.typeName)>-1?`${t.typeName}-wrapper ${r||["gcr","thumbs","category"].indexOf(t.typeName)>-1||t.properties.show_as_buttons?"button":""} ${n.dummyScore?"dummy-score":""}`:`${t.typeName}-choice ${n.dummyScore?"dummy-score":""}`;let c={...n,type:s,name:`${t.typeName}-group-${t.id}${i?"_"+a:""}`,value:n.value,id:`${t.typeName}-${t.id}_${n.selectableIndex}${i?"_"+a:""}`,checked:n.checked};return n.ariaLabel&&(c["aria-label"]=n.ariaLabel),n.onKeyUp&&(c.onKeyUp=n.onKeyUp),w("div",{class:l},w(er,fr({component:"input","data-testid":"selectable"},c)),w("label",fr({ref:o,for:c.id},n.labelAtts),"checkbox"===t.typeName&&!t.properties.show_as_buttons&&w(oa,{icon:"check",className:"is-context-icon"}),e))});function yr({elements:e={},elements_extra:t={}}){const n=Object.keys(e),o=Object.keys(t);return n.length>0?o.length>0?[...n,...o].reduce((o,r,a)=>(n.length>a?o[a]=e[r]:t[r]?.linkedLabel||(o[a]=t[r]),o),{}):e:{}}function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_r.apply(null,arguments)}function br({block:e,state:t,setValue:n,setNestedValue:o,text:r,elementIndex:a,...i},s){const{currentConversationalFocusRef:l,actions:c,formType:u,lastKeyPressed:p,activePage:d}=Wo(),{conversational:m}=Wn(),{lastPageAutoPost:f}=Gn(),{properties:h}=e,y=["gcr","thumbs","category"].indexOf(e.typeName)>-1||h.show_as_buttons?`button-container ${e.typeName}-container`:"",_=uo({typeName:"page_break",typeOf:d-1}),b=m||f&&"embed"===u||_?.block?.properties?.autopost&&"embed"===u,{onKeyDown:g,onChange:v,onClick:k,pendingScore:x,updatePendingScore:N}=Vr({onArrowKeyPressed:e=>{dt(()=>c.updateScreenReaderHelper(r?.wcag?.ratingHelperText??""),1e3)(),c.updateLastKeyPressed(e.key)},onTabSpaceEnter:()=>{x&&(n(x),N(null),setTimeout(()=>{c.updateScreenReaderHelper("")},100))},onChangedValue:e=>{N(e.target.value),c.updateLastKeyPressed(null)},onChangedValueConfirm:e=>{c.handleConversationalFocus(!0),n(x),N(null)},onClickValue:(t,n)=>{N(n||"checkbox"===e.typeName?null:t.target.value),setTimeout(()=>{c.updateScreenReaderHelper("")},100)}}),{elements:O,elementList:S}=he(()=>{const e=yr({elements:h.elements,elements_extra:h.elements_extra});return h.reverseScore?{elements:e,elementList:Object.keys(e).reverse()}:h.randomize?{elements:e,elementList:Nt(Object.keys(e),Object.keys(h.elements_extra??{}).length>0)}:{elements:e,elementList:Object.keys(e)}},[h]);return de(()=>{m&&0!==a&&(c.handleConversationalFocus(),c.updateLastKeyPressed(null))},[]),w("div",_r({class:y},m&&{"aria-labelledby":`block-title-${e.typeName}-${e.id}`},{role:"radiogroup",ref:l},h.required&&{"aria-required":!0},m&&{"aria-labelledby":`block-title-${e.typeName}-${e.id}`}),S.map((r,a)=>{const i=O[r],s=i.hasOwnProperty("value")?i.value:i.label,l={block:e,value:s,key:a,selectableIndex:a,onChange:t=>{b&&x?v(t,{key:p}):"checkbox"===e.typeName?o(i.data_field,t.target.checked):n(t.target.value)},checked:"checkbox"!==e.typeName?t.value===s||x===s:t[i.data_field]?.value&&"false"!==t[i.data_field]?.value,onKeyDown:e=>{b&&g(e)},onClick:e=>{b&&k(e)}};"thumbs"===e.typeName&&(l.labelAtts={class:"label_thumbs_"+(0==a?"positive":"negative"),ariaLabel:`${i.label?i.label:0===a?"positive":"negative"}`});let c="thumbs"===e.typeName?{style:{verticalAlign:"middle"},alt:i.label}:{};return w(hr,l,i.icon?w(oa,_r({icon:i.icon},c)):null,"thumbs"!==e.typeName?" "+i.label:null,e.properties.showCaptions&&Object.keys(c).length?w("span",c," "+i.label):null)}))}function gr({block:e,state:t,setValue:n}){const o=fe(null),r=fe([]),a=fe({}),{webView:i}=Un(),{formType:s,contentDivRef:l}=Wo(),[c,u]=ue(!1),[p,d]=ue(!1),{elements:m,elementList:f}=he(()=>{if(e.options)return{elements:e.options,elementList:Object.keys(e.options)};const t=yr({elements:e.properties?.elements,elements_extra:e.properties?.elements_extra});return e.properties?.randomize?{elements:t,elementList:Nt(Object.keys(t),Object.keys(e.properties?.elements_extra??{}).length>0)}:{elements:t,elementList:Object.keys(t)}},[e?.properties,e?.options]),h=ye(((e,t)=>{let n=0;return function(...o){const r=(new Date).getTime();if(!(r-n<t))return n=r,e(...o)}})(e=>{u(t=>void 0!==e?e:!t),Vt(o.current)},200),[]),{onKeyDown:y}=Vr({onSpaceEnter:e=>{e.preventDefault(),h(!0),d(!0),Vt(r.current[0],100)},onTabDown:()=>{c&&!p&&d(!0)},onTabUp:()=>{c&&!p&&(h(!1),d(!1))},onArrowKeyUp:e=>{p||(h(!0),e.preventDefault(),d(!0),Vt(r.current[0],100))},onArrowKeyDown:e=>{p||(h(!0),e.preventDefault(),d(!0),Vt(r.current[0],100))},onHomeEndKeyPressed:e=>{if(!p){const t="Home"===e.key?r.current[0]:r.current[r.current.length-1];e.preventDefault(),e.stopPropagation(),d(!0),h(!0),Vt(t,100)}},onSingleKeyPressed(e){const t=Object.keys(a.current).find(t=>t.charAt(0).toLowerCase()===e.key);Vt(a.current[t])}});de(()=>{const e=e=>{o.current?.contains(e.target)||h(!1)},t="embed"===s?document:l.current;return setTimeout(()=>{c?t?.addEventListener("click",e):t?.removeEventListener("click",e)}),()=>{t?.removeEventListener("click",e)}},[c,s,l,h]);const _=c&&("embed"!==s||i),b=m[f.filter(e=>m[e]?.value===t.value||m[e]?.label===t.value)[0]]?.label;return w(er,{useTabIndexWhenOpen:!0,class:"nice-select "+(c?"open":""),onClick:()=>h(),role:"combobox","aria-expanded":c,"aria-labelledby":`block-title-select-${e.id}`,ref:o,onKeyDown:e=>{y(e)}},w("span",{class:"current"},b||e.properties?.placeholder||e.placeholder||""),w("ul",{class:"list",style:{maxHeight:250,..._&&{position:"relative"}},role:"listbox","aria-labelledby":`block-title-select-${e.id}`,"aria-activedescendant":t.value,tabIndex:c?0:-1},f.map((e,i)=>{const s=m[e],l="string"==typeof s?s:s.label,u="string"==typeof s?s:s.value??s.label,y=i===f.length-1;return w(vr,{selectRef:o,itemsRef:r,itemsObjectRef:a,key:i,index:i,stateValue:t.value,label:l,value:u,elementKey:e,listOpen:c,listHasFocus:p,setValue:n,toggleList:h,setListHasFocus:d,isLast:y})})))}function vr({index:e,elementKey:t,listOpen:n,stateValue:o,label:r,value:a,listHasFocus:i,isLast:s,itemsRef:l,itemsObjectRef:c,selectRef:u,setListHasFocus:p=()=>{},toggleList:d=()=>{},setValue:m=()=>{}}){const{onKeyDown:f}=Vr({onSpaceEnter:()=>{n&&i&&(m(a),p(!1),d(!1),Vt(u.current,100))},onTabDown:()=>{n&&i&&(m(a),p(!1),d(!1))},onArrowKeyUp:t=>{n&&i&&0!==e&&(t.preventDefault(),Vt(l.current[e-1]))},onArrowKeyDown:t=>{n&&i&&!s&&(t.preventDefault(),Vt(l.current[e+1]))},onEscape:e=>{e.stopPropagation(),p(!1),d(!1),Vt(u.current,100)}});return w("li",{tabIndex:n?0:-1,key:e,ref:t=>{l.current[e]=t,c.current[a]=t},"data-value":a,role:"option","aria-selected":a===o,"aria-hidden":!n,id:`option_${t}`,className:"option "+(a===o?"selected focus":""),onClick:e=>{e.stopPropagation(),m(a),p(!1),d()},onKeyDown:e=>{f(e)}},r)}const kr={height:0,width:0,fontSize:0,margin:0,opacity:0};function wr({labelFor:e,block:t={}}){const n=["radio","checkbox","select"].indexOf(t.typeName)>-1?t?.properties?.elements_extra?.[1]?.placeholder??"please specify":"contact"===t?.typeName?t?.placeholder:"input field";return w("label",{style:kr,for:e,ariaLabel:n},t.properties?.placeholder)}function xr(){return xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xr.apply(null,arguments)}const Nr=navigator.userAgent.match(/(iPod|iPhone|iPad)/gi)||navigator.userAgent.match(/safari/gi)&&navigator.maxTouchPoints>1;function Or({block:e={},showErrors:t,state:n={},placeholder:o}){return{...e.properties?.required&&{"aria-required":!0},...t&&n.showError&&!n.isLoading&&{"aria-invalid":!0,"aria-describedby":`error-message-${e.id??e.data_field}`},...(o||e?.properties?.placeholder||e?.placeholder)&&{"aria-describedby":`${e.id??e.data_field}-placeholder ${t&&n.showError&&!n.isLoading?`error-message-${e.id??e.data_field}`:""}`}}}function Sr({children:e,block:t,state:n,setValue:o=()=>{},type:r,showErrors:a,placeholder:i}){const s=`element-${t.typeName??r??""}-${t.id??t.data_field}`,l={onKeyDown:e=>{"textarea"!==t.typeName&&13===e.keyCode&&e.preventDefault()},onChange:e=>o(e.target.value),onInput:e=>o(e.target.value),className:a&&n.showError&&!n.isLoading?"error":"",placeholder:i??(t?.properties?.placeholder||t?.placeholder||""),value:n.value?n.value:null,id:s,...Nr&&{style:{fontSize:"16px"}},type:r??t.properties?.format??"text",...Or({block:t,showErrors:a,state:n,placeholder:i}),"data-testid":t.typeName};return"textarea"===t.typeName?w(N,null,w(er,xr({component:"textarea"},l),null!==navigator.userAgent.match(/Trident/)&&l.placeholder?l.placeholder:null),l.placeholder&&w(Er,{placeholder:l.placeholder,id:`${t.id??t.data_field}-placeholder`})):w("div",{className:"input-wrap"},["contact","checkbox","radio","select"].indexOf(t.typeName)>-1&&w(wr,{labelFor:s,block:t}),w(er,xr({component:"input"},l)),n.isLoading&&w(rt,null),l.placeholder&&w(Er,{placeholder:l.placeholder,id:`${t.id??t.data_field}-placeholder`}))}const $r={position:"absolute",width:"1px",height:"1px",margin:"-1px",padding:"0",overflow:"hidden",clip:"rect(0, 0, 0, 0)",border:"0"};function Er({placeholder:e,id:t}){return w("span",{id:t,style:$r},e)}function Cr({children:e,block:t,state:n,errorMessages:o,setNestedValue:r,showErrors:a,...i}){const{properties:s}=t,{title:l={},name:c={},email:u={},phone:p={},phone2:d={}}=s.elements??{};return w("div",{class:"contact-wrapper"},l.show&&w("div",{className:"title-wrapper"},w("div",null,w(gr,{block:l,state:n[l.data_field],setValue:e=>r(l.data_field,e),showErrors:a}),n[l.data_field].showError&&w(rr,{id:`error-message-${l.data_field}`,showErrors:a},o[l.data_field]))),c.show&&c.combine&&w("div",{className:"name-wrapper"},w("div",null,w(Sr,{block:{...c,typeName:t.typeName},state:n[c.data_field],setValue:e=>r(c.data_field,e),showErrors:a}),n[c.data_field].showError&&w(rr,{id:`error-message-${c.data_field}`,showErrors:a},o[c.data_field]))),c.show&&!c.combine&&w("div",{className:"name-wrapper"},w("div",null,w(Sr,{block:{...c.subelements.firstname,typeName:t.typeName},state:n[c?.subelements?.firstname?.data_field],setValue:e=>r(c?.subelements?.firstname?.data_field,e),showErrors:a}),n[c?.subelements?.firstname?.data_field]?.showError&&w(rr,{id:`error-message-${c?.subelements?.firstname?.data_field}`,showErrors:a},o[c?.subelements?.firstname?.data_field])),w("div",null,w(Sr,{block:{...c.subelements.lastname,typeName:t.typeName},state:n[c?.subelements?.lastname?.data_field],setValue:e=>r(c?.subelements?.lastname?.data_field,e),showErrors:a}),n[c?.subelements?.lastname?.data_field]?.showError&&w(rr,{id:`error-message-${c?.subelements?.lastname?.data_field}`,showErrors:a},o[c?.subelements?.lastname?.data_field]))),u.show&&w("div",{className:"email-wrapper"},w("div",null,w(Sr,{block:{...u,typeName:t.typeName},state:n[u.data_field],setValue:e=>r(u.data_field,e),type:"email",showErrors:a}),n[u.data_field].showError&&w(rr,{id:`error-message-${u.data_field}`,showErrors:a},o[u.data_field]))),p.show&&w("div",{className:"phone-wrapper"},w("div",null,w(Sr,{block:{...p,typeName:t.typeName},state:n[p.data_field],setValue:e=>r(p.data_field,e),type:"tel",showErrors:a}),n[p.data_field].showError&&w(rr,{id:`error-message-${p.data_field}`,showErrors:a},o[p.data_field]))),d.show&&w("div",{className:"phone-wrapper"},w("div",null,w(Sr,{block:{...d,typeName:t.typeName},state:n[d.data_field],setValue:e=>r(d.data_field,e),type:"tel",showErrors:a}),a&&n[d.data_field].showError&&w(rr,{showErrors:a},o[d.data_field]))))}function Tr({block:e,state:t,setNestedValue:n}){const{formOpen:o}=Wo(),{multipleIndex:r,divName:a}=Un();return de(()=>{setTimeout(()=>{Object.keys(e.properties.elements).forEach((t,o)=>{const i=e.properties.elements[t],s=Kt({type:i.type,value:i.value,divName:a,multipleIndex:r});n(i.data_field,s)})},300)},[o,e,a,r]),w("div",null,Object.keys(e.properties.elements).map((n,o)=>{const r=e.properties.elements[n],a=function({block:e={},type:t="",index:n=0}){return`${e.typeName}_${t}_${e.id}_${n+1}`.replace(/\W/g,"")}({block:e,type:r.type,index:o}),i=t[r.data_field]?.value;return w("input",{type:"hidden",id:a,name:a,value:i})}))}function Pr(){return Pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pr.apply(null,arguments)}function Ir({block:e,state:t,setValue:n,setNestedValue:o,elementIndex:r,...a},i){const{actions:s,screenshotButtonRef:l,currentConversationalFocusRef:c}=Wo(),{webView:u}=Un(),{text:p}=zn(),{conversational:d}=Wn(),{onKeyDown:m}=Vr({onSpaceEnter:e=>{e.stopPropagation(),e.preventDefault(),s.toggleScreenshot(!0)}});return de(()=>{d&&0!==r&&(s.handleConversationalFocus(),s.updateLastKeyPressed(null))},[]),w(N,null,!u&&w(N,null,w("div",{class:""+(t.value?"screen-captured":""),ref:c},w(er,Pr({ref:l,component:"button",type:"button",id:`screenshot_element_${e.id}`,className:"section-screenshot "+(e.properties.bottomScreen&&e.tooltip?"tooltip":""),onClick:e=>{e.stopPropagation(),s.toggleScreenshot(!0)},onKeyDown:m,"aria-label":p.screenCaptureText??e.title??""},d&&{"aria-labelledby":`block-title-${e.typeName}-${e.id}`}),w(oa,{icon:"camera",alt:"camera icon"}),w("div",{className:"detect-capture"},w(oa,{icon:"check",alt:p.screenCaptureSelected,onClick:e=>e.stopPropagation()})),e.properties.bottomScreen&&e.tooltip&&w("span",{className:"tooltip"},e.tooltip),e.properties.bottomScreen&&e.required&&w("span",{className:"required-mark"},"*")))),u&&w(N,null,d&&!t.value&&w(hr,{block:{...e,typeName:"radio",properties:{show_as_buttons:!0}},onChange:e=>{n(e.target.checked?window.screenToken||" ":"")}},p.screenshotCheckboxLabel),d&&t.value&&w("div",{className:"screen-captured"},w("div",{id:`screenshot_element_${e.id}`,className:"section-screenshot"},w(oa,{icon:"camera",alt:"camera icon"}),w("div",{className:"detect-capture"},w(oa,{icon:"check",alt:"screenshot selected icon"})))),!d&&w(hr,{block:{...e,typeName:"checkbox",properties:{}},onChange:e=>{n(e.target.checked?window.screenToken||" ":"")},checked:t.value},p.screenshotCheckboxLabel)))}function jr({state:e,setHoneyBotValue:t,_id:n}){return w("div",{className:"input-wrap"},w("input",{type:"text",id:`element-special_input-${e.id}-${n}`,value:e.value,onInput:e=>t(e.target.value),onChange:e=>t(e.target.value)}))}function Lr({block:e={},state:t={}}){return"email"===e.typeName&&e?.properties?.business_only&&t.isLoading?"business_email_invalid"!==t.errorReason:t.showError&&t.inputSet}function Dr({skipQuestion:e,block:t,elementIndex:n,state:o,setValue:r,autoFocus:a,errorMessage:i,...s}){const[l,c]=ue(o.value),u=fe(null),{text:p}=zn(),d=Lr({block:t,state:o});de(()=>{try{u.current.focus()}catch(e){}},[]);const m=`element-${t.typeName??""}-${t.id??t.data_field}`;return w("div",{className:Rt("comment-bar-wrap")},w("label",{for:m,className:Rt("comment-bar-hidden-label")},t.title),w("textarea",{className:Rt("comment-bar",d?{prefix:!1,className:"error"}:null),id:m,value:l,onInput:e=>c(e.target.value),ref:u,placeholder:t.properties?.placeholder||""}),o?.isLoading&&w(rt,null),w("button",{type:"button",className:Rt({prefix:!1,className:"btn"},{prefix:!1,className:"btn btn-primary"},"comment-bar-button"),onClick:function(){(t.properties.required||l)&&r(l),t.properties.required||l||e()},"aria-label":p?.wcag?.inputSendButtonDescription??"send"},w(oa,{icon:"paper-plane-o",alt:p?.wcag?.inputSendButtonDescription??"send"})))}function Ar(e){return["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].indexOf(e.key)>-1}function Vr({onSpaceEnter:e=()=>{},onTabUp:t=()=>{},onTabDown:n=()=>{},onArrowKeyPressed:o=()=>{},onTabSpaceEnter:r=()=>{},onArrowKeyRight:a=()=>{},onArrowKeyDown:i=()=>{},onArrowKeyUp:s=()=>{},onEscape:l=()=>{},onHomeEndKeyPressed:c=()=>{},onChangedValue:u=()=>{},onChangedValueConfirm:p=()=>{},onClickValue:d=()=>{},onSingleKeyPressed:m=()=>{}}){const[f,h]=ue(null);return{onKeyDown:(u,p)=>{(function({code:e}={}){return["Enter","Space"].indexOf(e)>-1})(u)&&e(u,p),function(e){return"Tab"===e.key&&e.shiftKey}(u)&&t(u,p),function(e){return"Tab"===e.key&&!e.shiftKey}(u)&&n(u,p),Ar(u)&&o(u,p),function(e){return!!e.key&&/[a-zA-Z0-9]/.test(e.key)&&1===e.key.length}(u)&&m(u),"ArrowRight"===u.key&&a(u,p),"ArrowDown"===u.key&&i(u),"ArrowUp"===u.key&&s(u),"Escape"===u.key&&l(u),["Tab","Enter","Space"].indexOf(u.code)>-1&&!u.shiftKey&&r(u,p),["Home","End"].indexOf(u.key)>-1&&c(u)},onChange:(e,t)=>{Ar({key:t.key})?u(e,t):p(e)},onClick:e=>{d(e,function(e){return!(0===e.clientX&&0===e.clientY||0===e.offsetX&&0===e.offsetY)}(e))},updatePendingScore:e=>{h(e)},pendingScore:f}}function Mr(e){if(e.tabIndex<0||null===e.offsetParent)return!1;switch(e.tagName){case"A":return!!e.href;case"INPUT":return"hidden"!==e.type&&!e.disabled;case"SELECT":case"TEXTAREA":case"BUTTON":return!e.disabled;default:return!1}}const Rr={textarea:Dr,input:Dr,name:Dr,email:Dr,phone:Dr,radio:br,category:br,checkbox:br,rating:Xr,nps:Xr,ces:Xr,gcr:br,thumbs:br,contact:Cr,website_data:Tr,multimedia:sr,screenshot:Ir,[fn]:jr};function Kr({state:e={},block:t={},errorMessage:n,setValue:o,setNestedValue:r,setHoneyBotValue:a,skipQuestion:i,text:s,elementIndex:l,_id:c}){const u=Rr[t.typeName],p=fe(null),{onKeyDown:d}=Vr({onArrowKeyRight:(e,t)=>{Vt(function(e){return kt(e.querySelectorAll("*")).filter(Mr)[0]}(t))}});if(!u)return null;const m=!t.properties?.required&&t.typeName!==fn;return w("div",{className:Rt("block-wrap",m&&"show-skip")},m&&w("button",{ref:p,className:Rt({prefix:!1,className:"btn"},"skip",{prefix:!1,className:"wcag"}),onClick:i,id:`skip-${t.id}`,"aria-label":`${t.title}, ${s?.skipText??"Skip"}`,onKeyDown:e=>{d(e,p?.current?.nextElementSibling)}},s?.skipText??"Skip"),w("div",{className:Rt("block-inner")},w(u,{block:t,state:e,setValue:o,setNestedValue:r,setHoneyBotValue:a,skipQuestion:i,text:s,elementIndex:l,_id:c}),function(e={}){return["email","phone"].indexOf(e.typeName)>-1||rn.indexOf(e.typeName)>-1&&(e.properties?.required||["email","phone"].indexOf(e.properties?.format)>-1)}(t)&&w(rr,{id:`error-message-${t.id}`,showErrors:Lr({block:t,state:e})},n)))}function Br(e){return w("div",{class:Rt("typing")},w("div",null),w("div",null),w("div",null),w("div",null),w("div",null))}function qr({icon:e,alt:t="icon"}){return w(oa,{className:Rt("chat-icon"),icon:e,alt:t})}var Hr=Pe(function({onAnimationEnd:e=()=>{}},t){const{text:n={}}=zn(),o=Mo();return w("div",{className:Rt("restart-button-wrap")},w("button",{ref:t,type:"button",className:Rt("restart-button"),onAnimationEnd:e,onClick:o,"aria-label":n.restartButtonText??"Restart"},w(oa,{icon:"refresh",alt:"refresh icon"}),n.restartButtonText??"Restart"))});function Fr({children:e,delay:t}){const[n,o]=ue(!1);return Gt(()=>{o(!0)},t),n?e:null}function zr(){return zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zr.apply(null,arguments)}function Ur({blockId:e,prevBlockId:t,setScrollPosition:n,elementIndex:o}){const{formType:r,formOpen:a,lastKeyPressed:i,conversationalDummyFocusBlockRef:s,conversationalFocusStateValue:l}=Wo(),{properties:c,text:u}=zn(),{block:p,state:d,actions:m,errorMessage:f}=uo({id:e}),h=uo({id:t}),[y,_]=ue(!1),[b,g]=ue(!1),v=Number(c.typingTimeout??800),k=fe(null);Gt(()=>{_(!0)},a||"embed"===r?v:null),de(()=>{n()},[b,n]);const{avatar:x}=c,N={align:"left",blockType:p.typeName,prevBlockType:h?.block?.typeName,avatar:x,id:p.id,name:u?.botName,block:p},O=rn.indexOf(p.typeName)>-1?d.value&&d.inputSet:d.value||d.screenshotSet,S=y&&d.isSkipped||y&&O&&!d.showError&&!d.isLoading;return w("div",{className:Rt("chat-container",!y&&"is-typing",sn.indexOf(p.typeName)>-1&&"non-interactive-element")},w(lr,{key:p.id,className:Rt("bubble-wrap",`bubble-wrap-${p.typeName}`,{className:`${"rating"!==p.typeName?p.typeName:""}-group`,prefix:!1},{className:`${p.typeName}-group-${d.typeCount}`,prefix:!1}),show:!(un.indexOf(p.typeName)>-1)&&d.isVisible,id:`${p.typeName}-${p.id}`},!y&&w(ur,N,w(Br,null)),y&&w(ur,zr({},N,{outerContent:cn.indexOf(p.typeName)>-1?w(sr,{block:p}):null,onAnimationEnd:()=>g(!0)}),"icon"===p.typeName?w(qr,{icon:p?.properties?.icon}):["link","ending"].indexOf(p.typeName)>-1?w(or,{block:p,conversational:!0}):"multimedia"!==p.typeName||"multimedia"===p.typeName&&p.title?w(pr,{block:p,text:p.title}):null),y&&"ending"===p.typeName&&p.properties?.show_restart&&w(Fr,{delay:1e3},w(Hr,{ref:k,block:p,onAnimationEnd:()=>{n(),Vt(k.current)}})),S&&w(ur,{align:"right"},w(mr,{value:d.value,state:d,block:p}))),y&&b&&!S&&-1===sn.indexOf(p.typeName)&&w(Kr,{state:d,block:p,setValue:m.setValue,setNestedValue:m.setNestedValue,skipQuestion:m.skipQuestion,text:u,errorMessage:f,elementIndex:o}),-1===sn.indexOf(p.typeName)&&w("div",{id:`focus-dummy-${p.id}`,ref:s,className:Rt("conversational-focus-dummy"),tabIndex:i?0:-1},l))}const Wr={typeName:fn,pageNumber:0,title:"What is your opinion?"};function Gr({webView:e,webViewShowHeader:t,formHeaderHeight:n,formOffset:o}={}){return e&&t?{height:t?`calc(100dvh - ${n+o}px)`:"100dvh"}:e?null:{maxHeight:Lt()?"640px":"520px",height:`calc(80vh - ${n+o}px)`}}function Yr({formHeaderHeight:e,formOffset:t,...n}){const o=lo(),{formType:r,formOpen:a}=Wo(),{webView:i,webViewShowHeader:s}=Un(),{layout:l,blocks:c,properties:u}=zn(),{displayedBlocks:p,showableLayout:d}=function(){const{blocks:e,layout:t}=zn(),n=lo(),o=he(()=>t.filter(t=>{const n=e[t];return-1===un.indexOf(n.typeName)}),[t,e]),r=he(()=>o.filter(e=>{const t=n[e];return t.showInConvo&&t.isVisible}),[o,n]);return{showableLayout:o,displayedBlocks:r}}(),m=fe(null),f=ye(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[]),h=fe(xt());de(()=>{const e=()=>{setTimeout(()=>{try{m.current.scrollTop=document.activeElement.getBoundingClientRect().top}catch(e){}})};if(i&&window.visualViewport)return window.visualViewport.addEventListener("resize",e),()=>window.visualViewport.removeEventListener("resize",e)},[i]);const y=a||"embed"===r,_=1.2*Number(u.typingTimeout??800);return w(N,null,w("div",{className:Rt("conversation-container",i?"webview":null),ref:m,style:Gr({webView:i,webViewShowHeader:s,formHeaderHeight:e,formOffset:t})},p.map((e,t)=>{const n=function({index:e,blockState:t,blocks:n,displayedBlocks:o}){const r=o.slice(0,e).reverse();let a=0;for(let e=0;e<r.length;e++){const o=r[e],i=n[o],s=t[o];if(!s.isVisible||!(sn.indexOf(i.typeName)>-1||s.wasPrefilled))break;a++}return a}({index:t,blockState:o,blocks:c,displayedBlocks:p,layout:d})*_;return w(Fr,{delay:y?n:null},w(Ur,{blockId:e,prevBlockId:0!==t?d[t-1]:null,elementIndex:t,setScrollPosition:f}))})),l.filter(e=>"website_data"===c[e].typeName).map(e=>{const t=o[e],n=c[e];return w(Tr,{block:n,state:t,setNestedValue:(e,t)=>o.actions.dispatch({type:"set_nested_value",payload:{value:t,block:n,datafieldId:e,rules:[],layout:l}})})}),w("div",{className:fn},w("label",{for:`element-special_input-${o[mn].id}-${h.current}`},Wr.title),w(Kr,{block:Wr,state:o[mn],_id:h.current,setHoneyBotValue:e=>o.actions.dispatch({type:"set_honeybot_value",payload:{value:e}})})))}function Qr(){return Qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qr.apply(null,arguments)}function Xr({block:e,state:t,setValue:n,showScoreOnly:o,showErrors:r,disabled:a=!1,role:i,elementIndex:s}){const{cacheDomain:l,domain:c}=Un(),{currentConversationalFocusRef:u,actions:p,formType:d,lastKeyPressed:m,activePage:f}=Wo(),{text:h}=zn(),{conversational:y}=Wn(),{lastPageAutoPost:_}=Gn(),[b,g]=ue(-1),[v,k]=ue({angry:"",sad:"",neutral:"",happy:"","extra-happy":""}),x=uo({typeName:"page_break",typeOf:f-1}),O=y||_&&"embed"===d||x?.block?.properties?.autopost&&"embed"===d;de(()=>{y&&0!==s&&(p.handleConversationalFocus(),p.updateLastKeyPressed(null))},[]);const{onKeyDown:S,onChange:$,onClick:E,pendingScore:C,updatePendingScore:T}=Vr({onArrowKeyPressed:e=>{dt(()=>p.updateScreenReaderHelper(h?.wcag?.ratingHelperText??""),1e3)(),p.updateLastKeyPressed(e.key)},onTabSpaceEnter:()=>{C&&(n(C),T(null),setTimeout(()=>{p.updateScreenReaderHelper("")},100))},onChangedValue:e=>{T(e.target.value),p.updateLastKeyPressed(null)},onChangedValueConfirm:e=>{p.handleConversationalFocus(!0),n(C),T(null)},onClickValue:(e,t)=>{T(t?null:e.target.value),setTimeout(()=>{p.updateScreenReaderHelper("")},100)}}),P=fe({}),I=fe(null),{properties:j,typeName:L}=e,D=(C??t.value)||-1,A=["angry","sad","neutral","happy","extra-happy"],V=["--","-","0","+","++"];de(()=>{"emoji"===e.properties.type&&Wt({domain:c,cacheDomain:l}).getEmoji(e.id).then(e=>k({...e}))},[]);const M=e=>`${-1===b&&!j.reverseScore&&e>D||-1===b&&j.reverseScore&&e<D||-1!==b&&!j.reverseScore&&e>b||-1!==b&&j.reverseScore&&e<b?"ui-stars-star-default":""}\n\t\t\t${-1!==b&&!j.reverseScore&&e<=b||-1!==b&&j.reverseScore&&e>=b?"ui-stars-star-hover":""}\n\t\t\t${-1===b&&-1!==D&&!j.reverseScore&&e<=D||-1===b&&-1!==D&&j.reverseScore&&e>=D?"ui-stars-star-on":""}`,R="nps"===L?10:"bar"===j.type||"ces"===L||"emoji"===j.type?5:j.scale,K="numeric"===j.type||"stars"===j.type?j.includeZero?0:1:"nps"===L?0:1,B=j.reverseScore?Bt(K,R).reverse():Bt(K,R),q=j.legend?j.legend.legendLow:"",H=j.legend?j.legend.legendHigh:"",F=j.reverseScore?[...A].reverse():A,z=b>-1?b:D>-1?D:-1,U=z>-1?`score-${z}`:"",W=z>-1?j.elements?.[z]?.label:null;return w("div",{ref:u,class:`rating-group ${L}-group ${"ces"===L?L:""} ${j.type?j.type:""} ${j.type?j.type:""}-group ${["emoji","stars"].indexOf(j.type)>-1&&j.showCaptions?"show-labels":""} ${j.reverseScore?"reversed":""} ${j.legend&&(j.legend.legendLow||j.legend.legendHigh)?"has-legend":""} ${j.required?"":"with-dummyscore"}`},w("div",Qr({class:""+("stars"===j.type||"ces"===L?"":"choice-row"),ref:I,role:"radiogroup"},j.required&&{"aria-required":!0},y&&{"aria-labelledby":`block-title-${L}-${e.id}`}),B.map((s,l)=>{let c=["emoji","stars"].indexOf(j.type)>-1&&j.labelsAsValue?j["emoji"===j.type?"emoji":"elements"][s].label:s;if(o&&String(t.value)!==String(c))return null;const u=j["emoji"===j.type?"emoji":"elements"]&&j["emoji"===j.type?"emoji":"elements"][s]?j["emoji"===j.type?"emoji":"elements"][s].label:s;let p={onChange:e=>{O&&C?$(e,{key:m}):(n(e.target.value),g(-1))},block:e,key:l,selectableIndex:l,value:c,checked:String(D)===String(c),ariaLabel:u,...j.required&&r&&t.showError&&{ariaInvalid:!0,"aria-describedby":`error-message-${e.id}`},...o&&{tabIndex:-1},disabled:a,role:i,onKeyDown:e=>{O&&S(e)},onClick:e=>{O&&E(e)}};if("emoji"===j.type&&(p.labelAtts={class:"emoji-"+F[l],"aria-label":j.emoji[s].label??s,"data-label":j.emoji[s].label??s}),"stars"===j.type||"ces"===L)return p.labelAtts={class:"ui-stars-star star_"+s,"aria-label":j.elements[s].label??s},w(hr,Qr({},p,{ref:e=>P.current[s]=e}),w("span",{className:`ui-stars-star star_${s} ${M(s)}`,onMouseEnter:()=>{t.hoverScore!==s&&g(s)},onMouseLeave:()=>{g(-1)}},"stars"===j.type&&w(oa,{icon:"star",className:"is-before",alt:u})));{let e="emoji"===j.type?{dangerouslySetInnerHTML:{__html:v[F[l]]||null}}:null;return w(hr,p,w("span",e,"emoji"!==j.type&&"bar"!==j.type?s:"bar"===j.type?V[l]:null))}}),j.showCaptions&&("stars"===j.type||"ces"===L)&&w(Zr,{wrapperRef:I,positioner:-1!==b?P.current[b]:P.current[D],className:`caption ${U}`,id:`caption-${e.id}-${-1!==b?b:D}`},W)),j.legend&&!o&&w(N,null,w("span",{className:"rating-legend legend-low "+(C>-1?"wcag-legend":"")},q),w("span",{className:"rating-legend legend-high "+(C>-1?"wcag-legend":"")},H)))}function Zr({positioner:e,className:t,children:n,id:o,wrapperRef:r}){const a=fe(null),i=void 0!==e?.offsetLeft?e.offsetLeft+e.scrollWidth/2:null;return null===n?null:w("span",{ref:a,id:o,role:"tooltip",style:{left:i,opacity:null===i?0:1},className:t},n)}function Jr(){return Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jr.apply(null,arguments)}function ea({children:e,block:t,state:n,setNestedValue:o,...r}){const{elements:a,values:i,weights:s}=t.properties,{isMultiple:l,multipleIndex:c}=Un();return w("table",Jr({class:`table table-striped ${t.typeName}-table`,role:"radiogroup"},t.properties.required&&{"aria-required":!0},{"aria-labelledby":`block-title-${t.typeName}-${t.id}`}),w("thead",null,w("tr",null,w("th",{class:`${t.typeName}-subject-label`,"aria-hidden":"true"}),Object.keys(i).map(e=>w("th",{class:`${t.typeName}-answer-label`},w("div",null,w("span",null,i[e].label)))),s&&w("th",{class:`${t.typeName}-spacer`,"aria-hidden":"true"}),s&&Object.keys(s).map(e=>w("th",{class:`${t.typeName}-answer-label`},w("div",null,w("span",null,s[e].label)))))),w("tbody",null,Object.keys(a).map((e,r)=>{const u=`${t.typeName}_${t.id}_${r+1}`,p=a[e];return w("tr",null,w("td",{class:`${t.typeName}-subject`},a[e].label),Object.keys(i).map((r,s)=>{const d="matrix"===t.typeName?p.data_field?.value:p.data_field,m=i[r],f=m.value??m.label;return w("td",{class:`${t.typeName}-answer`,"data-label":i[r].label},w("div",{class:`${t.typeName}-answer-inner`},w(er,{component:"input",title:a[e].label+", "+i[r].label,ariaLabel:a[e].label+", "+i[r].label,type:"radio",name:`${u}${"matrix"===t.typeName?"_value":""}${l?"_"+c:""}`,id:`${u}${"matrix"===t.typeName?"_value":""}_${s}${l?"_"+c:""}`,value:f,checked:n[d].value===f,onChange:e=>{o(d,e.target.value)}}),w("label",{for:`${u}${"matrix"===t.typeName?"_value":""}_${s}${l?"_"+c:""}`},w("span",{style:{display:"none"}},a[e].label+", "+i[r].label))))}),s&&w("td",{class:`${t.typeName}-spacer`}),s&&Object.keys(s).map((r,i)=>{const d="matrix"===t.typeName?p.data_field?.weight:p.data_field,m=s[r],f=m.value??m.label;return w("td",{class:`${t.typeName}-answer`,"data-label":s[r].label},w("div",{class:`${t.typeName}-answer-inner`},w(er,{component:"input",type:"radio",title:a[e].label+", "+s[r].label,ariaLabel:a[e].label+", "+s[r].label,name:`${u}_weight${l?"_"+c:""}`,id:`${u}_weight_${i}${l?"_"+c:""}`,value:s[r].value?s[r].value:s[r].label,checked:n[d].value===f,onChange:e=>{o(d,e.target.value)}}),w("label",{for:`${u}_weight_${i}${l?"_"+c:""}`},w("span",{style:{display:"none"}},a[r].label+", "+s[r].label))))}),w("input",{type:"hidden",id:u}))})))}var ta=JSON.parse('{"check":{"viewBox":"0 0 28 28","path":"M26.109 8.844c0 0.391-0.156 0.781-0.438 1.062l-13.438 13.438c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-7.781-7.781c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.609 10.25-10.266c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062z"},"angle-right":{"viewBox":"0 0 9 28","path":"M9.297 15c0 0.125-0.063 0.266-0.156 0.359l-7.281 7.281c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-0.781-0.781c-0.094-0.094-0.156-0.219-0.156-0.359 0-0.125 0.063-0.266 0.156-0.359l6.141-6.141-6.141-6.141c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l0.781-0.781c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l7.281 7.281c0.094 0.094 0.156 0.234 0.156 0.359z"},"angle-left":{"viewBox":"0 0 11 28","path":"M9.797 8.5c0 0.125-0.063 0.266-0.156 0.359l-6.141 6.141 6.141 6.141c0.094 0.094 0.156 0.234 0.156 0.359s-0.063 0.266-0.156 0.359l-0.781 0.781c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-7.281-7.281c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l7.281-7.281c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l0.781 0.781c0.094 0.094 0.156 0.219 0.156 0.359z"},"paper-plane-o":{"viewBox":"0 0 28 28","path":"M27.563 0.172c0.328 0.234 0.484 0.609 0.422 1l-4 24c-0.047 0.297-0.234 0.547-0.5 0.703-0.141 0.078-0.313 0.125-0.484 0.125-0.125 0-0.25-0.031-0.375-0.078l-8.234-3.359-4.656 5.109c-0.187 0.219-0.453 0.328-0.734 0.328-0.125 0-0.25-0.016-0.359-0.063-0.391-0.156-0.641-0.531-0.641-0.938v-7.063l-7.375-3.016c-0.359-0.141-0.594-0.469-0.625-0.859-0.031-0.375 0.172-0.734 0.5-0.922l26-15c0.328-0.203 0.75-0.187 1.062 0.031zM22.219 23.594l3.453-20.672-22.406 12.922 5.25 2.141 13.484-9.984-7.469 12.453z"},"commenting-o":{"viewBox":"0 0 28 28","path":"M10 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM16 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM22 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM14 6c-6.5 0-12 3.656-12 8 0 2.328 1.563 4.547 4.266 6.078l1.359 0.781-0.422 1.5c-0.297 1.109-0.688 1.969-1.094 2.688 1.578-0.656 3.016-1.547 4.297-2.672l0.672-0.594 0.891 0.094c0.672 0.078 1.359 0.125 2.031 0.125 6.5 0 12-3.656 12-8s-5.5-8-12-8zM28 14c0 5.531-6.266 10-14 10-0.766 0-1.531-0.047-2.266-0.125-2.047 1.813-4.484 3.094-7.187 3.781-0.562 0.156-1.172 0.266-1.781 0.344h-0.078c-0.313 0-0.594-0.25-0.672-0.594v-0.016c-0.078-0.391 0.187-0.625 0.422-0.906 0.984-1.109 2.109-2.047 2.844-4.656-3.219-1.828-5.281-4.656-5.281-7.828 0-5.516 6.266-10 14-10v0c7.734 0 14 4.484 14 10z"},"star":{"viewBox":"0 0 26 28","path":"M26 10.109c0 0.281-0.203 0.547-0.406 0.75l-5.672 5.531 1.344 7.812c0.016 0.109 0.016 0.203 0.016 0.313 0 0.406-0.187 0.781-0.641 0.781-0.219 0-0.438-0.078-0.625-0.187l-7.016-3.687-7.016 3.687c-0.203 0.109-0.406 0.187-0.625 0.187-0.453 0-0.656-0.375-0.656-0.781 0-0.109 0.016-0.203 0.031-0.313l1.344-7.812-5.688-5.531c-0.187-0.203-0.391-0.469-0.391-0.75 0-0.469 0.484-0.656 0.875-0.719l7.844-1.141 3.516-7.109c0.141-0.297 0.406-0.641 0.766-0.641s0.625 0.344 0.766 0.641l3.516 7.109 7.844 1.141c0.375 0.063 0.875 0.25 0.875 0.719z"},"refresh":{"viewBox":"0 0 24 28","path":"M23.609 16.5c0 0.031 0 0.078-0.016 0.109-1.328 5.531-5.891 9.391-11.656 9.391-3.047 0-6-1.203-8.219-3.313l-2.016 2.016c-0.187 0.187-0.438 0.297-0.703 0.297-0.547 0-1-0.453-1-1v-7c0-0.547 0.453-1 1-1h7c0.547 0 1 0.453 1 1 0 0.266-0.109 0.516-0.297 0.703l-2.141 2.141c1.469 1.375 3.422 2.156 5.437 2.156 2.781 0 5.359-1.437 6.813-3.813 0.375-0.609 0.562-1.203 0.828-1.828 0.078-0.219 0.234-0.359 0.469-0.359h3c0.281 0 0.5 0.234 0.5 0.5zM24 4v7c0 0.547-0.453 1-1 1h-7c-0.547 0-1-0.453-1-1 0-0.266 0.109-0.516 0.297-0.703l2.156-2.156c-1.484-1.375-3.437-2.141-5.453-2.141-2.781 0-5.359 1.437-6.813 3.813-0.375 0.609-0.562 1.203-0.828 1.828-0.078 0.219-0.234 0.359-0.469 0.359h-3.109c-0.281 0-0.5-0.234-0.5-0.5v-0.109c1.344-5.547 5.953-9.391 11.719-9.391 3.063 0 6.047 1.219 8.266 3.313l2.031-2.016c0.187-0.187 0.438-0.297 0.703-0.297 0.547 0 1 0.453 1 1z"},"camera":{"viewBox":"0 0 30 28","path":"M15 10.5c2.484 0 4.5 2.016 4.5 4.5s-2.016 4.5-4.5 4.5-4.5-2.016-4.5-4.5 2.016-4.5 4.5-4.5zM26 4c2.203 0 4 1.797 4 4v14c0 2.203-1.797 4-4 4h-22c-2.203 0-4-1.797-4-4v-14c0-2.203 1.797-4 4-4h3.5l0.797-2.125c0.391-1.031 1.609-1.875 2.703-1.875h8c1.094 0 2.312 0.844 2.703 1.875l0.797 2.125h3.5zM15 22c3.859 0 7-3.141 7-7s-3.141-7-7-7-7 3.141-7 7 3.141 7 7 7z"},"conversational_avatar":{"viewBox":"0 0 100 100","path":"M100.154,38.129c-0,-16.686 -13.617,-30.232 -30.388,-30.232c-0,-0 -39.225,-0 -39.225,-0c-2.508,-0 -4.945,0.303 -7.278,0.874c-13.261,3.248 -23.109,15.168 -23.109,29.358c-0,-0 -0,23.742 -0,23.742c-0,16.686 13.616,30.232 30.387,30.232c0,0 39.225,0 39.225,0c16.771,0 30.388,-13.546 30.388,-30.232c-0,0 -0,-23.742 -0,-23.742Zm-4.95,-0l0,23.742c0,13.968 -11.398,25.308 -25.438,25.308l-39.225,0c-14.039,0 -25.438,-11.34 -25.438,-25.308l0,-23.742c0,-9.876 5.698,-18.438 13.999,-22.607c3.44,-1.728 7.326,-2.701 11.439,-2.701l39.225,-0c14.04,-0 25.438,11.34 25.438,25.308Zm-32.911,27.713c-0,-0 -11.176,5.394 -24.427,-0.035c-1.263,-0.518 -2.71,0.082 -3.23,1.339c-0.521,1.256 0.082,2.697 1.345,3.214c15.456,6.333 28.493,-0.098 28.493,-0.098c1.226,-0.599 1.733,-2.075 1.131,-3.295c-0.602,-1.22 -2.086,-1.724 -3.312,-1.125Zm-31.103,-30.785c-5.007,0 -8.999,3.884 -8.999,8.574c-0,4.69 3.992,8.574 8.999,8.574c5.007,0 9,-3.884 9,-8.574c-0,-4.69 -3.993,-8.574 -9,-8.574Zm37.927,0c-5.007,0 -8.999,3.884 -8.999,8.574c-0,4.69 3.992,8.574 8.999,8.574c5.007,0 9,-3.884 9,-8.574c-0,-4.69 -3.993,-8.574 -9,-8.574Zm-37.927,4.924c2.196,0 4.05,1.593 4.05,3.65c0,2.057 -1.854,3.65 -4.05,3.65c-2.196,-0 -4.05,-1.593 -4.05,-3.65c0,-2.057 1.854,-3.65 4.05,-3.65Zm37.927,0c2.196,0 4.05,1.593 4.05,3.65c0,2.057 -1.854,3.65 -4.05,3.65c-2.196,-0 -4.05,-1.593 -4.05,-3.65c0,-2.057 1.854,-3.65 4.05,-3.65Z"},"angle-down":{"viewBox":"0 0 18 28","path":"M16.797 11.5c0 0.125-0.063 0.266-0.156 0.359l-7.281 7.281c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-7.281-7.281c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l0.781-0.781c0.094-0.094 0.219-0.156 0.359-0.156 0.125 0 0.266 0.063 0.359 0.156l6.141 6.141 6.141-6.141c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l0.781 0.781c0.094 0.094 0.156 0.234 0.156 0.359z"},"mouse-pointer":{"viewBox":"0 0 15 24","path":"M 14.165105,15.428026 H 9.1924207 l 2.6170773,6.37467 c 0.182296,0.441936 -0.02601,0.937453 -0.442688,1.124953 l -2.3046089,1.00439 c -0.429609,0.1875 -0.9113909,-0.02676 -1.0936864,-0.455343 L 5.4816561,17.423447 1.4192808,21.601789 C 0.87792163,22.158524 0,21.729336 0,20.999165 V 0.85801274 C 0,0.0892628 0.93379672,-0.28550273 1.4192341,0.25538778 L 14.751044,13.968291 c 0.53775,0.524015 0.140953,1.459735 -0.585939,1.459735 z"},"language":{"viewBox":"0 0 24 28","path":"M10.219 16.844c-0.031 0.109-0.797-0.25-1-0.328-0.203-0.094-1.125-0.609-1.359-0.766s-1.125-0.891-1.234-0.938v0c-0.562 0.859-1.281 1.875-2.094 2.828-0.281 0.328-1.125 1.391-1.641 1.719-0.078 0.047-0.531 0.094-0.594 0.063 0.25-0.187 0.969-1.078 1.281-1.437 0.391-0.453 2.25-3.047 2.562-3.641 0.328-0.594 1.312-2.562 1.359-2.75-0.156-0.016-1.391 0.406-1.719 0.516-0.313 0.094-1.172 0.297-1.234 0.344-0.063 0.063-0.016 0.25-0.047 0.313s-0.313 0.203-0.484 0.234c-0.156 0.047-0.516 0.063-0.734 0-0.203-0.047-0.391-0.25-0.438-0.328 0 0-0.063-0.094-0.078-0.359 0.187-0.063 0.5-0.078 0.844-0.172s1.188-0.344 1.641-0.5 1.328-0.484 1.594-0.547c0.281-0.047 0.984-0.516 1.359-0.641s0.641-0.281 0.656-0.203 0 0.422-0.016 0.516c-0.016 0.078-0.766 1.547-0.875 1.781-0.063 0.125-0.5 0.953-1.203 2.047 0.25 0.109 0.781 0.328 1 0.438 0.266 0.125 2.125 0.906 2.219 0.938s0.266 0.75 0.234 0.875zM7.016 9.25c0.047 0.266-0.031 0.375-0.063 0.438-0.156 0.297-0.547 0.5-0.781 0.594s-0.625 0.187-0.938 0.187c-0.141-0.016-0.422-0.063-0.766-0.406-0.187-0.203-0.328-0.75-0.266-0.688s0.516 0.125 0.719 0.078 0.688-0.187 0.906-0.25c0.234-0.078 0.703-0.203 0.859-0.219 0.156 0 0.281 0.063 0.328 0.266zM17.922 11.266l0.984 3.547-2.172-0.656zM0.609 23.766l10.844-3.625v-16.125l-10.844 3.641v16.109zM20 18.813l1.594 0.484-2.828-10.266-1.563-0.484-3.375 8.375 1.594 0.484 0.703-1.719 3.297 1.016zM12.141 3.781l8.953 2.875v-5.938zM17 24.453l2.469 0.203-0.844 2.5-0.625-1.031c-1.266 0.812-2.828 1.437-4.312 1.687-0.453 0.094-0.969 0.187-1.422 0.187h-1.313c-1.656 0-4.672-0.984-5.984-1.937-0.094-0.078-0.125-0.141-0.125-0.25 0-0.172 0.125-0.297 0.281-0.297 0.141 0 0.875 0.453 1.078 0.547 1.406 0.703 3.375 1.344 4.953 1.344 1.953 0 3.281-0.25 5.063-1.016 0.516-0.234 0.969-0.531 1.453-0.797zM24 7.594v16.859c-12.078-3.844-12.094-3.844-12.094-3.844-0.25 0.109-11.453 3.891-11.609 3.891-0.125 0-0.234-0.078-0.281-0.203 0-0.016-0.016-0.031-0.016-0.047v-16.844c0.016-0.047 0.031-0.125 0.063-0.156 0.094-0.109 0.219-0.141 0.313-0.172 0.047-0.016 1-0.328 2.328-0.781v-6l8.719 3.094c0.109-0.031 9.828-3.391 9.969-3.391 0.172 0 0.313 0.125 0.313 0.328v6.531z"}}');function na(){return na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},na.apply(null,arguments)}function oa({icon:e,className:t="",style:n,...o}){const{icons:r}=zn(),a=String(e).replace("fa-","").replace("fa ",""),i=ta[a]??r[a];return i?w(ra,na({name:a,icon:i,className:t,style:n},o)):w(aa,na({name:a,className:t,style:n},o))}function ra({name:e,icon:t={},className:n="",style:o,...r}){const{alt:a,...i}=r;return w("i",na({className:`mopicon mopicon-${e} ${n}`,role:"none",style:o},i),w("svg",na({viewBox:t.viewBox||"0 0 28 28",role:a?"img":"presentation"},!a&&{"aria-hidden":"true"}),a&&w("title",null,a),w("path",{d:t.path||"",fill:"currentColor"})))}function aa({name:e,className:t,style:n,...o}){const{domain:a,cacheDomain:i,customDomain:s}=Un(),[l,c]=ue({}),u=Qt();return de(()=>{Wt({domain:a,cacheDomain:i,customDomain:s}).getIcons(e).then(t=>{if(u){const n="string"==typeof r?JSON.parse(t):t;ta[e]=n[e],c(n[e])}})},[]),w(ra,na({icon:l,className:t,style:n},o))}function ia(){const{customDomain:e}=Un(),{formType:t,contentDivRef:n}=Wo(),{translationSet:o,properties:{translation:r},actions:a}=zn(),i=Vo(),s=fe(null),l=fe(null),[c,u]=ue(!1),p=ye(e=>u(t=>void 0===e?!t:e),[]),{onKeyDown:d}=Vr({onSpaceEnter:(e,t)=>{c||(e.preventDefault(),p(),Vt(l.current))},onTabUp:(e,t)=>{t||(e.preventDefault(),p()),t?.isFirstOption&&(e.preventDefault(),Vt(l.current))},onTabDown:(e,t)=>{t?.isLastOption&&(e.preventDefault(),Vt(l.current))}});de(()=>{const e=e=>{s.current?.contains(e.target)||p(!1)},o="embed"===t?document:n.current;return setTimeout(()=>{c?o?.addEventListener("click",e):o?.removeEventListener("click",e)}),()=>{o?.removeEventListener("click",e)}},[c,t,n,p]);const m=[{value:"default",label:"Default language",countrycode:""}].concat(Object.keys(r.toggleOptions).map(e=>r.toggleOptions[e])),f=m.filter(e=>e.value===o)[0],h=`https://${e}/assets/img/countryflags`;return w("div",{class:"language-toggle-wrap wcag"},w("div",{className:`language-toggle ${c?"open":""} ${f?.countrycode?"has-icon":""}`},w(er,{component:"button",type:"button",onClick:()=>{p()},onKeyDown:e=>d(e),ref:s,"aria-label":"choose language",className:"toggle"},w(oa,{icon:"language",alt:"language select icon"}),w("span",{className:"current-flag"},f?.countrycode?w("img",{src:`${h}/${f.countrycode}.svg`,alt:`${f.label} flag`}):""),w("span",{className:"current"},"default"===f?.value?"":f?.label),w("span",{className:"caret"})),w("div",{className:"toggle-menu"},w("div",{className:"toggle-caret"}),w("div",{className:"toggle-item-wrap"},w("span",{className:"toggle-menu-close"},w(er,{component:"button",type:"button",onClick:()=>p(),ref:l,onKeyDown:e=>d(e),"aria-label":"close language selection",className:"toggle-close"})),m.map((e,t)=>w(er,{component:"button",type:"button",onClick:()=>{return t=e.value,a.setLanguage(t),p(!1),void i("language_changed");var t},onKeyDown:n=>{d(n,{value:e.value,isFirstOption:0===t,isLastOption:t===m.length-1})},className:"toggle-menu-item "+(o===e.value||!o&&"default"===e.value?"selected":"")},w("span",{className:"toggle-menu-flag"},e.countrycode?w("img",{src:`${h}/${e.countrycode}.svg`,alt:`${e.label} flag`}):""," "),w("span",{className:"toggle-menu-label"},e.countrycode?e.label:w("span",{style:{fontStyle:"italic"}},e.label))))))))}function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},sa.apply(null,arguments)}const la=`https://www.google.com/recaptcha/api.js?&onload=recaptchaLoaded&render=explicit${"undefined"!=typeof window&&window.recaptchaOptions&&window.recaptchaOptions.lang?`&hl=${window.recaptchaOptions.lang}`:""}`,ca=()=>"undefined"!=typeof window&&void 0!==window.grecaptcha;class ua extends O{constructor(){super(),this.waitingTimer=null,this.element=null,this.recaptchaId=null,this._captureRef=this.captureRef.bind(this),this._initializeRecaptcha=this.initializeRecaptcha.bind(this),this._handleExpired=this.handleExpired.bind(this),this._handleChange=this.handleChange.bind(this)}componentDidMount(){this.initializeRecaptcha()}componentWillUnmount(){this.clearTimer(),ca()&&this.element&&null!==this.recaptchaId&&this.removeRecaptcha(),window.___grecaptcha_cfg&&(delete window.___grecaptcha_cfg.clients[this.recaptchaId],window.___grecaptcha_cfg.count--)}render(){const{sitekey:e,onChange:t,theme:n,type:o,tabindex:r,onExpired:a,size:i,stoken:s,grecaptcha:l,badge:c,...u}=this.props;return w("div",sa({},u,{ref:this._captureRef}))}execute=()=>!(!ca()||!this.element||null===this.recaptchaId||"invisible"!==this.props.size)&&(grecaptcha.execute(this.recaptchaId),!0);reset=()=>!(!ca()||!this.element||null===this.recaptchaId)&&(grecaptcha.reset(this.recaptchaId),!0);getResponse=()=>ca()&&this.element&&null!==this.recaptchaId?grecaptcha.getResponse(this.recaptchaId):null;handleChange=e=>{this.props.onChange&&this.props.onChange(e)};handleExpired=()=>{this.props.onExpired&&this.props.onExpired()};removeRecaptcha=()=>{grecaptcha.reset(this.recaptchaId)};renderRecaptcha=()=>{this.recaptchaId=grecaptcha.render(this.element,{sitekey:this.props.sitekey,callback:this._handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this._handleExpired,size:this.props.size,stoken:this.props.stoken,badge:this.props.badge})};captureRef=e=>{this.element=e};initializeRecaptcha=()=>{if(ca())this.clearTimer(),this.renderRecaptcha();else if(this.isRecaptchaJSLibInjected())this.startTimer();else{let e=document.createElement("script");window.recaptchaLoaded=this.initializeRecaptcha.bind(this),e.src=la,e.async=1,e.defer=1,e.onerror=()=>{},document.body.appendChild(e)}};isRecaptchaJSLibInjected=()=>{if("undefined"==typeof window)return!1;if(!document.scripts||0===document.scripts.length)return!1;return Object.assign([],document.scripts).filter(e=>null!==e.src.match(/((http|https):)?\/\/(www\.)?google\.com\/recaptcha\/(.*)/i)).length>0};startTimer=()=>{this.waitingTimer=setTimeout(this._initializeRecaptcha,200)};clearTimer=()=>{null!==this.waitingTimer&&clearInterval(this.waitingTimer)}}function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pa.apply(null,arguments)}ua.defaultProps={theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};class da extends O{reCaptchaNode=null;validateCaptcha=e=>{const{domain:t,customDomain:n}=this.props;Wt({domain:t,customDomain:n}).validateReCaptcha({surveyKey:this.props.formKey,recaptcha:e}).then(e=>{if(e.recaptchaValid)this.props.setValue(!0);else try{this.reCaptchaNode.reset()}catch(e){}}).catch(e=>{try{this.reCaptchaNode.reset()}catch(e){}})};expireCaptcha=e=>{try{this.props.setValue("")}catch(e){}};render(){return w(ua,{key:"recaptcha",ref:this.reCaptchaNode,sitekey:this.props.siteKey,onChange:e=>this.validateCaptcha(e),onExpired:e=>this.expireCaptcha(e)})}}function ma(){const{branding:e}=zn(),{brandingRef:t}=Wo();return w("div",null,e?w("span",{dangerouslySetInnerHTML:{__html:e}}):w("div",{id:"branding",class:"branding anim",style:{textAlign:"center"}},w(er,{ref:t,component:"a",href:"https://mopinion.com/form-referral-landing/?track=FormReferral",id:"branding-link",target:"_blank",class:"center-branding",style:{display:"inline-block!important"},"aria-label":"Powered by Mopinion",rel:"noreferrer"},w("span",{class:"brand-text",lang:"en",style:{display:"inline-block!important"}},"Powered by"),w("span",{class:"brand-logo",style:{display:"inline-block!important"}},w("svg",{alt:"Mopinion logo",xmlns:"http://www.w3.org/2000/svg",style:{display:"inline-block!important",verticalAlign:"middle"},viewBox:"0 0 462.51416 118.31606"},w("path",{d:"m 98.694152,16.190639 -81.63,-15.91 a 14.25,14.25 0 0 0 -16.99999968,15.32 L 8.2641523,105.30064 a 14.23,14.23 0 0 0 18.0799997,12.47 L 107.45415,95.160639 a 14.23,14.23 0 0 0 10.28,-15.88 l -7.66,-51.18 a 14.11,14.11 0 0 0 -11.409998,-11.91 z",style:"fill:#c82027;fill-rule:evenodd"}),w("path",{d:"m 66.684152,86.010639 h -14.74 v -31.57 c 0,-3.89 -0.65,-6.82 -2,-8.77 -1.35,-1.95 -3.36,-2.92 -6.16,-2.92 q -5.66,0 -8.22,4.15 c -1.71,2.78 -2.56,7.33 -2.56,13.68 v 25.43 h -14.71 v -54 h 11.27 l 2,6.91 h 0.82 a 15.06,15.06 0 0 1 6.27,-5.91 20.39,20.39 0 0 1 9.42,-2.1 q 12.13,0 16.44,7.93 h 1.3 a 14.66,14.66 0 0 1 6.41,-5.83 21.3,21.3 0 0 1 9.55,-2.08 q 9.18,0 13.89,4.71 4.709998,4.71 4.719998,15.11 v 35.26 H 85.564152 v -31.57 c 0,-3.89 -0.65,-6.82 -2,-8.77 -1.35,-1.95 -3.36,-2.92 -6.17,-2.92 q -5.42,0 -8.09,3.86 -2.67,3.86 -2.69,12.28 z",style:"fill:#ffffff"}),w("g",{style:"fill:#303031",transform:"translate(-68.435848,-44.989361)"},w("path",{d:"m 243.8,103.9 q 0,13.23 -6.79,20.65 -6.79,7.42 -18.89,7.45 a 25.86,25.86 0 0 1 -13.38,-3.42 22.51,22.51 0 0 1 -8.94,-9.82 33.45,33.45 0 0 1 -3.12,-14.84 q 0,-13.14 6.73,-20.51 6.73,-7.37 19,-7.37 11.72,0 18.55,7.54 6.83,7.54 6.84,20.32 z m -39.31,0 q 0,18.7 13.82,18.7 13.66,0 13.67,-18.7 0,-18.51 -13.77,-18.51 -7.23,0 -10.47,4.79 -3.24,4.79 -3.25,13.72 z"}),w("path",{d:"m 281.67,132 q -10.25,0 -15.91,-7.38 h -0.69 q 0.69,6.84 0.69,8.3 V 154 H 254.28 V 77 h 9.28 c 0.26,1 0.8,3.41 1.61,7.22 h 0.59 q 5.37,-8.2 16.11,-8.2 10.11,0 15.75,7.32 5.64,7.32 5.64,20.56 0,13.23 -5.74,20.65 -5.74,7.42 -15.85,7.45 z m -2.78,-46.59 q -6.84,0 -10,4 -3.16,4 -3.15,12.79 v 1.71 q 0,9.87 3.12,14.28 3.12,4.41 10.21,4.42 a 10.37,10.37 0 0 0 9.18,-4.88 c 2.15,-3.26 3.22,-7.89 3.22,-13.92 0,-6.03 -1.07,-10.63 -3.2,-13.74 a 10.66,10.66 0 0 0 -9.38,-4.68 z"}),w("path",{d:"M 325.36,131 H 313.89 V 77 h 11.47 z m -5.85,-60.76 a 6.62,6.62 0 0 1 -6.62,-6.62 6.62,6.62 0 0 1 6.62,-6.62 6.61,6.61 0 0 1 6.61,6.62 6.62,6.62 0 0 1 -6.61,6.62 z"}),w("path",{d:"M 386.58,131 H 375.05 V 97.8 c 0,-4.17 -0.83,-7.28 -2.51,-9.33 -1.68,-2.05 -4.34,-3.08 -8,-3.08 q -7.28,0 -10.65,4.3 -3.37,4.3 -3.37,14.41 V 131 H 339.07 V 77 h 9 l 1.61,7.08 h 0.59 a 16,16 0 0 1 6.93,-6 23.26,23.26 0 0 1 10,-2.1 q 19.44,0 19.44,19.77 z"}),w("path",{d:"M 411.32,131 H 399.84 V 77 h 11.48 z m -5.9,-60.76 a 6.59,6.59 0 0 1 -6.58,-6.58 6.58,6.58 0 0 1 6.58,-6.58 6.57,6.57 0 0 1 6.58,6.58 6.58,6.58 0 0 1 -6.58,6.58 z"}),w("path",{d:"m 472.93,103.9 q 0,13.23 -6.79,20.65 -6.79,7.42 -18.9,7.45 a 25.91,25.91 0 0 1 -13.38,-3.42 22.55,22.55 0 0 1 -8.93,-9.82 33.31,33.31 0 0 1 -3.13,-14.84 q 0,-13.14 6.74,-20.51 6.74,-7.37 19,-7.37 11.71,0 18.55,7.54 6.84,7.54 6.84,20.32 z m -39.31,0 q 0,18.7 13.82,18.7 13.67,0 13.67,-18.7 0,-18.51 -13.77,-18.51 -7.23,0 -10.47,4.79 -3.24,4.79 -3.25,13.72 z"}),w("path",{d:"M 530.92,131 H 519.4 V 97.8 q 0,-6.26 -2.52,-9.33 -2.52,-3.07 -8,-3.08 -7.27,0 -10.65,4.3 -3.38,4.3 -3.37,14.41 V 131 H 483.41 V 77 h 9 l 1.59,7.08 h 0.59 a 16,16 0 0 1 6.93,-6 23.28,23.28 0 0 1 10,-2.1 q 19.43,0 19.43,19.77 z"})))))))}function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},fa.apply(null,arguments)}var ha=Pe(function({text:e,...t},n){return w(er,fa({ref:n},t),Pt(e))});let ya=!1;const _a={current:null},ba=e=>{if(e.tabIndex<0||null===e.offsetParent||!1===(e=>!!e&&e.getBoundingClientRect()?.x>0&&e.getBoundingClientRect()?.y>0)(e))return!1;switch(e.tagName){case"DIV":return!0;case"A":return!!e.href;case"INPUT":return"hidden"!==e.type&&!e.disabled;case"SELECT":case"TEXTAREA":case"BUTTON":return!e.disabled;default:return!1}};class ga extends O{onMouseMove=e=>{this.props.showCapture&&this.props.onMouseMove(e)};onClick=e=>{this.props.showCapture&&!ya&&this.props.onClick(e)};onKeyDown=e=>{this.props.showCapture&&!ya&&this.props.onKeyDown(e)};onKeyUp=e=>{e.stopPropagation(),this.props.showCapture&&!ya&&this.props.onKeyUp(e)};onScroll=e=>{this.props.onScroll(e)};onTouchEnd=e=>{ya=!0,this.props.showCapture&&"function"==typeof this.props.onClick&&this.props.onClick(e)};componentDidMount(){try{_a.current.focus()}catch(e){}"function"==typeof this.props.onMouseMove&&window.addEventListener("mousemove",this.onMouseMove),"function"==typeof this.props.onScroll&&window.addEventListener("scroll",this.onScroll),"function"==typeof this.props.onClick&&setTimeout(()=>{window.addEventListener("mousedown",this.onClick),window.addEventListener("click",this.onClick)}),"function"==typeof this.props.onKeyDown&&setTimeout(()=>{window.addEventListener("keydown",this.onKeyDown)}),"function"==typeof this.props.onKeyUp&&setTimeout(()=>{window.addEventListener("keyup",this.onKeyUp)}),window.addEventListener("touchend",this.onTouchEnd)}componentWillUnmount(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("mousedown",this.onClick),window.removeEventListener("click",this.onClick),window.removeEventListener("touchstart",this.onTouchEnd),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}render({children:e}){return e}}const va={dimTop:{},dimRight:{},dimLeft:{},dimBottom:{},dimHighlight:{},selectedTarget:!1,dom:{},selector:{}};class ka extends O{constructor(e){super(e),this.state=va}mouseMove(e){this.state.selectedTarget||ya||this.setDim(e.target)}componentDidUpdate(e){!e.screenshotActive&&this.props.screenshotActive&&this.setState({dimTop:{},dimRight:{},dimLeft:{},dimBottom:{},dimHighlight:{},selectedTarget:!1})}anonymizeDOM(e){const t=e.querySelector("html");kt(t.querySelectorAll("script")).forEach(e=>{try{e.parentNode.removeChild(e)}catch(e){}});const n=/(<|>|%3C|%3E|\\u003C|\\u003E)/gi;kt(t.querySelectorAll("*")).forEach(e=>{try{if(!e.hasAttributes())return;for(const t of e.attributes)n.test(t.value)&&(t.value=t.value.replace(n,""))}catch(e){qt(e)}});const o=t.querySelector("#mopinion_dimmer_overlay");o&&o.parentNode.removeChild(o);let r=["[data-mop-supress]"];this.props.block.properties.hasOwnProperty("maskedSelectors")&&(r=[...r,this.props.block.properties.maskedSelectors]),kt(t.querySelectorAll("input, select, textarea")).forEach(e=>{try{wt(e)}catch(e){}try{e.checked=!1}catch(e){}try{e.setAttribute("data-mopinion-mask-input","")}catch(e){}}),r.forEach(e=>{try{kt(t.querySelectorAll(e)).forEach(e=>{e.setAttribute("data-mopinion-mask-extra","")})}catch(e){}});const a=t.querySelector("base");if(a){if(a){const e=-1===a.href.indexOf(window.location.origin)?`${window.location.origin}${"/"===a.href.charAt(0)?a.href:"/"+a.href}`:a.href;a.href=e}}else{const t=e.createElement("base");t.href=window.location.origin,i=e.querySelector("head"),s=t,i.insertBefore(s,i.firstChild)}var i,s;return(e=>{let t={'"':"&quot;","'":"&#039;"};return e.replace(/["']/g,e=>t[e])})(t.outerHTML.replace(/(\r\n|\n|\r|\u2028|\u2029)/gm,"").trim())}anonymizeSelector(e){const{block:t}=this.props;let n=["[data-mop-supress]"];t.properties.hasOwnProperty("maskedSelectors")&&vt(t.properties.maskedSelectors)&&(n=[...n,...t.properties.maskedSelectors]);try{["INPUT","TEXTAREA","SELECT"].indexOf(e.tagName)>-1&&wt(e)}catch(e){}return kt(e.querySelectorAll("input, select, textarea")).forEach(e=>{try{wt(e)}catch(e){}try{e.checked=!1}catch(e){}try{e.setAttribute("data-mopinion-mask-input","")}catch(e){}}),n.forEach(t=>{if("string"==typeof t){let n=document.querySelector(t);n&&e.isEqualNode(n)?e.innerHTML="***":kt(e.querySelectorAll(t)).forEach(e=>{e.innerHTML="***"})}}),e.outerHTML.replace(/(\r\n|\n|\r)/gm," ").trim()}onClick(e,t=!1){if(this.props.showCapture&&("embed"!==this.props.formType||!this.state.selectedTarget)&&("mousedown"!==e.type&&e.preventDefault(),e.stopPropagation(),!this.state.selectedTarget&&!this.dimmer?.contains(e.target)||ya||this.props.contentDivRef?.current?.contains(e.selectedTarget))){let t=e.target;if(ya&&!ht(e.target,"btn-select-touch"))return this.setDim(e.target,!0);ya&&ht(e.target,"btn-select-touch")&&(t=this.state.selectedTarget);try{document.querySelector("[data-mopinion-screen-capture]").removeAttribute("[data-mopinion-screen-capture]")}catch(e){}t.setAttribute("data-mopinion-screen-capture","");const n=this.anonymizeSelector(t.cloneNode(!0)),o=this.applyCollectedCss(document.cloneNode(!0)),r=this.anonymizeDOM(o);return this.setState(()=>({dom:r,selector:n}),()=>{this.setDim(t,!0),this.props.setScreenshot({dom:this.state.dom,selector:this.state.selector,value:on}),this.props.toggleCapture(!1)})}}applyCollectedCss(e){let t="";for(const n of document.styleSheets)try{for(const e of n.cssRules)t+=e.cssText;const o=n.ownerNode;for(const t of e.querySelectorAll(o.nodeName))o.isEqualNode(t)&&t.parentNode.removeChild(t)}catch(e){qt({e:e,sheet:n})}for(const t of e.querySelectorAll("style"))try{t.parentNode.removeChild(t)}catch(e){qt(e)}const n=e.createElement("style");return n.appendChild(document.createTextNode(t)),e.head.appendChild(n),e}onKeyDown(e){"Escape"===e.key&&(this.props.toggleCapture(!1),this.props.setScreenshot({dom:"",selector:"",value:""}),this.setState(va)),["Enter","Space"].indexOf(e.code)>-1&&(e.stopPropagation(),this.onClick(e))}onKeyUp(e){"Tab"===e.key&&this.setDim(e.target)}onScroll(e){this.state.selectedTarget&&this.setDim(this.state.selectedTarget,!0)}setDim(e,t){let n=e.getBoundingClientRect(),o={position:"fixed",background:"rgba(0,0,0,.3)",pointerEvents:"none"};this.setState(()=>{let r={dimTop:Object.assign({},o,{top:0,height:n.top,left:0,right:0}),dimRight:Object.assign({},o,{top:n.top,height:n.height,width:window.innerWidth-n.right,right:0}),dimBottom:Object.assign({},o,{top:n.bottom,bottom:0,left:0,right:0}),dimLeft:Object.assign({},o,{top:n.top,height:n.height,left:0,width:n.left})};return e&&t?(r.dimHighlight={position:"fixed",top:n.top-3,left:n.left-3,height:n.height+6,width:n.width+6},r.selectedTarget=e):(r.dimHighlight={},r.tempHighlight={position:"fixed",top:n.top-3,left:n.left-3,height:n.height+6,width:n.width+6},"embed"===this.props.formType&&(r.tempHighlight.borderColor="#B6B6B6")),{...r}})}render(e,t,n){return e.showCapture?w("div",null,w(ot,{into:document.body},w(ga,{onMouseMove:e=>{this.mouseMove(e)},onClick:e=>{this.onClick(e)},onKeyDown:e=>{this.onKeyDown(e)},onKeyUp:e=>{this.onKeyUp(e)},onScroll:e=>{this.onScroll(e)},showCapture:e.screenshotActive,dimmerRef:this.dimmerNode},w("div",{style:{zIndex:1999999998},id:"mopinion_dimmer_overlay","data-dimmer-for":e.formKey,class:e.themeClass+" mopinion-dimmer wcag",ref:e=>this.dimmer=e},w("div",{class:"dimmer-border"}),w("div",{class:"dimmer-actions"},0===Object.keys(t.dimHighlight).length&&w("div",{class:"dimmer-text",id:"dimmer-text",tabIndex:0,ref:_a},w(oa,{key:"mouse",icon:"mouse-pointer",style:{marginRight:"10px"},alt:"mouse-pointer icon"}),e.text.screenCaptureText),Object.keys(t.dimHighlight).length>0&&w("div",null,w(oa,{key:"check",icon:"check",style:{marginRight:"10px"},alt:"check icon"}),e.text.screenCaptureSelected),w("button",{class:"dimmer-cancel",onClick:()=>{this.props.toggleCapture(!1),this.props.setScreenshot({dom:"",selector:"",value:""}),this.setState(va)},onKeyDown:e=>{["Enter","Space"].indexOf(e.key)>-1&&(e.stopPropagation(),this.props.toggleCapture(!1),this.props.setScreenshot({dom:"",selector:"",value:""}),this.setState(va)),"Tab"!==e.key||e.shiftKey||(e.preventDefault(),document.activeElement.blur(),kt(document.getElementsByTagName("*")).filter(ba)[0]?.focus())},"aria-label":"Cancel"},"")),Object.keys(t.dimTop).length>0&&w("div",null,!e.hideBackdrop&&w("div",null,w("div",{style:t.dimTop}),w("div",{style:t.dimRight}),w("div",{style:t.dimBottom}),w("div",{style:t.dimLeft})),Object.keys(t.dimHighlight).length?w("div",{class:"dimmer-highlight dimmer-selected",style:t.dimHighlight,onClick:e=>{e.preventDefault(),e.stopPropagation()}},ya?w("button",{type:"button",class:"btn-select-touch"},e.text.screenCaptureTouchBtnText):null):Object.keys(t.tempHighlight).length>0?w("div",{class:"dimmer-highlight",style:t.tempHighlight,onClick:e=>{e.preventDefault(),e.stopPropagation()}}):null),0===Object.keys(t.dimTop).length&&w("div",null,w("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,.3)"}}),w("div",{class:"capture-hint"},w(oa,ya?{icon:"hand-pointer-o",alt:"hand pointer icon"}:{icon:"mouse-pointer",alt:"mouse pointer icon"}),w("div",null,e.text.screenCaptureHint))))))):null}}function wa({id:e}){const{state:t,block:n,actions:o}=uo({id:e}),{formType:r,contentDivRef:a,screenshotActive:i,formOpen:s,actions:l}=Wo(),{text:c,themeClass:u}=zn(),{formKey:p}=Un(),d=ye(({dom:e,selector:t,value:n})=>{o.setNestedValue("dom",e),o.setNestedValue("selector",t),o.setValue(n)},[]);return w(ka,{block:n,setScreenshot:d,text:c,screenshotActive:s&&i,showCapture:Boolean(s&&i||s&&t.value),toggleCapture:l.toggleScreenshot,hideBackdrop:"embed"===r&&!i||!i,contentDivRef:a,formKey:p,themeClass:u})}function xa({formIsCompleted:e}){const{shiftFocusToTopRef:t,actionButtonRef:n,brandingRef:o,closeButtonRef:r}=Wo();return w(er,{ref:t,useTabIndexWhenOpen:!0,component:"div",onFocus:t=>{t.relatedTarget!==r.current||e?Vt(r.current):Vt(n.current??o.current)}})}function Na(e,t){try{return t>e[0]?e[1]:e[1]*(t/e[0])}catch(e){return 0}}function Oa({formKey:e,setFormHeaderHeight:t=()=>{}}){const{properties:n,properties:{conversational:o},text:r}=zn(),{formIsCompleted:a,loading:i,formOpen:s,contentDivRef:l}=Wo(),[c,u]=ue(!1),p=fe(null);de(()=>{try{t(p.current?.clientHeight)}catch(e){}},[]);const d=n.advanced?.headerElement??"h3",m=!a||i||n.conversational?Pt(n.title):"object"==typeof n.thanksPage?n.thanksPage.title:r?.lastPageTitle,f=n?.translation?.useTranslation&&n?.translation?.useToggle,h=n.logo&&(c||s||Lt());return w("div",{id:"surveyHead",className:"survey-header "+(f?"has-toggle":""),style:o?{margin:0,position:"relative"}:{},ref:p},h&&w("img",{onLoad:()=>u(!0),style:c?{transition:"opacity .3s",opacity:1}:{transition:"opacity .3s",opacity:0,height:Na(n.logoSize,l.current?.clientWidth)},src:$t(n.logo),alt:r?.logoAltText??"Logo"}),w("div",{id:`surveyTitle-${e}`,class:"srv-title main-title"},m&&w(d,null,m)))}function Sa(){const{activePage:e,formType:t}=Wo(),{properties:n,pageMap:o}=zn(),r=Number(Object.keys(o).pop()),a=jo(),i=fe(null);return de(()=>{1!==e&&Vt(i.current,100)},[e]),n.advanced?.showProgressbar&&n.advanced?.toggleDotview?w(er,{className:"progress dot-layout",id:"progress","aria-label":`Page ${e} of ${r}`,ref:i},Object.keys(o).map(t=>{const n=Number(t);return w("div",{style:{width:`${Math.floor(100/(r-1))}%`},className:`progress-wrap ${e>n?"completed":""} ${n===e?"active":""} ${n===r?"last":""}`,"data-pagecount":n},w("div",{className:"progress-dot"},e>n?w(oa,{icon:"check",alt:"check icon"}):n))})):w("div",{id:"progress",className:"progress bar-layout"},w(er,{ref:i,id:"progressBar","aria-label":`Page ${e} of ${r}`,className:"bar",style:{width:`${a}%`}}))}function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},$a.apply(null,arguments)}const Ea={textarea:Sr,input:Sr,radio:br,checkbox:br,select:gr,rating:Xr,nps:Xr,ces:Xr,gcr:br,thumbs:br,category:br,contact:Cr,link:or,likert:ea,matrix:ea,screenshot:Ir,website_data:Tr,section_break:function({children:e,block:t,...n}){return w("p",{tabIndex:"-1",id:`section_description_${t.id}`,className:"section-description"},Pt(t.properties.description))},recaptcha:function(e){const{formKey:t,domain:n,customDomain:o}=Un(),r=Gn();return w(da,pa({},e,{domain:n,customDomain:o,formKey:t,siteKey:r?.recaptcha?.siteKey}))},multimedia:sr,[fn]:jr};function Ca({state:e,block:t,actions:n,showErrors:o}){const r=t.properties.elements_extra[Object.keys(t.properties.elements_extra).pop()];return w(N,null,w("div",{style:{display:e[r.data_field].isVisible?"block":"none",marginTop:8}},["checkbox","radio","select"].indexOf(t.typeName)>-1&&w(Sr,{block:t,state:e[r.data_field],setValue:e=>n.setNestedValue(r.data_field,e),showErrors:o,placeholder:r.placeholder})))}function Ta({id:e,showErrors:t,firstInvalid:n}){const{text:o}=zn(),{state:r,block:a,actions:i,errorMessage:s,errorMessages:l}=uo({id:e}),c=fe(xt());if("screenshot"===a.typeName&&a.properties?.bottomScreen)return null;const u=Ea[a.typeName]??null;return w(Zo,{block:a,focusInvalid:t&&n,show:!(un.indexOf(a.typeName)>-1)&&r.isVisible,typeCount:r.typeCount,_id:c.current},w(tr,{required:a.properties?.required,block:a,requiredMarkLabel:s??o?.requiredMarkLabel,_id:c.current},a.title),w(u,$a({block:a,state:r},i,{text:o,showErrors:t,showError:r.showError,errorMessages:l,_id:c.current})),a.properties?.elements_extra&&w(Ca,{block:a,state:r,actions:i,showErrors:t}),r.showError&&"contact"!==a.typeName&&w(rr,{id:`error-message-${a.id}`,showErrors:t},s))}var Pa=Pe(function({children:e,type:t,id:n,onClick:o=()=>{},loading:r,style:a={}},i){const{formKey:s}=Un(),{properties:l}=zn();return w(er,{component:"button",ref:i,className:`btn ${"submit"===t?"btn-primary btn-submit pull-right":"next"===t?"btn-next pull-right":"btn-previous"} ${r?"is-submitting":""}`,id:"submit"!==t?`btn_${t}_${n}`:`surveySubmitBtn-${s}`,type:"button",onClick:o,style:a,"data-testid":t,disabled:r},r&&w("div",{className:Rt("btn-overlay")},w(oa,{icon:"refresh",className:"is-refresh-icon",alt:"refresh icon"})),w("div",{className:Rt("btn-content")},e))});function Ia({pageNumber:e}){const{formKey:t}=Un(),{activePage:n,loading:o,postFeedbackError:r,showErrors:a,showNavAutopostPages:i,actions:s,actionButtonRef:l,firstFocusableBlockRef:c}=Wo(),{text:u,pageMap:p,properties:{advanced:d},blocks:m}=zn(),f=bo(e),{pageValid:h,firstInvalid:y}=go(f,a),{block:_={}}=uo({typeName:"page_break",typeOf:e-1}),b=_.properties?.nextLabel??_?.nextLabel??"Next",g=_.properties?.prevLabel??_?.prevLabel??u.btnLastBackText??"Back",v=n===Number(e),k=Number(Object.keys(p).pop()),x=k===e,O=!(1===e)&&!d.hideSubNavigation,S=!x&&k>1&&!d.hideSubNavigation&&(!_.properties?.autopost||i.indexOf(n)>-1),$=x&&!d.hideNavigation&&(!d.lastPageAutoPost||i.indexOf(n)>-1),E=v?f.find(e=>{const t=Object.values(m??{}).find(t=>Number(t.id)===e&&!0!==t?.properties?.hide_on_init);return t?ln.indexOf(t.typeName)>-1:null}):null,C=v&&!E;return w("div",{id:`page${e}-${t}`,style:{display:v?"block":"none"},"data-testid":`page-${e}`},w(Ta,{id:mn}),f.map(e=>w("div",{ref:v&&E===e?c:null},w(Ta,{id:e,showErrors:a,firstInvalid:v&&y&&e===y}))),w("div",{className:Rt({prefix:!1,className:"form-actions"},!O&&"row-reverse"),"data-testid":"page_break-group",ref:v&&C?c:null,"aria-live":"polite"},w(N,null,O&&w(Pa,{type:"prev",id:_.id??t,onClick:()=>s.prevPage()},w(oa,{icon:"angle-left",className:"is-context-icon"})," ",g),S&&w(Pa,{type:"next",id:_.id,ref:v?l:null,loading:o,onClick:()=>{h?s.nextPage():s.dispatch({type:"set_show_errors",payload:{pageLayout:f}})}},b," ",w(oa,{icon:"angle-right",className:"is-context-icon"})),$&&w(Pa,{type:"submit",ref:v?l:null,loading:o,onClick:()=>{h?s.postFeedback():s.dispatch({type:"set_show_errors",payload:{pageLayout:f}})}},w("div",null,u.btnSubmitText," ",w(oa,{icon:"paper-plane-o",className:"is-context-icon"}))),r&&w(rr,{showErrors:!0},"Something went wrong, please try again"))))}const ja={text:ha,icon:oa,link:or,img:"img"};function La({isFirstPage:e,isLastPage:t,...n}){const o=lo(),r=zn(),{webView:a}=Un(),{actions:i}=Wo(),s=(e?r.properties?.introPage?.elements:r.properties?.thanksPage?.elements)||{},l=s&&"object"==typeof s?Object.keys(s):[],c=l.filter(e=>s[e]?.show_as_panels).length,u=Object.keys(s).length?Object.keys(s).filter(e=>"text"===s[e].type)[0]:null,p=s[u]?.genID??null;return de(()=>{p&&i.updateScreenReaderHelper(s[u]?.value??"Thank you for your feedback")},[]),w("div",{className:e?"front-page":"last-page",id:e?"frontPage":"lastPage","data-testid":e?"front-page":"last-page"},l.length>0&&l.map(t=>{const n=s[t],r=ja[n.type];if(!r)return null;const a={..."text"===n.type&&{text:n.value},..."icon"===n.type&&{icon:n.icon,alt:n?.alt},..."img"===n.type&&{src:$t(n.url),title:n?.alt??"",alt:n?.alt??"",style:{height:"static"===n.layout?n.height:"auto",width:n.width??"100%"}},..."link"===n.type&&{block:{id:n.genID,properties:{linktype:n.linktype||("link"!==n.use_as?"function":"link"),linktype_function:n.linktype_function||n.use_as,plaintext:n.value||n.description,description:n.value||n.description,hyperlinktext:n.hyperlinktext,show_as_buttons:n.show_as_buttons,show_as_panels:n.show_as_panels,close_on_linkclick:"undefined"!==n.close_on_linkclick&&n.close_on_linkclick,icon:n.icon,iconAlignment:n.icon_align,hyperlinkhref:n.hyperlinkhref}}}},i=n.show_as_panels?"panel-wrap":n.show_as_buttons?"btn-wrap":"",l="img"===n.type?`img-${n.layout?n.layout:"responsive"}`:"",u=n.show_as_panels?"inline-block":"block",p={textAlign:n.align,display:e||o[n.genID]?.isVisible?u:"none",width:n.show_as_panels?1===c?"100%":c%2==0?"50%":"33%":"auto"};return w("div",{className:`custom-section custompage-${n.type} ${i} ${l}`,id:`${e?"intro-page":"thanks-page"}_${n.genID??t}`,style:p},w(r,a))}),a&&0===l.length&&t&&w(N,null,w("div",{class:"completed-anim do-anim"},w(oa,{icon:"check",alt:"check icon"})),w("span",{dangerouslySetInnerHTML:{__html:r.properties.exit_content}})))}function Da({formHeaderHeight:e}){const{formOffset:t,formIsCompleted:n,formIsOnOpenerPage:o,loading:r,postFeedbackError:a}=Wo(),{properties:i,pageMap:s}=zn();return i.conversational?w(Yr,{formOffset:t,formHeaderHeight:e}):o&&!i.conversational?w(La,{isFirstPage:!0}):!n||r||a||i.conversational?Object.keys(s).map(e=>w(Ia,{pageNumber:Number(e)})):w(La,{isLastPage:!0})}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Aa.apply(null,arguments)}function Va(){const{formKey:e,forceHeader:t,webView:n,webviewShowHeader:o}=Un(),{contentDivRef:r,formType:a,formOpen:i,formIsCompleted:s,formIsOnOpenerPage:l,activePage:c,screenReaderHelperText:u}=Wo(),[p,d]=ue(0),{themeClass:m}=zn(),{disable_branding:f,conversational:h}=Wn(),y=Gn(),_=function(){const[e,t]=ue(!1);return de(()=>{const e=()=>{t(!0)};return window.addEventListener("touchend",e,{once:!0}),()=>{document.removeEventListener("touchend",e)}},[e]),e}(),b=uo({typeName:"screenshot"}),g="embed"!==a||Lt()||t||n&&o,v=!s&&!l&&y.showProgressbar,k=!f&&("embed"!==a||Lt()||n);return w("div",{class:`mopinion-survey-content notranslate wcag ${y.showProgressbar&&!y.toggleDotview?"has-progressbar":""} ${y.buttonStyle?y.buttonStyle:""} ${n||"embed"!==a?"":"overflow-visible"} ${_?"touch-device":""}\n\t\t\t`,ref:r,key:"contentDiv",tabIndex:-1,"data-nosnippet":!0},w("div",{id:"screenreader-helper",role:"status","aria-live":"polite"},u),w("div",Aa({className:`mopinion-survey-output ${m} ${"slide"===a?"mopinion-slide":""} ${"modal"===a?"is-modal":""} ${"embed"!==a||n?"":"is-embed"} on-${s?"page-thanks":l?"page-intro":"page-"+c} ${h?"conversational":""}`,"data-key":e,style:{position:"relative"}},"embed"!==a&&{"data-mop-page-url":Dt()}),g&&w(Oa,{formKey:e,formOpen:i,formIsCompleted:s,setFormHeaderHeight:d}),v&&w(Sa,null),w(Da,{formHeaderHeight:p}),b?.block?.properties?.bottomScreen&&!l&&!s&&w(Zo,{block:b.block,show:!0},w(Ir,{block:b.block,state:b.state,setValue:b.actions.setValue,setNestedValue:b.actions.setNestedValue})),b.block?.id&&!n&&w(wa,{id:b.block.id})),k&&w(ma,null),"embed"!==a&&w(xa,{formIsCompleted:s}))}function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ma.apply(null,arguments)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ra.apply(null,arguments)}const Ka=Pe(function({children:e,style:t={}},n){const{widthClass:o,screenshotActive:r,formWidth:a,formType:i,formOpen:s}=Wo(),{conversational:l,advanced:c}=Wn();return w("div",Ra({},{id:"surveyWindow",className:`surveyWindow ${o} ${c.formStyle??""} ${r?"screen-capture-active":""}`,"data-testid":i,"data-state":s?"open":"close",...!s&&{"aria-hidden":"true",inert:"true"},style:{width:a||"100%",height:"auto",maxHeight:"5000px",border:"none",borderRadius:"3px",background:"rgba(255,255,255,0.01)",transition:"all .2s",overflow:"hidden",...t,...l&&{transition:"opacity .225s"}}},{ref:n}),e)});var Ba=Ka;const qa=Pe(function(e,t){const{formKey:n,showButton:o}=Un(),{themeClass:r,text:a}=zn(),{trigger:i}=Wn(),s=Gn(),[l,c]=ue(!1);de(()=>{setTimeout(()=>{c(!0)},100)},[]);const{formOpen:u,closeButtonRef:p,formType:d,buttonType:m,isPastBreakpoint:f,position:h,actions:y,screenshotActive:_}=Wo(),b="float"===m?"button-float "+(f?"button-float-mobile":""):"";return o?w("button",{type:"button",id:"slide"===d?"surveySliderBtn":"",class:"slide"===d?`notranslate btn btn-open-slider ${r} ${b} allow-button wcag`:`notranslate btn-open-survey btn btn-primary tab tab-${h} ${r} allow-button wcag ${s.buttonStyle?s.buttonStyle:""} ${b} ${i.button.icon?"":"no-icon"} ${r}`,"data-button-for":n,onClick:y.toggleForm,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey||!u||_||(e.preventDefault(),Vt(p.current))},style:{opacity:l?1:0,visibility:l?"visible":"hidden",...!l&&{transition:"none!important"}},ref:t,ariaLabel:a.btnOpenText??"Feedback","data-testid":"feedback-button"},"slide"===d&&"float"===m&&u?w("span",{className:"mopinion-close-icon"},""):Boolean(i.button.icon)?w(oa,{icon:`${i.button.icon}`}):null,a.btnOpenText&&"slide"!==d&&w("span",null,a.btnOpenText)):null});var Ha=qa;const Fa=Pe(function(e,t){const{text:n}=zn(),{feedbackButtonRef:o,shiftFocusToTopRef:r,actions:a}=Wo();return w(er,{component:"button",type:"button",id:"closeModalBtn",ref:t,title:n.closeBtnTitle,"aria-label":n.closeBtnTitle,className:"close-modal wcag",onClick:()=>{a.toggleForm()},style:{backgroundColor:"transparent",boxShadow:"none",border:"none"},"data-testid":"close",onKeyDown:e=>{"Enter"===e.key&&Vt(o.current),"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),Vt(r.current))}})});var za=Fa;const Ua="0px 5px 40px rgb(0,0,0,0.16)",Wa={modal:function(){const{feedbackButtonRef:e,closeButtonRef:t,formBodyRef:n,wrapStyle:o,formOpen:r,screenshotActive:a,formType:i,actions:s}=Wo(),{translation:l={}}=Wn(),{formKey:c}=Un(),{themeClass:u}=zn(),p=fe(null),d=navigator.userAgent.match(/(iPod|iPhone|iPad)/gi)||navigator.userAgent.match(/safari/gi)&&navigator.maxTouchPoints>1;return w("div",{className:`mopinion-survey-content wcag ${u}`,"data-mop-form-type":i},w(ot,{into:document.body},w("div",{className:`mopinion-survey-content ${u}`,"data-mop-form-type":i},w("div",{ref:p,id:"surveyWindowWrap",className:"surveyWindowWrap "+(a?"screen-capture-active":""),"data-parent-for":c,style:o,onClick:e=>{e.target.isEqualNode(p.current)&&s.toggleForm()},onKeyDown:e=>s.handleWCAGkeyEvents(e)},w(Ba,{style:{position:"absolute",top:"50px",left:0,right:0,marginLeft:"auto",marginRight:"auto",maxWidth:"480px",marginBottom:50,boxShadow:Ua,background:"rgb(255,255,255)",transition:"transform .225s, opacity .225s, height .175s",transform:r?"scale(1)":"scale(.95)",opacity:r?1:0}},w("div",{id:"surveyBody",style:{overflow:"hidden"},role:"dialog","aria-labelledby":`surveyTitle-${c}`,ref:n},w(za,{ref:t}),l?.useTranslation&&l?.useToggle&&w(ia,null),w(Va,null))),w("div",{style:d?{height:"calc(100vh + 1px)"}:{}})))),w(Ha,{ref:e}),w(ot,{into:document.body},w("div",{"data-mask-for":c,class:"mopinion-survey-mask wcag "+(a?"screen-capture-active":""),id:"surveyMask",style:{pointerEvents:r?"auto":"none",opacity:r?.15:0,visibility:r?"visible":"hidden",transition:"opacity .225s, visibility .225s",zIndex:r?1999999998:-1}})))},slide:function(){const{feedbackButtonRef:e,closeButtonRef:t,formBodyRef:n,wrapStyle:o,buttonType:r,formType:a,position:i,formOpen:s,screenshotActive:l,actions:c}=Wo(),{formKey:u}=Un(),{conversational:p,translation:d={}}=Wn(),{themeClass:m}=zn();return w(ot,{into:document.body},w("div",{className:`mopinion-survey-content wcag ${m}`,"data-mop-form-type":a},w("div",{id:"surveyWindowWrap",class:`surveyWindowWrap mopinion-slider slide-${i} ${s?"mopinion-slider-active":""} ${l?"screen-capture-active":""}`,"data-parent-for":u,style:o,onKeyDown:e=>c.handleWCAGkeyEvents(e)},w("div",{class:"surveySliderScroller",id:"surveySliderScroller",style:p?{overflow:"hidden"}:{maxHeight:"80vh",overflowY:"auto","-webkit-overflow-scrolling":"touch","-ms-overflow-style":"-ms-autohiding-scrollbar"}},w(Ba,null,w("div",{id:"surveyBody",style:{overflow:"hidden"},className:"mopinion-slide",ref:n,role:"dialog","aria-labelledby":`surveyTitle-${u}`},w(za,{ref:t}),d?.useTranslation&&d?.useToggle&&w(ia,null),w(Va,null)))),"label"===r&&w(Ha,{ref:e})),"float"===r&&w(Ha,{ref:e})))},embed:function(){const{formType:e,formOpen:t,widthClass:n}=Wo(),{webView:o}=Un(),{translation:r={}}=Wn(),{themeClass:a}=zn();return w("form",Ma({"data-mop-form-type":e,className:`mopinion-survey-content wcag ${o?"":"overflow-visible"} ${a} ${n}`},!t&&{style:{display:"none"}}),r?.useTranslation&&r?.useToggle&&w(ia,null),w(Va,null))}};function Ga(){return w(Go,null,w("div",{"data-mop-page-url":Dt()},w(Xo,null),w(Ya,null),Lt()&&w(Qo,null)))}function Ya(){const{formType:e,hideLandingPageForm:t}=Wo();return t?null:w(Wa[e]??null,null)}function Qa({form:e={},multipleIndex:t,initialConfig:n={}}){return w(Hn,{initialConfig:n,form:e,multipleIndex:t},w(so,{initialConfig:n},w(Ga,null)))}const Xa=W({});function Za({children:e,...t}){return w(Xa.Provider,t,e)}function Ja({cssDomain:e,cacheDomain:t,customDomain:n}){const{styles:o={},themes:r=[],formKeys:a=[]}=_e(Xa),[i]=ue(()=>function(){try{return"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){return!1}}()?new CSSStyleSheet:null),[s,l]=ue(!1),{base:c="",...u}=o,p=Mt("style")?{nonce:Mt("style")}:{},d=`\n\t\t${c}\n\t\t${r.map(e=>u?.[e]??"").join(" ")}\n\t\t${a.map(e=>u?.[e]??"").join(" ")}\n\t`;return me(()=>{i&&function(e,t){e.replaceSync(t),-1===document.adoptedStyleSheets.indexOf(e)&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,e])}(i,d)},[d,i]),i?null:s?w(N,null,w("style",p,d)):w(N,null,w("link",{rel:"stylesheet",href:`https://${e}/css/survey-base.css`,onError:()=>l(!0)}),r.map(t=>w("link",{rel:"stylesheet",href:`https://${e}/css/themes/${t}.css`})),a.map(e=>w("link",{rel:"stylesheet",href:`https://${t}/survey/public/custom-css/${e}?domain=${n}`})))}function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ei.apply(null,arguments)}var ti=class extends O{state={config:{},styles:{},themes:[],formKeys:[]};componentDidMount(){this.updateForms()}componentDidUpdate(e){this.updateForms(e)}updateForms=(e={})=>{const{forms:t}=this.props;t.forEach(t=>this.handleUpdate(t,e?.forms?.filter(e=>e.formKey===t.formKey)[0]))};handleUpdate=(e,t={})=>{const{formKey:n,refresh:o}=e,{config:r}=this.state;r[n]||this.updateConfig(n,{},()=>{this.loadConfig(e)}),o&&t.refresh!==o&&this.setState(t=>({...t,config:{...t.config,[e.formKey]:{}}}),()=>{this.loadConfig(e)})};updateConfig=(e,t,n=()=>{})=>{this.setState(n=>({...n,config:{...n.config,[e]:Object.assign({},n.config[e]??{},t)}}),()=>{n()})};loadConfig=({domain:e,formKey:t,webView:n,noCache:o,customDomain:r,cacheDomain:a,feedbackDomain:i,refresh:s})=>{const{styles:l}=this.state;Wt({domain:e,formKey:t,webView:n,noCache:o,customDomain:r,cacheDomain:a,feedbackDomain:i,refresh:s}).getConfig(!l.base,document.location.pathname.indexOf("/survey/manage/preview/")>-1||document.location.pathname.indexOf("/data-collection/survey/preview/")>-1||document.location.pathname.indexOf("/data-collection/survey/edit/")>-1||document.location.pathname.indexOf("/survey/public/preview/")>-1||document.location.href.indexOf("blank")>-1&&window.parent.window.origin.indexOf(".mopinion.com")>-1).then(e=>{vt(e?.layout)&&("object"==typeof e.css&&Object.keys(e.css).length>0&&this.setState(n=>({styles:{...n.styles,...e.css},themes:[...n.themes,e.themeClass],formKeys:[...n.formKeys,t]})),this.updateConfig(t,e))})};renderForm=(e,t=null)=>{const{isMultiple:n}=this.props,{config:o,styles:r,themes:a}=this.state,i=(n,o)=>{const r=o?"portal-"+e.formKey:e.formKey;null!==t?(this[r]&&"object"==typeof this[r]||(this[r]={}),this[r][t]=n):this[r]=n};if(!e.divName)return null;const s=(t?e.formKey+t:e.formKey)+e.instance;return w(Ht,null,w(ot,{into:e.divName,key:s,ref:e=>i(e,!0)},o[e.formKey]&&Object.keys(o[e.formKey]).length>0&&w(Qa,ei({},e,{form:e,ref:e=>i(e,!1),multipleIndex:t,initialConfig:o[e.formKey],styles:r,themes:a}))))};render(e){const{forms:t}=this.props,n=t?.[0]?.cssDomain,o=t?.[0]?.cacheDomain,r=t?.[0]?.customDomain;return w("div",null,w(Za,{value:this.state},w(ot,{into:document.head},w(Ja,{cssDomain:n,cacheDomain:o,customDomain:r})),e.forms.map(e=>vt(e.divName)?e.divName.map((t,n)=>this.renderForm(Object.assign({},e,{divName:t}),n)):this.renderForm(e,0))))}};const ni=1==lt("MopinionDisablePost");function oi(e,t){return t?kt(document.querySelectorAll(e)):document.querySelector(e)}function ri(e,t=!1){try{return oi(e,t)?oi(e,t):oi("#"+e,t)}catch(e){return null}}let ai={};function ii(e){ai=J()(ai,e,{customMerge:e=>{if("values"===e)return(e,t)=>t}})}const si={},li=e=>Object.keys(e).filter(e=>!isNaN(e)).map(t=>e[t]),ci={version:2,ALL_KEYS:[],managerDiv:null,render(e={}){const t=e.triggerMethod??e.trigger_method,n=function({domain:e,existingDomain:t,baseDomain:n}){return e||t||n}({domain:e.domain,existingDomain:ci[e.key]?.domain,baseDomain:ci[ci.ALL_KEYS[0]]?.domain}),o={formKey:e.key,domain:n,formOpen:e.formOpen??(["proactive","exit","force"].indexOf(t)>-1||null),showButton:e.showButton||"passive"===t,cookieTime:e.cookie_expire||e.cookieTime||30,triggerMethod:t,forcePost:e.forcePost||!1,skipToLast:e.skipToLast||!1,forceType:e.forceType||!1,forceBreakPoint:e.forceBreakPoint||!1,forceButton:e.forceButton||!1,forceHeader:e.forceHeader||!1,webView:e.webView||!1,webViewShowHeader:e.webViewShowHeader||!1,proxyDomain:e.proxyDomain,cacheDomain:e.proxyCacheDomain??e.proxyDomain??"cacheorcheck.mopinion.com",customDomain:e.proxyCustomDomain??e.proxyDomain??n,feedbackDomain:e.proxyFeedbackDomain??e.proxyDomain??"survey.mopinion.com",metricsDomain:e.proxyMetricsDomain??e.proxyDomain??"metrics.mopinion.com",fontsDomain:e.proxyFontsDomain??e.proxyDomain??"fonts.mopinion.com",isCompleted:e.isCompleted||!1,feedbackId:e.feedbackId||null,disablePost:ni||e.disablePost||!1,noCache:e.noCache||!1,instance:ci[e.key]?.instance??xt(),refresh:e.refresh?xt():null,cssDomain:e.proxyCssDomain??e.proxyDomain??"collect.mopinion.com"};if(null!==o.formOpen&&(o.openAction=`form_open-${xt()}`),!o.formKey)throw new Error("formKey required");ci.hasOwnProperty(o.formKey)||(ci[o.formKey]={},ci.ALL_KEYS=[...ci.ALL_KEYS,o.formKey]),!e.hasOwnProperty("showButton")&&ci[o.formKey].showButton&&(o.showButton=!0);const r=function({container:e,useAll:t,existingContainer:n,baseContainer:o}){return e?e instanceof Node?e:e instanceof NodeList?kt(e):"string"==typeof e&&e.length&&-1===e.indexOf(",")?ri(e,t):"string"==typeof e&&e.indexOf(",")>-1?e.split(",").map(e=>ri(e)):oi("#surveyContent:not(.mopinion-survey-content)"):n??o}({container:e.container??e.divName,useAll:e.useQuerySelectorAll,existingContainer:ci[o.formKey].divName,baseContainer:ci[ci.ALL_KEYS[0]]?.divName});return o.divName=r,o.isMultiple=vt(r),ci[o.formKey]=o,qt("Props",o),qt("Options",e),qt("Render div",ci[o.formKey].renderDiv),this.renderForms()},renderForms(){if(!ci.managerDiv){const e=document.createElement("div");document.body.appendChild(e),ci.managerDiv=e}const e=ci.ALL_KEYS.map(e=>({...ci[e],extra:ai[e]}));U(w(ti,{forms:e}),ci.managerDiv)},open(e={}){return ci.render(e)},isOpen(e){return ci[e]?._formOpen&&"embed"!==ci[e]?._formType},openModal(e=!0,t=ci.ALL_KEYS[0]){try{ci.open({key:t,formOpen:!0})}catch(e){}},closeModal(e=ci.ALL_KEYS[0]){try{ci.open({key:e,formOpen:!1})}catch(e){}},send(e=!1,t=""){try{ci[t].isMultiple?ci[t].divName.forEach((n,o)=>ci.manager[t][o]._forcePost(e)):ci.manager[t]._forcePost(e)}catch(e){}},clearForm(e=""){try{delete ci[e];-1!==ci.ALL_KEYS.indexOf(e)&&(ci.ALL_KEYS.splice(ci.ALL_KEYS.indexOf(e),1),this.renderForms())}catch(e){}},setPage(e="",t){try{if("number"!=typeof t)return;if(ii({[e]:{page:t}}),!ci[e])return;ci.render({key:e,domain:ci.ALL_KEYS[0].domain})}catch(e){}},getFormConfig(e=""){try{return ci[e]._config}catch(e){}},getFormState(e){try{return ci[e].isMultiple?ci[e]._multiple.map(e=>li(e._state)):li(ci[e]._state)}catch(e){}},setValue(e="",t="",n=""){try{if(ii({[e]:{values:{[t]:n}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setBlock(e="",t,n){try{if(ii({[e]:{config:{blocks:{[t]:n}}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setBlockProperties(e="",t,n){try{if(ii({[e]:{config:{blocks:{[t]:{properties:n}}}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setBlockInnerElement(e="",{id:t,elementKey:n},o){try{if(ii({[e]:{config:{blocks:{[t]:{properties:{elements:o}}}}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setProperties(e="",t){try{if(ii({[e]:{config:{properties:t}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setText(e="",t){try{if(ii({[e]:{config:{text:t}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setErrors(e="",t){try{if(ii({[e]:{config:{text:{errors:t}}}}),!ci[e])return;ci.render({key:e})}catch(e){}},setLanguage(e="",t){try{if(ii({[e]:{language:t}}),!ci[e])return;ci.render({key:e})}catch(e){}},setCookie(e="",t,n){return ct(e,t,n)},getCookie(e=""){return lt(e)},getUrlParam(e=""){return it(e)},getStrParam(e="",t=document.location.href){return st(e,t)},getParameterByName(e="",t=document.location.href){return st(e,t)},triggerEvent(e=""){return gt(e)},addEventListener(e,t){si[e]||(si[e]=[]),si[e].push(t)},removeEventListener(e,t){try{si[e]=si[e].filter(e=>e.toString()!==t.toString())}catch(e){}},reset(e){ci[e]&&(ci[e].instance=xt(),this.renderForms())}};"undefined"!=typeof window&&(window.srv=window.srv||ci,window.mopinionSurvey=window.mopinionSurvey||ci);var ui=ci}();